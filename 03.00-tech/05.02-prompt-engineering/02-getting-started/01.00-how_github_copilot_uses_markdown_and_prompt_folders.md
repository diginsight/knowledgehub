---
title: "How GitHub Copilot Uses Markdown and Prompt Folders within Your Repo"
author: "Dario Airoldi"
date: "2025-12-26"
categories: [tech, github-copilot, prompt-engineering]
description: "Learn how GitHub Copilot consumes prompt files, instructions, and agent definitions in VS Code and Visual Studio to enhance your development workflow"
---

# How GitHub Copilot Uses Markdown and Prompt Folders within Your Repo
*(For Visual Studio Code & Visual Studio)*

GitHub Copilot's generative AI is most effective when it has access to a <mark>**structured context**</mark> about your project.  
Both Visual Studio Code (VS Code) and the latest versions of Visual Studio allow you to embed that context directly in your repository using <mark>**markdown-based prompt and instruction files**</mark>.  
These files guide Copilot by encoding reusable prompts, coding standards, business rules, and project documentation.  

This article explains how Copilot consumes these files in **VS Code** and **Visual Studio**, with clarifications based on updated official documentation and community practices.

## Table of Contents

- [ğŸ“ Prompt Files: What They Are and Where They Work](#-prompt-files-what-they-are-and-where-they-work)
- [ğŸ“š Custom Instructions: Cross-IDE Context](#-custom-instructions-cross-ide-context)
- [ğŸ¤– Chat Modes in VS Code](#-chat-modes-in-vs-code)
- [ğŸ”§ Custom Agents](#-custom-agents)
- [ğŸ¯ Agent Skills (Preview)](#-agent-skills-preview)
- [ğŸ”Œ Model Context Protocol (MCP)](#-model-context-protocol-mcp)
- [ğŸ“ Optional `.copilot/` Folder: Enhancing Local Context](#-optional-copilot-folder-enhancing-local-context)
- [âš™ï¸ VS Code Settings Reference](#ï¸-vs-code-settings-reference)
- [ğŸ”‘ Key Takeaways](#-key-takeaways)
- [ğŸ”— References](#-references)
- [ğŸ“ Appendix A: Unified Agent Architecture (v1.107+)](#-appendix-a-unified-agent-architecture-v1107)
- [ğŸ“ Appendix B: Deprecated VS Code Settings](#-appendix-b-deprecated-vs-code-settings)
- [ğŸ“ Appendix C: Feature Compatibility Matrix](#-appendix-c-feature-compatibility-matrix)
- [ğŸ“ Appendix D: Bring-Your-Own-Key Model Management](#-appendix-d-bring-your-own-key-model-management)
- [ğŸ“ Appendix E: Legacy .chatmode.md Migration](#-appendix-e-legacy-chatmodemd-migration)
- [ğŸ“ Appendix F: JetBrains IDE Support](#-appendix-f-jetbrains-ide-support)


# ğŸ“ Prompt Files: What They Are and Where They Work

A <mark>**prompt file**</mark> is a <mark>reusable Markdown document</mark> (with a <mark>`.prompt.md` extension</mark>) that you can run as a <mark>slash- or hashtag-command</mark> in Copilot Chat.  
It typically begins with an optional <mark>**YAML header**</mark> specifying metadata such as name, description, agent mode, preferred model and available tools.  
The remainder is the prompt body, written in Markdown, containing the instructions or template you want Copilot to follow.  
For example, a security audit prompt might instruct Copilot to review an API and output a list of vulnerabilities.

Prompt files were first introduced in <mark>VS Code</mark> and <mark>JetBrains IDEs</mark>.  
<mark>and Visual Studio 2022 version 17.10 and later (including Visual Studio 2026)</mark>.  
In Visual Studio, you can reference these prompts by typing <mark>`#prompt:<prompt-name>` (or using the "+" icon) to attach the prompt to the chat</mark>.  

### Required Locations

- <mark>**`.github/prompts/`**</mark> (workspace prompts). This is the default folder for <mark>**workspace-level prompt files**</mark> and is recognized automatically by both VS Code and Visual Studio (17.10+). Any `.prompt.md` file here becomes available in Copilot Chat: <mark>in **VS Code** it appears as `/promptName`</mark>, and <mark>in **Visual Studio** it appears as `#promptName` or `#prompt:<prompt-name>`</mark>.
- **User prompt files** (VS Code only). <mark>User-scope prompts</mark> are stored in a folder within your VS Code profile:
  - **Windows**: <mark>`%APPDATA%\Code\User\prompts\`</mark> (stable) or `%APPDATA%\Code - Insiders\User\prompts\` (Insiders)
  - **macOS**: `~/Library/Application Support/Code/User/prompts/`
  - **Linux**: `~/.config/Code/User/prompts/`
  
  These prompts are available across all your VS Code workspaces and appear as slash commands (e.g., `/my-prompt`). They do <mark>**not synchronise to your team via Git**</mark>, but you can enable <mark>**VS Code's Settings Sync**</mark> to share them across your own machines. Visual Studio currently has no equivalent mechanism; it only consumes repository-level prompt files.

### Prompt File Variables

Prompt files support <mark>**variable substitution**</mark> to make them dynamic and context-aware:

| Variable | Description |
|----------|-------------|
| `${selection}` or `${selectedText}` | Currently selected text in the editor |
| `${file}` | Full path of the current file |
| `${fileBasename}` | Filename without path |
| `${fileDirname}` | Directory containing the current file |
| `${workspaceFolder}` | Root folder of the workspace |
| `${workspaceFolderBasename}` | Name of the workspace folder |
| `${input:variableName}` | Prompts user for input |
| `${input:variableName:placeholder}` | User input with placeholder text |

Example usage in a prompt file:
```markdown
Analyze the following code from ${fileBasename}:
${selection}

Focus on: ${input:focus:What aspect should I focus on?}
```

### Tool References in Prompts

Prompt files and instructions can reference specific tools using the <mark>**`#tool:<tool-name>`**</mark> syntax:

```markdown
Use #tool:githubRepo to search for similar implementations.
Check #tool:terminalLastCommand for recent command output.
```

Common tool references:
- `#tool:githubRepo` â€“ Search GitHub repositories
- `#tool:terminalLastCommand` â€“ Access recent terminal output
- `#tool:problems` â€“ Get current workspace errors/warnings
- `#tool:codebase` â€“ Search the codebase semantically

### Location **not** automatically supported

Some community blogs suggest grouping Copilot files under a `.github/copilot/prompts/` folder. <mark>**Officially, this location is not recognised by default**</mark>. Both VS Code and Visual Studio expect prompt files in `.github/prompts/` unless you change VS Code's `chat.promptFilesLocations` setting to include the custom path. Visual Studio does not provide a configurable prompt-file location, so it cannot automatically read from `.github/copilot/prompts/`. 

<mark>**Important**: Files stored in `.github/copilot/prompts/` will not automatically show up in Copilot Chat</mark> unless you explicitly configure VS Code settings or manually attach them. The official, out-of-the-box location is `.github/prompts/`.

# ğŸ“š Custom Instructions: Cross-IDE Context

To ensure Copilot respects <mark>**project-specific rules and guidelines**</mark>â€”such as your naming conventions, security requirements or testing standardsâ€”you can add <mark>**custom instructions**</mark>. These instructions are stored in Markdown files that <mark>Copilot automatically injects into every chat request</mark>.

- <mark>**`.github/copilot-instructions.md`**</mark> is the <mark>**repository-wide**</mark> instructions file. Both VS Code and Visual Studio support this file, provided that the "Use Instruction Files" feature is enabled. The file should contain concise, self-contained statements about your project's coding guidelines or tooling requirements. In Visual Studio, you must enable custom instructions in the Copilot settings (Tools > Options > GitHub > Copilot > Copilot Chat). Once enabled, instructions are injected into every chat request but remain hidden from view.

- <mark>**`.github/instructions/`**</mark> holds one or more `.instructions.md` files for <mark>**path- or language-specific guidance**</mark>. Each file can specify front-matter fields like `applyTo` to control which files or folders the instructions apply to (e.g., only `**/*.cs` for C# files). This feature is supported by both VS Code and Visual Studio 17.10+ (though Visual Studio requires the custom instructions feature to be enabled). Visual Studio 2022 versions prior to 17.10 do not support custom instructions.

### Instructions File Frontmatter

```yaml
---
applyTo: "**/*.ts"           # Glob pattern for matching files
excludeAgent: "code-review"   # Exclude from specific agents
---
```

The <mark>**`excludeAgent`**</mark> property controls which agents should NOT use these instructions:
- `"code-review"` â€“ Excludes instructions from Copilot code review
- `"coding-agent"` â€“ Excludes instructions from the GitHub Copilot coding agent

# ğŸ¤– Chat Modes in VS Code

GitHub Copilot Chat provides <mark>**four built-in chat modes**</mark> accessible via the agent picker in the chat input:

![alt text](<images/01.001 GitHub copilot modes.png>)

| Mode | Description | Use Case |
|------|-------------|----------|
| <mark>**Agent**</mark> | Autonomous mode that determines necessary changes and applies them directly to your workspace | Complex multi-file refactoring, feature implementation |
| <mark>**Plan**</mark> | Creates detailed implementation plans without modifying files (read-only) | Architecture planning, understanding approach before execution |
| <mark>**Ask**</mark> | Q&A mode for questions without file modifications | Learning, code explanations, debugging assistance |
| <mark>**Edit**</mark> | Direct code editing mode for targeted changes | Quick fixes, single-file modifications |

These built-in modes <mark>**supersede many custom multi-phase agent patterns**</mark> that were previously required. For example, a three-phase "analyze â†’ plan â†’ implement" workflow can now be achieved by using Plan mode first, then switching to Agent mode for execution.

### Unified Agent Architecture (v1.107+)

VS Code 1.107 introduced <mark>**Agent HQ**</mark>, a unified interface for managing agent sessions across three execution contexts:

| Context | Execution | Isolation | Best For |
|---------|-----------|-----------|----------|
| <mark>**Local**</mark> | Interactive, in current workspace | Noneâ€”shares your workspace | Quick tasks, interactive debugging |
| <mark>**Background**</mark> | Runs autonomously using Git work trees | Fullâ€”uses isolated work tree | Long-running tasks without blocking workflow |
| <mark>**Cloud**</mark> | Runs on GitHub, creates PRs | Fullâ€”separate branch | Async work, team collaboration, overnight tasks |

![alt text](<images/001.02 continuein.png>)

**Planning mode now integrates with agent delegation**: After Plan mode generates an implementation plan, you can use the **"Start Implementation"** button to delegate execution to a local, background, or cloud agent.

For comprehensive coverage of Agent HQ, session management, work tree isolation workflows, and visual walkthroughs, see [ğŸ“ Appendix A: Unified Agent Architecture](#-appendix-a-unified-agent-architecture-v1107).

# ğŸ”§ Custom Agents

<mark>**Custom agents**</mark> (previously called "chat modes") allow you to define specialized AI personas with specific tools, instructions, and workflows. These are stored as <mark>**`.agent.md`**</mark> files and are available from <mark>**VS Code 1.106+**</mark>.

For comprehensive guidance on structuring agent files, defining personas, configuring tools, and creating handoff workflows, see [How to Structure Content for Copilot Agent Files](../04.00-how_to_structure_content_for_copilot_agent_files.md).

### Agent File Locations

- <mark>**`.github/agents/`**</mark> â€“ Workspace-level agents shared via Git with your team
- <mark>**User profile folder**</mark> (VS Code only) â€“ Personal agents available across all workspaces

### Agent File Structure

Each `.agent.md` file includes:
- **YAML frontmatter** specifying tools, model preferences, and target environment
- **Markdown body** containing the agent's persona, instructions, and workflow
- **Handoffs** (optional) for orchestrating multi-step workflows between agents

```yaml
---
name: security-auditor
description: Reviews code for security vulnerabilities
tools:
  - read_file
  - semantic_search
  - grep_search
model: claude-sonnet-4
target: vscode
---
You are a security expert. Analyze the provided code for:
- SQL injection vulnerabilities
- XSS attack vectors
- Authentication bypasses
...
```

**Supported frontmatter fields:**

| Field | Description |
|-------|-------------|
| <mark>`name`</mark> | Agent identifier |
| <mark>`description`</mark> | Brief description shown in agent picker |
| <mark>`argument-hint`</mark> | Placeholder text in chat input |
| <mark>`tools`</mark> | List of tools/tool sets the agent can use |
| <mark>`model`</mark> | Preferred AI model (e.g., `claude-sonnet-4`, `gpt-4o`) |
| <mark>`target`</mark> | Environment: `vscode` or `github-copilot` |
| <mark>`mcp-servers`</mark> | MCP server configs (for `github-copilot` target) |
| <mark>`handoffs`</mark> | Workflow transitions to other agents |
### Handoffs: Multi-Agent Workflows

<mark>**Handoffs**</mark> enable orchestrating multi-step workflows between agents:

```yaml
---
name: architect
description: Plans implementation approach
handoffs:
  - label: Start Implementation
    agent: implementer
    prompt: Now implement the plan outlined above.
    send: false  # false = user reviews before sending
---
```

When the architect agent completes its task, the user sees a "Start Implementation" button to hand off to the implementer agent.

### Practical Example: Creating a Documentation Agent

Here's a complete example of creating a documentation review agent:

**`.github/agents/doc-reviewer.agent.md`:**
```yaml
---
name: doc-reviewer
description: Reviews documentation for clarity and completeness
argument-hint: Path to documentation file
tools:
  - read_file
  - grep_search
  - semantic_search
model: claude-sonnet-4
target: vscode
---
You are a technical documentation expert. When reviewing documentation:

1. **Structure Check**: Verify proper heading hierarchy (H1 â†’ H2 â†’ H3)
2. **Completeness**: Ensure all code examples are tested and include output
3. **Clarity**: Flag jargon without definitions, identify unclear explanations
4. **References**: Verify all links are accessible and properly formatted

Provide specific line numbers and actionable recommendations.
```

**Usage workflow:**
1. Save the file to `.github/agents/doc-reviewer.agent.md`
2. Reload VS Code window (Cmd/Ctrl+Shift+P â†’ "Developer: Reload Window")
3. Open the file you want to review
4. In Copilot Chat, select `@doc-reviewer` from the agent picker
5. Type: "Review this documentation file"

The agent will analyze structure, completeness, and clarity based on its instructions.

### AGENTS.md vs .agent.md

<mark>**Important distinction:**</mark>

| File | Used By | Execution | Location |
|------|---------|-----------|----------|
| **`AGENTS.md`** | GitHub Copilot coding agent | Asynchronous (runs on GitHub, creates PRs) | Repo root (or subfolders*) |
| **`CLAUDE.md`** | Alternative to AGENTS.md | Same as AGENTS.md | Repo root |
| **`GEMINI.md`** | Alternative to AGENTS.md | Same as AGENTS.md | Repo root |
| **`.agent.md`** | VS Code chat agents | Interactive (runs locally in IDE) | `.github/agents/` |

*<small>Nested `AGENTS.md` files in subfolders are supported experimentally via the `chat.useNestedAgentsMdFiles` setting. The nearest file in the directory tree takes precedence.</small>

Visual Studio uses `AGENTS.md` (or alternatives) for its coding agent integration but does not currently support `.agent.md` files for chat.

# ğŸ¯ Agent Skills (Preview)

> âš ï¸ **Preview Feature**: Agent Skills were introduced in VS Code 1.107 (December 2024) and are currently in **Preview**.

<mark>**Agent Skills**</mark> are a new way to extend Copilot with <mark>**portable, resource-rich capabilities**</mark> that work across VS Code, CLI, and the GitHub coding agent. Unlike instructions (file-pattern rules) or agents (VS Code personas), skills <mark>**bundle templates, scripts, and examples alongside instructions**</mark>.

### Key Differences from Other Customizations

| Feature | Skills | Instructions | Prompts | Agents |
|---------|--------|--------------|---------|--------|
| **File** | `SKILL.md` in directory | `.instructions.md` | `.prompt.md` | `.agent.md` |
| **Activation** | Auto (description match) | Auto (file pattern) | On-demand (`/name`) | Agent picker |
| **Resources** | âœ… Templates, scripts | âŒ None | âŒ None | âŒ None |
| **Cross-platform** | âœ… VS Code, CLI, coding agent | âš ï¸ VS Code + GitHub.com | âŒ VS Code only | âŒ VS Code only |
| **Tool Control** | âŒ Limited | âŒ None | âœ… Full | âœ… Full |
| **Handoffs** | âŒ Not supported | âŒ Not supported | âŒ Not supported | âœ… Full |

### Skill Structure

```
.github/skills/skill-name/
â”œâ”€â”€ SKILL.md                    # Required: Instructions + metadata
â”œâ”€â”€ templates/                  # Optional: Reusable templates
â”œâ”€â”€ examples/                   # Optional: Real-world examples
â””â”€â”€ scripts/                    # Optional: Automation scripts
```

### SKILL.md Format

```yaml
---
name: webapp-testing                    # Required: lowercase, hyphens, max 64 chars
description: >                          # Required: max 1024 chars
  Generate test suites for React components using Jest.
  Use when writing tests, debugging failures, or setting up infrastructure.
---

# Web Application Testing Skill

## Purpose
[What this skill accomplishes]

## When to Use
[Scenarios that trigger this skill]

## Workflow
[Step-by-step procedure]

## Templates
Use [test template](./templates/component.test.js) as starting point.
```

### Progressive Disclosure

Skills use <mark>**three-level loading**</mark> to optimize context consumption:

1. **Level 1** (Always): `name` + `description` (~50-100 tokens per skill)
2. **Level 2** (On match): SKILL.md body (~500-1500 tokens)
3. **Level 3** (On reference): Resource files (loaded only when needed)

### Enabling Skills

```jsonc
// settings.json
{
  "chat.useAgentSkills": true
}
```

### When to Use Skills vs Agents

| Use Case | Recommendation |
|----------|----------------|
| Cross-platform workflow with templates | **Skill** |
| Complex multi-agent orchestration | **Agent** (handoffs) |
| VS Code-specific tool configuration | **Agent** |
| Shareable community capabilities | **Skill** (open standard) |

For comprehensive guidance on creating skills, see [How to Structure Content for Copilot Skills](../06.00-how_to_structure_content_for_copilot_skills.md).

# ğŸ”Œ Model Context Protocol (MCP)

The <mark>**Model Context Protocol (MCP)**</mark> is now generally available in VS Code (1.102+). MCP provides a <mark>**standardized way to connect Copilot to external data sources and tools**</mark>.

### What MCP Enables

- **Structured tool access** â€“ Connect to databases, APIs, cloud services
- **Typed data retrieval** â€“ Get data in formats Copilot can reason about
- **Reduced tool clash** â€“ Narrowly-scoped tool definitions prevent conflicts

### MCP 1.0 Features (December 2024)

The <mark>**MCP 1.0 anniversary release**</mark> introduced production-ready features:

| Feature | Description |
|---------|-------------|
| <mark>**Tasks**</mark> | Durable, resumable operations that persist across sessions |
| <mark>**Sampling**</mark> | MCP servers can request LLM completions from the client |
| <mark>**Elicitation**</mark> | Servers can prompt users for input (URL mode, traditional dialogs) |
| <mark>**Custom Icons**</mark> | Servers can provide icons for tools and resources |

### MCP Registry and Discovery

<mark>**Discover MCP servers via `@mcp` search**</mark> in the Extensions view. The curated registry includes servers for:
- **<mark>Playwright</mark>** â€“ Browser automation and testing
- **<mark>GitHub</mark>** â€“ Repository operations and issue management  
- **<mark>Wikipedia</mark>** â€“ Knowledge base queries
- **<mark>Microsoft Learn</mark>** â€“ Azure and Microsoft documentation

One-click installation adds servers directly to your `mcp.json` configuration.

### GitHub MCP Server (Preview)

VS Code 1.107 includes a <mark>**built-in GitHub MCP server**</mark> for remote agent operations:

| Setting | Description | Default |
|---------|-------------|---------|
| `github.copilot.chat.githubMcpServer.enabled` | Enable GitHub MCP server | `false` |
| `github.copilot.chat.githubMcpServer.toolsets` | Enable tool categories (issues, prs, repos, etc.) | All enabled |
| `github.copilot.chat.githubMcpServer.readonly` | Restrict to read-only operations | `false` |
| `github.copilot.chat.githubMcpServer.lockdown` | Limit to current repository only | `false` |

### Configuration

MCP servers are configured via `mcp.json` files in your workspace or user settings. The GitHub MCP registry at [github.com/mcp](https://github.com/mcp) provides pre-built servers for common integrations.

```json
{
  "servers": {
    "azure-devops": {
      "command": "npx",
      "args": ["@azure/mcp-server-ado"]
    }
  }
}
```

MCP is particularly valuable for building specialized agents that need access to external systemsâ€”such as an Azure DevOps agent that can query work items, or a database agent that can inspect schemas.

> ğŸ“˜ **Building your own MCP server?** See [How to Create MCP Servers for GitHub Copilot](../07.00-how_to_create_mcp_servers_for_copilot.md) for implementation guides in TypeScript, C#, and Python.

# ğŸ“ Optional `.copilot/` Folder: Enhancing Local Context

Although not part of the official specification, a practical <mark>**`.copilot/`**</mark> directory can hold rich project documentation and reference materials to help Copilot understand your codebase. It may include subfolders such as:

- <mark>`context/`</mark> (e.g. data schemas, API contracts, code patterns, workflows, guidelines, examples) â€“ <mark>Copilot will index files here and use them to inform its responses</mark>.
- `architecture/`, `troubleshooting/`, `examples/`, `images/`, `data/`, `reference/` â€“ these are suggested subfolders used in some community guides. <mark>None of these files automatically generate chat commands; they simply improve the semantic search</mark> used by Copilot in both VS Code and Visual Studio.

# âš™ï¸ VS Code Settings Reference

The following settings control how VS Code handles Copilot customization files:

## Prompt Files Settings

| Setting | Description | Default |
|---------|-------------|---------|
| `chat.promptFiles` | Enable/disable prompt file support | `true` |
| `chat.promptFilesLocations` | Additional folders to search for `.prompt.md` files | `[]` |
| `chat.promptFilesRecommendations` | Show prompts as recommended actions when starting new chat | `true` |

## Instructions Settings

| Setting | Description | Default |
|---------|-------------|---------|
| `chat.instructionsFilesLocations` | Additional folders to search for `.instructions.md` files | `[]` |
| `github.copilot.chat.reviewSelection.instructions` | Custom instructions for code review | `[]` |
| `github.copilot.chat.commitMessageGeneration.instructions` | Instructions for commit message generation | `[]` |
| `github.copilot.chat.pullRequestDescriptionGeneration.instructions` | Instructions for PR description generation | `[]` |

## Agent Settings

| Setting | Description | Default |
|---------|-------------|---------|
| `chat.useNestedAgentsMdFiles` | **Experimental:** Enable `AGENTS.md` files in subfolders | `false` |
| `chat.useAgentSkills` | **Preview:** Enable Agent Skills from `.github/skills/` | `false` |

## MCP Settings

| Setting | Description | Default |
|---------|-------------|---------|
| `chat.mcp.discovery.enabled` | Auto-discover MCP servers from `mcp.json` files | `true` |
| `chat.mcp.gallery.enabled` | Enable the MCP server gallery in Extensions view | `true` |

## Settings Sync

You can synchronize prompt files and instructions across devices using VS Code's Settings Sync. Enable via:
**Settings Sync: Configure** â†’ Check **Prompts and Instructions**

---

# ğŸ”‘ Key Takeaways

| Capability | VS Code | Visual Studio 2022 (17.10+) | Earlier VS versions |
|---|---|---|---|
| **<mark>Workspace prompt files</mark>** (`.github/prompts/*.prompt.md`) | Supported; slash commands `/promptName` appear in chat | Supported; use hashtag commands `#promptName` (since 17.10) | Not supported prior to 17.10 |
| **<mark>User prompt files</mark>** (`\.prompt.md` in VS Code profile) | Available as personal slash commands across all projects | Not supported | Not applicable |
| **<mark>Repo-level instructions</mark>** (`.github/copilot-instructions.md`) | Supported (requires enabling the â€œUse Instruction Filesâ€ setting) | Supported (requires enabling custom instructions in options) | Not supported prior to 17.10 |
| **<mark>Path-specific instructions</mark>** (`.github/instructions/*.instructions.md`) | Supported with `applyTo` patterns | Supported (requires enabling custom instructions) | Not supported prior to 17.10 |
| **<mark>Custom agents</mark>** (`.github/agents/*.agent.md`) | Supported from VS Code 1.106+. Each `.agent.md` defines a specialized persona, tools, and workflow. Supports handoffs for multi-agent orchestration. | Not supported for chat; Visual Studio uses `AGENTS.md`, `CLAUDE.md`, or `GEMINI.md` for its async coding agent (creates PRs). | Not available |
| **<mark>Agent Skills</mark>** (`.github/skills/*/SKILL.md`) | **Preview** (v1.107+): Portable, resource-rich workflows with templates, checklists, and scripts. Cross-platform (VS Code, CLI, coding agent). Enable via `chat.useAgentSkills`. See [article 06](../06.00-how_to_structure_content_for_copilot_skills.md). | Not currently supported. | Not available |
| **<mark>Chat modes</mark>** (Agent, Plan, Ask, Edit) | Built-in modes available via agent picker. Agent mode enables autonomous file editing; Plan mode creates implementation plans. | Not applicable; Visual Studio has different interaction patterns. | Not available |
| **<mark>Unified Agent Architecture</mark>** (v1.107+) | Agent HQ provides unified interface for local, background (work tree), and cloud agent sessions with seamless delegation. See [Appendix A](#-appendix-a-unified-agent-architecture-v1107). | Cloud agents via Copilot coding agent (creates PRs). | Not available |
| **<mark>MCP servers</mark>** (`mcp.json`) | MCP 1.0 GA (VS Code 1.102+). Features: Tasks, Sampling, Elicitation, Custom Icons. MCP Registry via `@mcp` search. GitHub MCP Server (Preview) built-in. | Not currently supported. | Not available |
| **<mark>BYOK / Model Management</mark>** (v1.107+) | Language Models Editor with BYOK support (Cerebras, OpenRouter, Ollama, etc.). HuggingFace extension for open-weights models. See [Appendix B](#-appendix-b-bring-your-own-key-model-management). | Not currently supported. | Not available |
| **<mark>`.github/copilot/` directory</mark>** | Optional; backed by community best practices for storing shared context, knowledge, patterns and examples. These files improve context but don't create commands. | Optional; improves local semantic search in Visual Studio. | Optional (if user chooses), but not part of official features. |

By following these updated guidelinesâ€”placing prompt files in `.github/prompts/` with a `.prompt.md` suffix, activating instruction files appropriately, and using a `.copilot/` folder for extended contextâ€”you can leverage GitHub Copilot effectively across both **VS Code** and the latest **Visual Studio** versions.

---

# ğŸ”— References

## Official GitHub Copilot Documentation

**[GitHub Copilot Documentation - Repository Instructions](https://docs.github.com/en/copilot/how-tos/configure-custom-instructions/add-repository-instructions)** `[ğŸ“˜ Official]`  
The official GitHub documentation for customizing Copilot with repository-level instructions. Covers prompt files (`.prompt.md`), instruction files (`.github/copilot-instructions.md` and `.github/instructions/`), and `AGENTS.md` configuration. Essential reading for understanding the official specification and best practices.

**[VS Code Copilot Customization Overview](https://code.visualstudio.com/docs/copilot/customization/overview)** `[ğŸ“˜ Official]`  
Microsoft's comprehensive guide to customizing GitHub Copilot in VS Code. Covers custom agents, custom instructions, prompt files, and MCP server configuration. The authoritative source for VS Code-specific features and settings.

**[Visual Studio Code - GitHub Copilot Chat](https://code.visualstudio.com/docs/copilot/copilot-chat)** `[ğŸ“˜ Official]`  
VS Code's official documentation for GitHub Copilot Chat features, including slash commands, context variables, and prompt file integration. Provides practical examples of using Copilot within the VS Code environment and configuring chat settings.

## Visual Studio Support

**[Visual Studio 2022 Release Notes - GitHub Copilot Features](https://learn.microsoft.com/en-us/visualstudio/releases/2022/release-notes)** `[ğŸ“˜ Official]`  
Official Microsoft release notes documenting when GitHub Copilot features were added to Visual Studio 2022. Version 17.10 introduced support for prompt files and custom instructions. Essential for understanding feature compatibility across different Visual Studio versions.

**[Visual Studio GitHub Copilot Documentation](https://learn.microsoft.com/en-us/visualstudio/ide/visual-studio-github-copilot-extension)** `[ğŸ“˜ Official]`  
Microsoft's comprehensive guide to using GitHub Copilot in Visual Studio, including configuration, chat features, and how to enable custom instructions through Tools > Options > GitHub > Copilot settings. Relevant for Visual Studio users who need to configure Copilot properly.

## Community Best Practices and Patterns

**[How to use GitHub Copilot: Prompts, tips, and use cases](https://docs.github.com/en/copilot/using-github-copilot/prompt-engineering-for-github-copilot)** `[ğŸ“˜ Official]`  
Official GitHub documentation covering prompt engineering best practices, effective communication patterns with Copilot, and real-world use cases. Includes examples of clear instructions, providing context, and breaking down complex tasks for optimal results.

**[How to write a great AGENTS.md: Lessons from over 2,500 repositories](https://github.blog/ai-and-ml/github-copilot/how-to-write-a-great-agents-md-lessons-from-over-2500-repositories/)** `[ğŸ“— Verified Community]`  
Official GitHub blog post analyzing over 2,500 agent.md files to identify patterns that separate successful custom agents from failures. Covers the six core areas (commands, testing, project structure, code style, git workflow, and boundaries) with practical templates and real-world examples.

**[VS Code Agent Mode Documentation](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode)** `[ğŸ“˜ Official]`  
Documentation for the Agent mode in VS Code that enables autonomous file editing and code generation. Explains how Agent mode, combined with Plan mode, provides powerful multi-step workflows.

## Additional Context and Architecture

**[VS Code API - Chat Extension Guide](https://code.visualstudio.com/api/extension-guides/chat)** `[ğŸ“˜ Official]`  
For developers building VS Code extensions that integrate with Copilot Chat. Explains the chat API, participant patterns, and how extensions can contribute custom slash commands. Relevant for understanding the extensibility model and how prompt files fit into the broader VS Code chat architecture.

**[GitHub Copilot Trust Center](https://resources.github.com/copilot-trust-center/)** `[ğŸ“˜ Official]`  
Official resource covering security, privacy, and data handling in GitHub Copilot. Important for understanding how your prompts, instructions, and code context are processed, what data is sent to GitHub, and compliance considerations for enterprise use.

## Model Context Protocol and Tools

**[Model Context Protocol (MCP) Specification](https://modelcontextprotocol.io/)** `[ğŸ“˜ Official]`  
The protocol specification for connecting AI assistants to external data sources and tools. MCP provides structured, typed access to external systems, enabling narrowly-scoped tool definitions that reduce tool clash and improve reliability.

**[VS Code MCP Servers Documentation](https://code.visualstudio.com/docs/copilot/customization/mcp-servers)** `[ğŸ“˜ Official]`  
Official VS Code documentation for configuring MCP servers. Explains how to set up `mcp.json` files and connect Copilot to external data sources like databases, cloud services, and APIs.

## VS Code Release Notes

**[VS Code v1.107 Release Notes](https://code.visualstudio.com/updates/v1_107)** `[ğŸ“˜ Official]`  
December 2024 release introducing Agent HQ unified interface, background agents with work tree isolation, MCP 1.0 features (Tasks, Sampling, Elicitation), GitHub MCP Server (Preview), enhanced Language Models Editor with BYOK support, and Claude skills integration. Essential reading for understanding the latest agentic development capabilities.

**[VS Code v1.106 Release Notes](https://code.visualstudio.com/updates/v1_106)** `[ğŸ“˜ Official]`  
November 2024 release that made custom agents (`.agent.md` files) stable, introduced handoff workflows between agents, and added the `target` field for distinguishing VS Code vs GitHub Copilot execution contexts.

**[HuggingFace for VS Code Extension](https://marketplace.visualstudio.com/items?itemName=huggingface.huggingface-vscode)** `[ğŸ“˜ Official]`  
Official extension for using HuggingFace models in VS Code Copilot Chat. Provides access to open-weights models (Llama, Mistral, DeepSeek, Qwen) via multiple inference providers with automatic cost/speed optimization.

## Prompt Engineering Fundamentals

**[Prompt engineering techniques - Microsoft Azure AI](https://learn.microsoft.com/en-us/azure/ai-foundry/openai/concepts/prompt-engineering)** `[ğŸ“˜ Official]`  
Microsoft's comprehensive guide to prompt engineering techniques covering instruction design, primary content structuring, few-shot learning, and output specification. Includes detailed examples of breaking down tasks, specifying output structures, temperature settings, and grounding context. Note: These techniques apply to GPT models; reasoning models (gpt-5, o-series) require different approaches.

**[Prompt engineering - OpenAI](https://platform.openai.com/docs/guides/prompt-engineering)** `[ğŸ“˜ Official]`  
OpenAI's official prompt engineering guide providing foundational strategies for working with GPT models. Covers core techniques including instruction clarity, systematic approaches to prompt construction, and best practices for reducing hallucination.

**[Reasoning best practices - OpenAI](https://platform.openai.com/docs/guides/reasoning-best-practices)** `[ğŸ“˜ Official]`  
OpenAI's guidance on best practices for reasoning models (o-series). Explains when to use reasoning models vs GPT models, covering seven use case categories including needle-in-haystack retrieval, visual reasoning, code review, and multistep planning. Emphasizes keeping prompts simple and avoiding chain-of-thought instructions.

## Research

**[Lost in the Middle: How Language Models Use Long Contexts](https://arxiv.org/abs/2307.03172)** `[ğŸ“— Verified Community]`  
Academic research (Liu et al., 2023, TACL) on context window attention patterns, documenting the phenomenon where models under-weight middle content in long contexts. Performance is significantly better when relevant information appears at beginning or end of prompts. Foundational research for understanding why commands should be placed early in prompts and why context placement matters for agent instructions.

---

# ğŸ“ Appendix A: Unified Agent Architecture (v1.107+)

VS Code 1.107 introduced <mark>**Agent HQ**</mark>, a unified interface for managing agent sessions across local, background, and cloud execution contexts. This appendix provides detailed coverage of the architecture, workflows, and best practices.

## Agent HQ Interface

Agent HQ provides a centralized view of all agent sessions:

- **Recent Sessions List** â€“ View all local, background, and cloud sessions with filtering and search
- **Session State Indicators** â€“ Read/unread markers, input-required flags, completion status
- **Quick Actions** â€“ Archive, continue, copy workspace changes, delegate to different context

### Session Types Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AGENT EXECUTION CONTEXTS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   LOCAL     â”‚      â”‚   BACKGROUND    â”‚      â”‚        CLOUD            â”‚  â”‚
â”‚  â”‚   AGENT     â”‚      â”‚     AGENT       â”‚      â”‚        AGENT            â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ Interactive â”‚      â”‚ Autonomous      â”‚      â”‚ Async (GitHub)          â”‚  â”‚
â”‚  â”‚ Same window â”‚      â”‚ Git work tree   â”‚      â”‚ Creates PRs             â”‚  â”‚
â”‚  â”‚ Blocks UI   â”‚      â”‚ Non-blocking    â”‚      â”‚ Team collaboration      â”‚  â”‚
â”‚  â”‚             â”‚      â”‚                 â”‚      â”‚                         â”‚  â”‚
â”‚  â”‚ Best for:   â”‚      â”‚ Best for:       â”‚      â”‚ Best for:               â”‚  â”‚
â”‚  â”‚ â€¢ Quick     â”‚      â”‚ â€¢ Long tasks    â”‚      â”‚ â€¢ Overnight work        â”‚  â”‚
â”‚  â”‚   fixes     â”‚      â”‚ â€¢ Parallel      â”‚      â”‚ â€¢ Complex refactors     â”‚  â”‚
â”‚  â”‚ â€¢ Iterative â”‚      â”‚   exploration   â”‚      â”‚ â€¢ Team review           â”‚  â”‚
â”‚  â”‚   work      â”‚      â”‚ â€¢ Large changes â”‚      â”‚                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Work Tree Isolation Workflow

<mark>**Background agents use Git work trees**</mark> for complete isolation from your main workspace:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WORK TREE ISOLATION WORKFLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  1. REQUEST                                                                   â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚     â”‚ "Create background  â”‚                                                   â”‚
â”‚     â”‚  agent session"     â”‚                                                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚               â”‚                                                               â”‚
â”‚               â–¼                                                               â”‚
â”‚  2. WORK TREE CREATION                                                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚     â”‚ Git creates isolated work tree:                 â”‚                       â”‚
â”‚     â”‚ /repo/.git/worktrees/agent-session-xyz/         â”‚                       â”‚
â”‚     â”‚                                                 â”‚                       â”‚
â”‚     â”‚ â€¢ Full copy of current branch state             â”‚                       â”‚
â”‚     â”‚ â€¢ Independent staging area                      â”‚                       â”‚
â”‚     â”‚ â€¢ No interference with main workspace           â”‚                       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚               â”‚                                                               â”‚
â”‚               â–¼                                                               â”‚
â”‚  3. AGENT EXECUTION                                                           â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚     â”‚ Agent works in isolated work tree:              â”‚                       â”‚
â”‚     â”‚ â€¢ Makes changes without affecting main          â”‚                       â”‚
â”‚     â”‚ â€¢ Can run tests, builds in isolation            â”‚                       â”‚
â”‚     â”‚ â€¢ Session visible in Agent HQ                   â”‚                       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚               â”‚                                                               â”‚
â”‚               â–¼                                                               â”‚
â”‚  4. REVIEW & INTEGRATE                                                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚     â”‚ User reviews changes in Agent HQ:               â”‚                       â”‚
â”‚     â”‚                                                 â”‚                       â”‚
â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚                       â”‚
â”‚     â”‚  â”‚ Direct      â”‚  â”‚ Create PR   â”‚              â”‚                       â”‚
â”‚     â”‚  â”‚ Apply       â”‚  â”‚ for Review  â”‚              â”‚                       â”‚
â”‚     â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                       â”‚
â”‚     â”‚                                                 â”‚                       â”‚
â”‚     â”‚ Work tree cleaned up after integration          â”‚                       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Work Tree Benefits

| Benefit | Description |
|---------|-------------|
| <mark>**No Conflicts**</mark> | Agent changes don't interfere with your local uncommitted work |
| <mark>**Parallel Exploration**</mark> | Run multiple agents exploring different approaches simultaneously |
| <mark>**Safe Experimentation**</mark> | Agent can make breaking changes without affecting your environment |
| <mark>**SCM Integration**</mark> | Changes appear in Source Control view with clear session attribution |

### Enabling Work Trees

Work tree isolation is available via a dropdown when starting background sessions:

1. Open Agent HQ or use **"Continue in..."** from chat
2. Select **"Background (Work Tree)"** from the execution context dropdown
3. Agent session starts in isolated work tree
4. Review changes in Agent HQ â†’ **"Direct Apply"** or **"Create PR"**

## Planning â†’ Agent Delegation

<mark>**Plan mode integrates with agent delegation**</mark> for seamless workflows:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PLAN â†’ DELEGATE WORKFLOW                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  1. PLAN MODE                                                      â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚     â”‚ User: "Plan authentication refactoring"   â”‚                  â”‚
â”‚     â”‚                                           â”‚                  â”‚
â”‚     â”‚ Copilot generates detailed plan:          â”‚                  â”‚
â”‚     â”‚ â€¢ Step 1: Extract auth middleware         â”‚                  â”‚
â”‚     â”‚ â€¢ Step 2: Create token service            â”‚                  â”‚
â”‚     â”‚ â€¢ Step 3: Update route handlers           â”‚                  â”‚
â”‚     â”‚ â€¢ Step 4: Add unit tests                  â”‚                  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                       â”‚                                            â”‚
â”‚                       â–¼                                            â”‚
â”‚  2. DELEGATION OPTIONS                                             â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚     â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚
â”‚     â”‚     â”‚  [Start Implementation]          â”‚   â”‚                  â”‚
â”‚     â”‚     â”‚                                  â”‚   â”‚                  â”‚
â”‚     â”‚     â”‚  Execute as:                     â”‚   â”‚                  â”‚
â”‚     â”‚     â”‚  â—‹ Local Agent (interactive)     â”‚   â”‚                  â”‚
â”‚     â”‚     â”‚  â—‹ Background Agent (work tree)  â”‚   â”‚                  â”‚
â”‚     â”‚     â”‚  â—‹ Cloud Agent (GitHub PR)       â”‚   â”‚                  â”‚
â”‚     â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                  â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## v1.107.1 Improvements

The v1.107.1 patch release added refinements to the agent experience:

| Improvement | Description |
|-------------|-------------|
| **<mark>Side-by-Side View</mark>** | Agent sessions view defaults to side-by-side layout for easier comparison |
| **<mark>Input-Required Markers</mark>** | Sessions requiring user input are clearly marked in Agent HQ |
| **<mark>Workspace Copying</mark>** | Support for copying workspace changes when creating background sessions |
| **<mark>Persistent Chat Prompt</mark>** | Chat prompt is not cleared when creating a new session |
| **<mark>Collapsed Tool Calls</mark>** | Tool calls in cloud sessions are collapsed by default for cleaner UI |

## Entry Points for Delegation

You can delegate to different agent contexts from multiple entry points:

- **Chat View** â€“ "Continue in..." button in chat response
- **Agent HQ** â€“ Session actions menu â†’ "Continue as..."
- **Command Palette** â€“ "GitHub Copilot: Start Background Session"
- **Untitled Prompt Files** â€“ "Continue in..." button when drafting prompts

---

# ğŸ“ Appendix B: Deprecated VS Code Settings

The following settings are <mark>**deprecated as of VS Code 1.102**</mark>. Use `.instructions.md` files instead:

| Deprecated Setting | Migration |
|-------------------|----------|
| `github.copilot.chat.codeGeneration.instructions` | Use `.github/instructions/*.instructions.md` with `applyTo` patterns |
| `github.copilot.chat.testGeneration.instructions` | Use `.github/instructions/*.instructions.md` with `applyTo` patterns |

<mark>**Recommendation:**</mark> Remove these deprecated settings from your VS Code configuration and migrate to instruction files for better maintainability and version control.

---

# ğŸ“ Appendix C: Feature Compatibility Matrix

## Supported Files

| File Type | Location | Notes |
|-----------|----------|-------|
| **Workspace instructions** | `.github/copilot-instructions.md` | Same as VS Code/Visual Studio |
| **Global instructions** | OS-specific path (see below) | Personal instructions across all projects |
| **Prompt files** | `.github/prompts/*.prompt.md` | Invoked via `/promptName` commands |

## Global Instructions Location

| OS | Path |
|----|------|
| **Windows** | `%APPDATA%\JetBrains\<product><version>\copilot\global-copilot-instructions.md` |
| **macOS** | `~/Library/Application Support/JetBrains/<product><version>/copilot/global-copilot-instructions.md` |
| **Linux** | `~/.config/JetBrains/<product><version>/copilot/global-copilot-instructions.md` |

*Replace `<product><version>` with your IDE (e.g., `IntelliJIdea2024.3`, `PyCharm2024.3`).*

## Differences from VS Code

- JetBrains does **not** support `.agent.md` files (custom agents)
- JetBrains does **not** support MCP server configuration
- Path-specific `.instructions.md` files work the same as VS Code
- Prompt files use `/promptName` syntax (same as VS Code)

---

# ğŸ“ Related Articles in This Series

- **[How to Name and Organize Prompt Files](../02.00-how_to_name_and_organize_prompt_files.md)**  
  *Best practices for organizing GitHub Copilot files in your repository, including naming conventions and folder structure.*

- **[How to Structure Content for Copilot Prompt Files](../03.00-how_to_structure_content_for_copilot_prompt_files.md)**  
  *Detailed guidance on YAML frontmatter, content structuring, and advanced prompt patterns for effective responses.*

- **[How to Structure Content for Copilot Agent Files](../04.00-how_to_structure_content_for_copilot_agent_files.md)**  
  *Comprehensive guide to creating custom agents with `.agent.md` files, including personas, tools, and handoff workflows.*

- **[How to Optimize Prompts for Specific Models](../08.00-how_to_optimize_prompts_for_specific_models.md)**  
  *In-depth guide to tailoring prompts for different LLM families (GPT, Claude, Gemini). Covers model-specific syntax, reasoning model strategies, and multi-model architecture patterns.*

---



# ğŸ“ Appendix D: Bring-Your-Own-Key Model Management

VS Code 1.107 enhanced model management with the <mark>**Language Models Editor**</mark> and expanded <mark>**bring-your-own-key (BYOK)**</mark> support.

## Language Models Editor

Access via **Settings** â†’ **GitHub Copilot** â†’ **Language Models** or Command Palette â†’ "GitHub Copilot: Manage Language Models"

### Features

| Feature | Description |
|---------|-------------|
| <mark>**Model Visibility**</mark> | Hide unused models from the picker for a cleaner interface |
| <mark>**Capability Filtering**</mark> | Filter by vision support, tool calling, context window size |
| <mark>**Provider Management**</mark> | Add models from installed providers without leaving the editor |
| <mark>**Search with Highlighting**</mark> | Find models by name, provider, or capability |

### Filter Syntax

| Filter | Description |
|--------|-------------|
| `@provider:openai` | Show only OpenAI models |
| `@capability:vision` | Models with vision/image support |
| `@capability:tools` | Models with tool/function calling |
| `@visible:true/false` | Show visible or hidden models |

## BYOK Providers

<mark>**Bring-your-own-key**</mark> allows using models from external providers with your own API keys:

| Provider | Models Available | Notes |
|----------|-----------------|-------|
| <mark>**Cerebras**</mark> | Llama 3.3, DeepSeek v3.2, GLM-4.6 | Extremely fast inference |
| <mark>**OpenRouter**</mark> | 100+ models | Unified API for multiple providers |
| <mark>**Ollama**</mark> | Local models | Fully local, no API calls |
| <mark>**Azure OpenAI**</mark> | GPT-4o, GPT-4 Turbo | Enterprise deployment |
| <mark>**Anthropic (direct)**</mark> | Claude models | Direct API access |

### Adding a BYOK Provider

1. Open Command Palette â†’ "GitHub Copilot: Add API Key"
2. Select provider (Cerebras, OpenRouter, etc.)
3. Enter your API key
4. New models appear in the model picker

### Model Capabilities Display

The model picker now shows capability indicators:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Select Model                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Claude Sonnet 4        [200K] [ğŸ‘ï¸] [ğŸ”§]                 â”‚
â”‚  GPT-4o                 [128K] [ğŸ‘ï¸] [ğŸ”§]                 â”‚
â”‚  DeepSeek v3.2          [64K]  [ğŸ”§]                       â”‚
â”‚  Llama 3.3 70B          [128K] [ğŸ”§]                       â”‚
â”‚  o3                     [200K] [ğŸ”§] [ğŸ’­]                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Legend: [context] [ğŸ‘ï¸ vision] [ğŸ”§ tools] [ğŸ’­ reasoning] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## HuggingFace Integration

The <mark>**HuggingFace Inference Provider extension**</mark> enables access to open-weights models:

### Features

| Feature | Description |
|---------|-------------|
| **Multiple Inference Providers** | HuggingFace Inference API, Nebius, SambaNova, Together AI, more |
| **Fastest/Cheapest Mode** | Automatic routing to optimal provider based on cost or speed |
| **Open-Weights Models** | Access to Llama, Mistral, DeepSeek, Qwen, and other open models |

### Installation

1. Install **"HuggingFace for VS Code"** extension from marketplace
2. Sign in with HuggingFace account
3. Models appear in Copilot's model picker
4. Select fastest/cheapest based on your preference

### Extension ID
`huggingface.huggingface-vscode`

## Quota Considerations

<mark>**Important:**</mark> BYOK models do not consume GitHub Copilot quota, but:

- Active Copilot subscription is still required
- Background query refinement (using GPT-4o Mini) doesn't count against quota
- BYOK costs are billed directly by the provider
- Full prompt logging available in output channel for debugging/optimization

## Claude Skills Support

VS Code 1.107 added support for <mark>**Claude skills**</mark>â€”reusable capability definitions that extend Claude's abilities:

- Skills can be referenced in agent files via the `tools` field
- Skills provide specialized behaviors (web browsing, file analysis, etc.)
- Growing ecosystem of community and official skills

---

*Last updated: December 2025*

---

# ğŸ“ Appendix E: Legacy .chatmode.md Migration

Prior to VS Code 1.106, custom agents were called "chat modes" and used different file conventions:

| Legacy | Current |
|--------|--------|
| `.chatmode.md` extension | `.agent.md` extension |
| `.github/chatmodes/` folder | `.github/agents/` folder |

### Migration Steps

1. VS Code automatically recognizes legacy `.chatmode.md` files
2. A **Quick Fix** action appears to migrate files to the new format
3. Rename files from `*.chatmode.md` to `*.agent.md`
4. Move files from `.github/chatmodes/` to `.github/agents/`

<mark>**Recommendation:**</mark> Migrate to the new format for consistency with current documentation and to ensure future compatibility.

---

# ğŸ“ Appendix F: JetBrains IDE Support

JetBrains IDEs (IntelliJ IDEA, PyCharm, WebStorm, etc.) support GitHub Copilot with their own conventions:

## Supported Files

| File Type | Location | Notes |
|-----------|----------|-------|
| **Workspace instructions** | `.github/copilot-instructions.md` | Same as VS Code/Visual Studio |
| **Global instructions** | OS-specific path (see below) | Personal instructions across all projects |
| **Prompt files** | `.github/prompts/*.prompt.md` | Invoked via `/promptName` commands |

## Global Instructions Location

| OS | Path |
|----|------|
| **Windows** | `%APPDATA%\JetBrains\<product><version>\copilot\global-copilot-instructions.md` |
| **macOS** | `~/Library/Application Support/JetBrains/<product><version>/copilot/global-copilot-instructions.md` |
| **Linux** | `~/.config/JetBrains/<product><version>/copilot/global-copilot-instructions.md` |

*Replace `<product><version>` with your IDE (e.g., `IntelliJIdea2024.3`, `PyCharm2024.3`).*

## Differences from VS Code

- JetBrains does **not** support `.agent.md` files (custom agents)
- JetBrains does **not** support MCP server configuration
- Path-specific `.instructions.md` files work the same as VS Code
- Prompt files use `/promptName` syntax (same as VS Code)

---
