---
title: "Navbars Navigation Workflow"
description: "Comprehensive guide to Quarto navigation systems, automated navigation.json generation, and deployment workflows"
author: "Dario Airoldi"
date: "2025-01-16"
date-modified: last-modified
categories: [quarto, navigation, workflow, deployment, automation]
format:
  html:
    toc: true
    toc-depth: 3
    number-sections: true
    anchor-sections: true
    smooth-scroll: true
    code-copy: true
    code-fold: show
    highlight-style: github
keywords:
  - quarto
  - navigation
  - navbar
  - sidebar
  - automation
  - workflow
  - deployment
  - github-pages
abstract: |
  A complete guide to implementing and managing navigation workflows in Quarto sites. This document covers navigation architecture, automated navigation.json generation, navbar and sidebar configuration, related pages implementation, development workflows, file management strategies, and troubleshooting guides. Essential for building scalable and maintainable Quarto documentation sites.
---

## ğŸ“‹ Table of Contents

- [ğŸ“– Overview](#-overview)
- [ğŸ—ï¸ Navigation Architecture](#ï¸-navigation-architecture)
- [âš¡ Automated Navigation.json Generation](#-automated-navigationjson-generation)
- [ğŸ§­ Navbar Configuration](#-navbar-configuration)
- [ğŸ“‚ Sidebar Navigation](#-sidebar-navigation)
- [ğŸ”— Related Pages Implementation](#-related-pages-implementation)
- [ğŸ› ï¸ Development Workflows](#ï¸-development-workflows)
- [ğŸ“ File Management Strategy](#-file-management-strategy)
- [ğŸ”§ Troubleshooting Guide](#-troubleshooting-guide)
- [âš¡ Performance Optimization](#-performance-optimization)
- [ğŸš€ Advanced Configuration](#-advanced-configuration)

## ğŸ“– Overview

This document covers the complete navigation workflow for Quarto sites, including automated navigation generation, Related Pages functionality, and integration with GitHub Pages deployment.

## ğŸ—ï¸ Navigation Architecture

### Components Overview

```
Quarto Navigation System
â”œâ”€â”€ _quarto.yml                    # Source configuration
â”œâ”€â”€ navigation.json                # Generated navigation data  
â”œâ”€â”€ GitHub Pages                   # Deployed site
â”‚   â”œâ”€â”€ Left Sidebar              # Main navigation
â”‚   â”œâ”€â”€ Top Navbar                # Site-wide navigation
â”‚   â””â”€â”€ Right Margin              # Related Pages (custom)
â””â”€â”€ Build Process
    â”œâ”€â”€ Pre-render hooks          # Data generation
    â”œâ”€â”€ GitHub Actions            # Automated deployment
    â””â”€â”€ Client-side JavaScript    # Dynamic features
```

### Navigation Data Flow

1. **Configuration** ? `_quarto.yml` defines site structure
2. **Generation** ? `scripts/generate-navigation.ps1` creates `navigation.json`
3. **Build** ? Quarto renders HTML with navigation structure
4. **Enhancement** ? Client-side JavaScript adds Related Pages
5. **Deployment** ? GitHub Pages serves complete navigation

## âš¡ Automated Navigation.json Generation

### How It Works

The `navigation.json` file powers the Related Pages functionality and is automatically generated from `_quarto.yml`:

- **When**: Only when `navigation.json` is missing or older than `_quarto.yml`
- **Where**: Generated by `scripts/generate-navigation.ps1`
- **Trigger**: Pre-render hook in `_quarto.yml`

### Smart Generation Process

```powershell
# Timestamp-based intelligent regeneration
if ($quartoModified -gt $navModified) {
    Write-Host "navigation.json is older than _quarto.yml - will regenerate"
    $shouldGenerate = $true
} else {
    Write-Host "navigation.json is up to date - skipping generation"
    $shouldGenerate = $false
}
```

### Technical Implementation

**yq Command Used:**
```bash
yq eval '.website.sidebar.contents' _quarto.yml --output-format=json
```

**PowerShell Processing:**
```powershell
# Extract content and wrap in navigation structure
$extractedContent = & $yqExecutable eval '.website.sidebar.contents' $quartoFile --output-format=json
$navigationStructure = @{
    contents = $extractedContent | ConvertFrom-Json
}
$navigationStructure | ConvertTo-Json -Depth 20 | Out-File -FilePath $navFile
```

## ğŸ§­ Navbar Configuration

### Top-Level Navigation

The navbar provides site-wide navigation and branding:

```yaml
website:
  navbar:
    background: primary
    search: true
    title: "Learning Hub"
    left:
      - icon: house-fill
        href: index.qmd
        text: "Home"
      - text: "Events"
        menu:
          - href: "202506-build-2025/readme.md"
            text: "Build 2025: Conference Overview"
    right:
      - icon: github
        href: "https://github.com/darioairoldi/Learn"
        aria-label: "GitHub Repository"
```

**Key Features:**

- **Responsive design**: Collapses to hamburger menu on mobile
- **Search integration**: Built-in site search functionality
- **Menu dropdowns**: Hierarchical navigation structure
- **Icon support**: Font Awesome and custom icons
- **External links**: Direct links to repositories and resources

## ğŸ“‚ Sidebar Navigation

### Structure and Behavior

The sidebar provides detailed site navigation with collapsible sections:

```yaml
website:
  sidebar:
    style: "floating"      # or "docked"
    search: true
    collapse-level: 3
    contents:
      - href: index.qmd
        text: "Home"
        icon: house-fill
      - section: "Events"
        icon: calendar-event
        contents:
          # Nested navigation structure
```

**Advanced Features:**

- **Floating vs Docked**: Different visual styles
- **Collapse levels**: Control automatic section expansion
- **Search integration**: Filter navigation items
- **Icons**: Visual indicators for sections
- **Active state tracking**: Highlights current page

### Dynamic Navigation Updates

The sidebar responds to page changes and user interaction:

```javascript
// Listen for sidebar navigation clicks
document.addEventListener('click', function(event) {
    const sidebarItem = event.target.closest('.sidebar-item-text, .nav-link');
    if (sidebarItem && sidebarItem.closest('#quarto-sidebar')) {
        // Update Related Pages based on new selection
        setTimeout(renderRightNav, 100);
    }
});
```

## ğŸ”— Related Pages Implementation

### Architecture Overview

The Related Pages feature extends Quarto's native navigation with intelligent content discovery:

**File Structure:**
```
??? _includes/right-nav.html              # Related Pages widget
??? scripts/generate-navigation.ps1       # Data generator
??? navigation.json                       # Navigation structure
??? _quarto.yml                          # Integration configuration
```

### Client-Side Intelligence

**Page Context Detection:**
```javascript
function getCurrentPagePath() {
    let path = window.location.pathname;
    // Normalize path for GitHub Pages
    if (path.startsWith('Learn/')) {
        path = path.substring(5);
    }
    return path.replace('.html', '').replace(/^\//, '');
}
```

**Navigation Logic:**

- **Section pages**: Show first-level children (subsections)
- **Leaf pages**: Show all siblings including current page
- **Active highlighting**: Mark current page in Related Pages

### Integration Points

**Quarto Configuration:**
```yaml
format:
  html:
    include-after-body: 
      - _includes/right-nav.html
    grid:
      margin-width: 280px    # Space for Related Pages
```

**Responsive Behavior:**
```css
@media (max-width: 800px) {
    #custom-right-nav {
        display: none; /* Hide on mobile */
    }
}
```

## ğŸ› ï¸ Development Workflows

### Local Development Options

**Option 1: Development Script**
```bash
./dev-serve.bat
```

**Option 2: Manual Commands**
```powershell
# Generate navigation.json (if needed)
powershell -ExecutionPolicy Bypass -File scripts/generate-navigation.ps1
# Start Quarto preview
quarto preview
```

**Option 3: Standard Quarto (with pre-render hook)**
```bash
quarto render    # Automatically runs pre-render hook
quarto preview   # Live development server
```

### GitHub Pages Deployment

**Pre-render Integration:**
```yaml
project:
  pre-render: 
    - powershell -ExecutionPolicy Bypass -File scripts/generate-navigation.ps1
```

**Workflow Integration:**
The GitHub Actions workflow handles:
1. **Environment setup**: Quarto installation
2. **Pre-render execution**: Navigation generation
3. **Site building**: HTML generation
4. **Deployment**: GitHub Pages publishing

## ğŸ“ File Management Strategy

### Versioning Strategy

| File | Purpose | Versioned | Reason |
|------|---------|-----------|---------|
| **navigation.json** | Navigation data | ? Yes | Ensures consistency across environments |
| **scripts/generate-navigation.ps1** | Generator script | ? Yes | Source code for automation |
| **yq.exe** | YAML processor | ? No | Auto-downloaded dependency |

### Render Configuration

**Comprehensive File Inclusion:**
```yaml
render:
  - "*.qmd"           # Quarto documents
  - "*.md"            # Markdown files
  - "*/README.md"     # Directory documentation
  - "**/README.md"    # Recursive documentation
  - "**/SUMMARY.md"   # Summary files
  - "**/*.md"         # All markdown files
```

This ensures all referenced files in navigation are properly rendered and available.

## ğŸ”§ Troubleshooting Guide

### Common Issues and Solutions

**404 Errors on Navigation Links:**

- ? **Check render configuration**: Ensure files are included in render list
- ? **Verify file existence**: Confirm source files exist
- ? **Case sensitivity**: GitHub Pages is case-sensitive
- ? **URL encoding**: Special characters need proper encoding

**Navigation Generation Failures:**
```powershell
# Manual testing
powershell -ExecutionPolicy Bypass -File scripts/generate-navigation.ps1

# Check yq availability
.\yq.exe --version

# Verify _quarto.yml syntax
yq eval '.' _quarto.yml
```

**GitHub Actions Issues:**

- ? **Pre-render hook syntax**: Use full PowerShell command
- ? **File permissions**: Ensure scripts are executable
- ? **Path handling**: Use correct file paths for cross-platform compatibility

### Debugging Client-Side Issues

**Console Debugging:**
```javascript
// Enable verbose logging
console.log('?? Current page path:', getCurrentPagePath());
console.log('?? Navigation config loaded:', navigationConfig);
console.log('?? Found siblings:', siblings);
```

**Network Debugging:**

- Check navigation.json loads correctly in browser
- Verify file is deployed to GitHub Pages
- Confirm JSON structure is valid

## âš¡ Performance Optimization

### Build Performance

- **Smart regeneration**: Only rebuild navigation.json when needed
- **Timestamp checking**: Avoid unnecessary work
- **Cached dependencies**: yq.exe downloaded once per environment

### Runtime Performance

- **Lazy loading**: Related Pages loads after main content
- **Event delegation**: Efficient navigation event handling
- **Responsive design**: Mobile optimization reduces complexity

### SEO and Accessibility

**Navigation Structure:**

- **Semantic HTML**: Proper navigation landmarks
- **ARIA labels**: Accessibility-friendly navigation
- **SEO-friendly URLs**: Clean, descriptive paths
- **Sitemap generation**: Automatic via Quarto

## ğŸš€ Advanced Configuration

### Custom Navigation Patterns

**Conditional Navigation:**
```yaml
sidebar:
  contents:
    - text: "---"        # Separator
    - section: "Advanced"
      contents:
        - href: advanced/topic1.md
          text: "Topic 1"
      collapse: true       # Start collapsed
```

**Dynamic Menu Generation:**
The Related Pages system can be extended for:

- **Tag-based navigation**: Show related content by tags
- **Category filtering**: Filter by content categories
- **Search integration**: Connect with site search
- **Breadcrumb generation**: Show navigation path

### Integration with External Systems

**API Integration:**
```javascript
// Example: Load dynamic navigation from CMS
async function loadDynamicNavigation() {
    const response = await fetch('/api/navigation');
    const dynamicNav = await response.json();
    renderDynamicNavigation(dynamicNav);
}
```

This comprehensive navigation workflow ensures a seamless user experience while providing developers with powerful tools for customization and automation.

---

## ğŸ“š References

### Official Documentation

**[Quarto Website Navigation](https://quarto.org/docs/websites/website-navigation.html)** `[ğŸ“˜ Official]`  
Official Quarto documentation for website navigation including sidebar, navbar, and breadcrumb configuration. The authoritative reference for all navigation features and configuration options. Essential reading when setting up site navigation.

**[yq Documentation](https://mikefarah.gitbook.io/yq/)** `[ğŸ“˜ Official]`  
Official documentation for yq, the YAML processor used to generate navigation.json from _quarto.yml. Understanding yq is essential for customizing the navigation generation script. Reference when modifying the generation workflow.

**[GitHub Pages Documentation](https://docs.github.com/en/pages)** `[ğŸ“˜ Official]`  
GitHub's official documentation for Pages deployment. Reference when setting up automated deployment workflows or troubleshooting deployment issues.

### Related Articles in This Series

**[How Quarto Sidebar Works](06.01-sidebar-layout.md)** `[ğŸ“˜ Official]`  
Detailed guide to Quarto's sidebar layout architecture. Understanding sidebar structure is essential background for implementing navigation features. Reference when customizing sidebar behavior.

**[Sidebar Transition Optimization](06.03-transition-optimization.md)** `[ğŸ“˜ Official]`  
Performance optimization guide for sidebar state restoration. Reference when implementing performance improvements or diagnosing navigation performance issues.

**[Quarto.yml Structure](03.01-quarto-yml-structure.md)** `[ğŸ“˜ Official]`  
Complete reference for _quarto.yml configuration including navigation settings. Reference when configuring site structure and navigation.

### Community Resources

**[PowerShell Scripting Best Practices](https://docs.microsoft.com/en-us/powershell/scripting/developer/cmdlet/cmdlet-development-guidelines)** `[ğŸ“— Verified Community]`  
Microsoft's guide to PowerShell development best practices. Reference when customizing the navigation generation script or creating new automation scripts.

---

<!-- 
---
article_metadata:
  filename: "06-navigation-workflow.md"
  word_count: 3000
  created_date: "2025-01-16"
  last_updated: "2025-12-26T00:00:00Z"
  
cross_references:
  series:
    name: "Quarto Documentation Guide"
    part: 9
    total_parts: 14
    previous: "06-sidebar-layout.md"
    next: "06-transition-optimization.md"
  related_articles:
    - "06-sidebar-layout.md"
    - "03-quarto-yml-structure.md"
    - "02-split-navigation-build.md"
  prerequisites:
    - "01-introduction-to-quarto.md"
    - "03-quarto-yml-structure.md"

validations:
  series_validation:
    last_run: "2025-12-26T00:00:00Z"
    model: "claude-sonnet-4.5"
    series_name: "Quarto Documentation Guide"
    article_position: 9
    total_articles: 14
    consistency_score: 9
    completeness_score: 10
    redundancy_score: 10
    issues_found: 0
    issues_critical: 0
    issues_medium: 0
    issues_low: 0
    notes: "Complete navigation workflow guide with implementation details and automation scripts"
---
-->