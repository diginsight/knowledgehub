<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>azure-cosmosdb-access-options ‚Äì Diginsight Team Knowledge Journey</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/02-cosmosdb-partitioning-strategies.html" rel="next">
<link href="../../../03.00-tech/03.01-data/01-table-storage-access-options/readme.html" rel="prev">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-3a62b57c7ce0f47a491e97fb1cd0ccc4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Knowledge Hub</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../../README.html" aria-current="page"> <i class="bi bi-house-fill" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-news" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">News</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-news">    
        <li class="dropdown-header">Latest Updates</li>
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20260130-6-advanced-rules-for-production-copilot-agents/summary.html">
 <span class="dropdown-text">6 Advanced Rules for Copilot Agents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20260124-copilotstudio-sdk/github-copilot-sdk-building-agents-for-any-application.html">
 <span class="dropdown-text">GitHub Copilot SDK - Building Agents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20260111-6-vital-rules-for-production-ready-copilot-agents/summary.html">
 <span class="dropdown-text">6 VITAL Rules for Copilot Agents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20251224-vscode-v1.107-release/01-summary.html">
 <span class="dropdown-text">VS Code v1.107 Release Summary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20251224-vscode-v1.107-release/02-readme.sonnet4.html">
 <span class="dropdown-text">VS Code v1.107 Release Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-events" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Events</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-events">    
        <li class="dropdown-header">No events currently available</li>
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Event content coming soon‚Ä¶</li>
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-architectures" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Architectures</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-architectures">    
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/01-podcast-and-rss-feed-information-gathering-and-analysis.html">
 <span class="dropdown-text">Podcast and RSS Feed Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/02-analyzing-atom-and-rss-specifications.html">
 <span class="dropdown-text">Analyzing Atom and RSS Specifications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/03-additional-metadata-for-rss-and-atom-feeds.html">
 <span class="dropdown-text">Additional Metadata for RSS and Atom Feeds</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/04-c#-reference-classes-for-reading-feeds.html">
 <span class="dropdown-text">C# Reference Classes for Reading Feeds</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-azure" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Azure</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-azure">    
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/02.01-azure/00-azure-naming-conventions/readme.html">
 <span class="dropdown-text">Azure Best Practices</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Security &amp; Identity</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/01-external-users-authentication-in-azure-ad-explained.html">
 <span class="dropdown-text">Azure AD External Users Explained</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/02-external-users-types-and-invitation-process.html">
 <span class="dropdown-text">External Users Types &amp; Invitation</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Data Services</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/01-table-storage-access-options/readme.html">
 <span class="dropdown-text">Table Storage Access</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/01-blob-storage-access-options.html">
 <span class="dropdown-text">Blob Storage Access Options</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/02-blob-storage-limitations.html">
 <span class="dropdown-text">Blob Storage Limitations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html">
 <span class="dropdown-text">CosmosDB Access</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-markdown--docs" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Markdown &amp; Docs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-markdown--docs">    
        <li class="dropdown-header">Quarto Documentation</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/01.01-introduction-to-quarto.html">
 <span class="dropdown-text">Using Quarto (Overview)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/01.02-how-quarto-works.html">
 <span class="dropdown-text">Quarto Architecture: How It Works</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/02.01-monolithic-vs-modular-deployment.html">
 <span class="dropdown-text">Quarto: Monolithic vs.&nbsp;Modular Deployment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/02.02-split-navigation-build.html">
 <span class="dropdown-text">Quarto: Split Navigation Build</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/03.01-quarto-yml-structure.html">
 <span class="dropdown-text">Quarto.yml Document Structure</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/05.01-theming-and-styling.html">
 <span class="dropdown-text">Quarto Theming and Styling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/04.01-markdown-features.html">
 <span class="dropdown-text">Quarto-Specific Markdown Features</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/07.01-build-optimization.html">
 <span class="dropdown-text">Optimizing Quarto Build &amp; Deploy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/06.01-sidebar-layout.html">
 <span class="dropdown-text">How Quarto Sidebar Works</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/06.02-navigation-workflow.html">
 <span class="dropdown-text">Quarto Navigation Workflow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/06.03-transition-optimization.html">
 <span class="dropdown-text">Sidebar Page Transition Optimization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/08.01-troubleshooting-guide.html">
 <span class="dropdown-text">Troubleshooting Quarto Sites</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/09.01-github-pages-deployment.html">
 <span class="dropdown-text">Deploying Quarto to GitHub Pages</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/09.02-azure-storage-deployment.html">
 <span class="dropdown-text">Deploying Quarto to Azure Storage</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.html">
 <span class="dropdown-text">Customizing with Lua Filters</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">MkDocs Documentation</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/02-mkdocs/000.000-using-mkdocs.html">
 <span class="dropdown-text">Using MkDocs (Overview)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.001-architecture-how-mkdocs-works.html">
 <span class="dropdown-text">MkDocs Architecture: How It Works</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.002-architecture-monolithic-vs.-modular-deployment.html">
 <span class="dropdown-text">MkDocs: Monolithic vs.&nbsp;Modular Deployment</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Hugo Documentation</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/readme.html">
 <span class="dropdown-text">Hugo Series Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.01-introduction-to-hugo.html">
 <span class="dropdown-text">Introduction to Hugo</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.02-hugo-core-concepts.html">
 <span class="dropdown-text">Hugo Core Concepts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.03-goldmark-markdown-processing.html">
 <span class="dropdown-text">Goldmark Markdown Processing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.04-hugo-vs-quarto.html">
 <span class="dropdown-text">Hugo vs Quarto Comparison</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/05.03-rendering-learning-hub-with-hugo.html">
 <span class="dropdown-text">Rendering Learning Hub with Hugo</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-technologies" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Technologies</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-technologies">    
        <li class="dropdown-header">GitHub &amp; Version Control</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.01-github/01.01-cli/20250709-manage-gitrepo-from-commandline/readme.html">
 <span class="dropdown-text">Git Command Line</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.01-github/01.01-cli/20250118-github-cli/cli-commands-for-github.html">
 <span class="dropdown-text">GitHub CLI Commands</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Prompt Engineering</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/03.00-how_to_structure_content_for_copilot_prompt_files.html">
 <span class="dropdown-text">Structuring Prompt Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/04.00-how_to_structure_content_for_copilot_agent_files.html">
 <span class="dropdown-text">Structuring Agent Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/05.00-how_to_structure_content_for_copilot_instruction_files.html">
 <span class="dropdown-text">Structuring Instruction Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/06.00-how_to_structure_content_for_copilot_skills.html">
 <span class="dropdown-text">Structuring Skill Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/07.00-how_to_create_mcp_servers_for_copilot.html">
 <span class="dropdown-text">Creating MCP Servers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/08.00-how_to_optimize_prompts_for_specific_models.html">
 <span class="dropdown-text">Optimizing Prompts for Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/09.00-how_to_manage_information_flow_during_prompt_orchestrations.html">
 <span class="dropdown-text">Managing Information Flow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/20-how_to_create_a_prompt_interacting_with_agents.html">
 <span class="dropdown-text">Prompt Orchestrations with Agents</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Technical Writing</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/40.00-technical-writing/00-foundations-of-technical-documentation.html">
 <span class="dropdown-text">Foundations of Technical Docs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/00-microsoft-style-guide-overview.html">
 <span class="dropdown-text">Microsoft Style Guide</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">API Testing &amp; Tools</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/00-http-rest-api-testing-tools-comprehensive-comparison.html">
 <span class="dropdown-text">HTTP/REST API Testing Comparison</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/readme.html">
 <span class="dropdown-text">Using .http Files (VSCode)</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Programming &amp; Hardware</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/readme.html">
 <span class="dropdown-text">yq YAML Processor</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/60.01-hardware/surface-laptop-6-features-analysis.html">
 <span class="dropdown-text">Surface Laptop 6</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-how-to-guides" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">How-To Guides</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-how-to-guides">    
        <li>
    <a class="dropdown-item" href="../../../04.00-howto/20251108-howto-configure-promot-files-for-markdown-preview-in-visual-studio.html">
 <span class="dropdown-text">Configure .prompt Files in VS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../04.00-howto/20251013-howto-expose-my-computer-with-no-ip-ddns/howto.expose-my-computer-with-no-ip-ddns.html">
 <span class="dropdown-text">No-IP DDNS Setup</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ideas--projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ideas &amp; Projects</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ideas--projects">    
        <li>
    <a class="dropdown-item" href="../../../06.00-idea/learning-hub/01-learning-hub-overview/01-learning-hub-introduction.html">
 <span class="dropdown-text">Knowledge Hub Overview</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../../#"> <i class="bi bi-bell-fill" role="img" aria-label="Intelligent Notifications">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../#"> <i class="bi bi-rss" role="img" aria-label="Intelligent Feeds">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../#"> <i class="bi bi-sliders" role="img" aria-label="Intelligent Rules">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/darioairoldi/Learn"> <i class="bi bi-github" role="img" aria-label="GitHub Repository">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Technologies</li><li class="breadcrumb-item">Data</li><li class="breadcrumb-item"><a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html">02 Cosmosdb Access Options</a></li><li class="breadcrumb-item"><a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html">üåê Azure CosmosDB Access Options (with C#)</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../README.html" class="sidebar-item-text sidebar-link"><i class="bi bi-house-fill" role="img">
</i> 
 <span class="menu-text">Home</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/01-learning-hub-overview/01-learning-hub-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning Hub &amp; Knowledge Hub Concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/01-learning-hub-overview/02-using-learning-hub-for-learning-technologies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Learning Hub for Learning Technologies</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true"><i class="bi bi-newspaper" role="img">
</i> 
 <span class="menu-text">News &amp; Updates</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20260130-6-advanced-rules-for-production-copilot-agents/summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">20260130 - 6 Advanced Rules For Production Copilot Agents</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20260124-copilotstudio-sdk/github-copilot-sdk-building-agents-for-any-application.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">20260124 - GitHub Copilot SDK Building Agents</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20260111-6-vital-rules-for-production-ready-copilot-agents/summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">20260111 - 6 Vital Rules For Production Ready Copilot Agents</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">20251224 VS Code v1.107 Release</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20251224-vscode-v1.107-release/01-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20251224-vscode-v1.107-release/02-readme.sonnet4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true"><i class="bi bi-calendar-event" role="img">
</i> 
 <span class="menu-text">Events</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">No events currently available</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true"><i class="bi bi-cpu" role="img">
</i> 
 <span class="menu-text">Technologies</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true"><i class="bi bi-shield-lock" role="img">
</i> 
 <span class="menu-text">Authentication</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">20251102 Authenticating External Users in Azure Ad</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/01-external-users-authentication-in-azure-ad-explained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External Users Authentication in Azure AD Explained</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/02-external-users-types-and-invitation-process.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External User Types and Invitation Process in Azure AD/Entra ID</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true"><i class="bi bi-cloud" role="img">
</i> 
 <span class="menu-text">Azure</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/02.01-azure/00-azure-naming-conventions/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Azure Naming Conventions</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true"><i class="bi bi-database" role="img">
</i> 
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">01 Table Storage Access Options</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/01-table-storage-access-options/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Azure Table Storage Access with C#</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true">
 <span class="menu-text">02 Cosmosdb Access Options</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">üåê Azure CosmosDB Access Options (with C#)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/02-cosmosdb-partitioning-strategies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üéØ CosmosDB Partitioning Strategies</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false">
 <span class="menu-text">03 Blob Storage Access Options</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/01-blob-storage-access-options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Azure Blob Storage Access Approaches with C#</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/02-blob-storage-limitations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">‚ö†Ô∏è Azure Blob Storage Limitations</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true"><i class="bi bi-code-slash" role="img">
</i> 
 <span class="menu-text">Programming Languages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false">
 <span class="menu-text">20250827 What Is Yq Overview</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/appendix-advanced-techniques.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix B: Advanced YAML to JSON Conversion Techniques</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/appendix-yq-tool.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix A: The yq Tool - Complete Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Convert YAML to JSON - Complete Guide</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">GitHub</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="false">
 <span class="menu-text">01 Repositories</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="false">
 <span class="menu-text">20250825 Github Repositories Limitations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/01-repositories/20250825-github-repositories-limitations/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overcoming GitHub Repository Limitations</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" role="navigation" aria-expanded="false">
 <span class="menu-text">01.01 Cli</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-17" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" role="navigation" aria-expanded="false">
 <span class="menu-text">20250118 Github Cli</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-18" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/01.01-cli/20250118-github-cli/cli-commands-for-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üöÄ CLI Commands to Interact with GitHub Repositories</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" role="navigation" aria-expanded="false">
 <span class="menu-text">20250709 Manage Gitrepo from Commandline</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-19" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/01.01-cli/20250709-manage-gitrepo-from-commandline/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HowTo: Manage your Git repo from the command line</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" role="navigation" aria-expanded="false">
 <span class="menu-text">02 Actions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-20" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" role="navigation" aria-expanded="false">
 <span class="menu-text">20251018 Issue Github Action Fails with Artifact Storage Quota Has Been Hit</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-21" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/01-readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ISSUE: Github action fails with ‚ÄòArtifact storage quota has been hit‚Äô</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/02-quickstart.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Start Guide - Fixing Artifact Storage Quota Issue</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/03-solution_summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary - GitHub Actions Artifact Storage Quota Issue</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/05-final_solution_no_artifacts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FINAL SOLUTION: No Artifacts Approach</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/99-wsl_error_fix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">WSL Error Fix - Updated Solution</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" role="navigation" aria-expanded="true"><i class="bi bi-chat-dots" role="img">
</i> 
 <span class="menu-text">Prompt Engineering</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-22" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/02.00-how_to_name_and_organize_prompt_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Name and Organize Prompt Files in Your GitHub Repository</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/03.00-how_to_structure_content_for_copilot_prompt_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Prompt Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/04.00-how_to_structure_content_for_copilot_agent_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Agent Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/05.00-how_to_structure_content_for_copilot_instruction_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Instruction Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/06.00-how_to_structure_content_for_copilot_skills.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Skills</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/07.00-how_to_create_mcp_servers_for_copilot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Create MCP Servers for GitHub Copilot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.00-how_to_optimize_prompts_for_specific_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Optimize Prompts for Specific Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.01-appendix_openai_prompting_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 01: OpenAI Models Prompting Guide Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.02-appendix_anthropic_prompting_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 02: Anthropic Claude Prompting Guide Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.03-appendix_google_prompting_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 03: Google Gemini Prompting Guide Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/09.00-how_to_manage_information_flow_during_prompt_orchestrations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Manage Information Flow During Prompt Orchestrations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/10.00-how_to_optimize_token_consumption_during_prompt_orchestrations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Optimize Token Consumption During Prompt Orchestrations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/20-how_to_create_a_prompt_interacting_with_agents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Create a Prompt Orchestrating Multiple Agents</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/21.1-example_prompt_interacting_with_agents_plan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multi-Agent Orchestration Plan V2 for Prompt and Agent File Creation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/22-prompts-and-markdown-structure-for-a-documentation-site.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prompts and Markdown Structure for a Documentation Site</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" role="navigation" aria-expanded="false">
 <span class="menu-text">02 Getting Started</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-23" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/02-getting-started/01.00-how_github_copilot_uses_markdown_and_prompt_folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How GitHub Copilot Uses Markdown and Prompt Folders within Your Repo</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" role="navigation" aria-expanded="true"><i class="bi bi-plug" role="img">
</i> 
 <span class="menu-text">HTTP Client</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-24" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" role="navigation" aria-expanded="false">
 <span class="menu-text">20250711 Use Http Files for Easy and Repeatable Test</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-25" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250711-use-http-files-for-easy-and-repeatable-test/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readme</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-26" role="navigation" aria-expanded="false">
 <span class="menu-text">20250713 Use Http Files for Easy and Repeatable Test</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-26" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-26" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/00-http-rest-api-testing-tools-comprehensive-comparison.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üîç HTTP/REST API Testing Tools - Comprehensive Comparison</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/02-using-http-files-for-api-testing-(visual-studio).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using HTTP Files for API Testing (Visual Studio)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readme</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-27" role="navigation" aria-expanded="true"><i class="bi bi-book" role="img">
</i> 
 <span class="menu-text">Markdown Compilers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-27" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-27" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-28" role="navigation" aria-expanded="false"><i class="bi bi-file-richtext" role="img">
</i> 
 <span class="menu-text">Quarto</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-28" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-28" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/01.01-introduction-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/01.02-how-quarto-works.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How Quarto Works</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/02.01-monolithic-vs-modular-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Monolithic vs.&nbsp;Modular Deployment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/02.02-split-navigation-build.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Split Navigation Build from Content Rendering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/03.01-quarto-yml-structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">_quarto.yml Document Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/04.01-markdown-features.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto-Specific Markdown Features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/05.01-theming-and-styling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto Theming and Styling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/06.01-sidebar-layout.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How does quarto site layout works</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/06.02-navigation-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Navbars Navigation Workflow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/06.03-transition-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sidebar Page Transition Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/07.01-build-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimizing Quarto Build and Deploy Performance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/08.01-troubleshooting-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Troubleshooting Quarto Sites</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/09.01-github-pages-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deploying a Quarto Site to GitHub Pages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/09.02-azure-storage-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deploying a Quarto Site to Azure Storage Accounts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Customizing Markdown Rendering with Lua Filters</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto Documentation Series</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-29" role="navigation" aria-expanded="false"><i class="bi bi-book-half" role="img">
</i> 
 <span class="menu-text">MkDocs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-29" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-29" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/02-mkdocs/000.000-using-mkdocs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using MkDocs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.001-architecture-how-mkdocs-works.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MkDocs Architecture - How MkDocs Works</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.002-architecture-monolithic-vs.-modular-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MkDocs Architecture - Monolithic vs.&nbsp;Modular Deployment</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-30" role="navigation" aria-expanded="false"><i class="bi bi-lightning-charge" role="img">
</i> 
 <span class="menu-text">Hugo</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-30" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-30" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.01-introduction-to-hugo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Hugo Static Site Generator</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.02-hugo-core-concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hugo Core Concepts: Content Organization and Management</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.03-goldmark-markdown-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Goldmark Markdown Processing in Hugo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.04-hugo-vs-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hugo vs Quarto: Comprehensive Comparison for Learning Hub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/05.03-rendering-learning-hub-with-hugo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rendering Learning Hub with Hugo: Practical Implementation Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hugo Static Site Generator Series</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-31" role="navigation" aria-expanded="true"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text">Feed Architectures &amp; Protocols</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-31" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-31" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-32" role="navigation" aria-expanded="false">
 <span class="menu-text">20251005 Feeds Architectures and Protocols</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-32" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-32" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/01-podcast-and-rss-feed-information-gathering-and-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Podcast and RSS Feed: Information Gathering and Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/02-analyzing-atom-and-rss-specifications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analyzing Atom and RSS Specifications</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/03-additional-metadata-for-rss-and-atom-feeds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Metadata for RSS and Atom Feeds</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/04-c#-reference-classes-for-reading-feeds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">C# Reference Classes for Reading RSS and Atom Feeds</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-33" role="navigation" aria-expanded="true"><i class="bi bi-cpu-fill" role="img">
</i> 
 <span class="menu-text">Hardware</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-33" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-33" class="collapse list-unstyled sidebar-section depth2 show">  
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-34" role="navigation" aria-expanded="true"><i class="bi bi-pencil-square" role="img">
</i> 
 <span class="menu-text">Technical Writing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-34" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-34" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/00-foundations-of-technical-documentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations &amp; Principles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/01-writing-style-and-voice-principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing Style &amp; Voice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/02-structure-and-information-architecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structure &amp; Architecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/03-accessibility-in-technical-writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accessibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/04-code-documentation-excellence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code Documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/05-validation-and-quality-assurance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Validation &amp; QA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/06-citations-and-reference-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Citations &amp; References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/07-ai-enhanced-documentation-writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AI-Enhanced Writing</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-35" role="navigation" aria-expanded="false"><i class="bi bi-microsoft" role="img">
</i> 
 <span class="menu-text">microsoft-writing-style-guide</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-35" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-35" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/00-microsoft-style-guide-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview &amp; Philosophy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/01-microsoft-voice-and-tone.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Voice &amp; Tone</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/02-microsoft-mechanics-and-formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mechanics &amp; Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/03-microsoft-compared-to-other-guides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comparative Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/04-microsoft-style-principles-reference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles Reference (YAML/JSON)</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-36" role="navigation" aria-expanded="true"><i class="bi bi-tools" role="img">
</i> 
 <span class="menu-text">How-To Guides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-36" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-36" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../04.00-howto/20251108-howto-configure-promot-files-for-markdown-preview-in-visual-studio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HowTo: Configure .prompt Files for Markdown Preview in Visual Studio</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-37" role="navigation" aria-expanded="true">
 <span class="menu-text">20251013 Howto Expose My Computer with No Ip Ddns</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-37" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-37" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../04.00-howto/20251013-howto-expose-my-computer-with-no-ip-ddns/howto.expose-my-computer-with-no-ip-ddns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üåê HowTo: Expose My Computer with No-IP DDNS</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-38" role="navigation" aria-expanded="true"><i class="bi bi-lightbulb" role="img">
</i> 
 <span class="menu-text">Ideas &amp; Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-38" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-38" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-39" role="navigation" aria-expanded="true"><i class="bi bi-book-half" role="img">
</i> 
 <span class="menu-text">Knowledge Hub</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-39" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-39" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-40" role="navigation" aria-expanded="false">
 <span class="menu-text">01 Learning Hub Overview</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-40" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-40" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/01-learning-hub-overview/01-learning-hub-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning Hub &amp; Knowledge Hub Concepts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/01-learning-hub-overview/02-using-learning-hub-for-learning-technologies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Learning Hub for Learning Technologies</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-41" role="navigation" aria-expanded="false">
 <span class="menu-text">02 Documentation Taxonomy</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-41" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-41" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/02-documentation-taxonomy/01-learning-hub-documentation-taxonomy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning Hub &amp; Knowledge Hub Documentation Taxonomy</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#azure-cosmosdb-access-options-with-c" id="toc-azure-cosmosdb-access-options-with-c" class="nav-link active" data-scroll-target="#azure-cosmosdb-access-options-with-c">üåê Azure CosmosDB Access Options (with C#)</a>
  <ul class="collapse">
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">üìã Overview</a></li>
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link" data-scroll-target="#table-of-contents">üìö Table of Contents</a></li>
  <li><a href="#available-approaches" id="toc-available-approaches" class="nav-link" data-scroll-target="#available-approaches">üîß Available Approaches</a>
  <ul class="collapse">
  <li><a href="#sql-api-core" id="toc-sql-api-core" class="nav-link" data-scroll-target="#sql-api-core">1. <strong>SQL API (Core)</strong></a></li>
  <li><a href="#mongodb-api" id="toc-mongodb-api" class="nav-link" data-scroll-target="#mongodb-api">2. <strong>MongoDB API</strong></a></li>
  <li><a href="#other-apis" id="toc-other-apis" class="nav-link" data-scroll-target="#other-apis">3. <strong>Other APIs</strong></a></li>
  </ul></li>
  <li><a href="#key-libraries" id="toc-key-libraries" class="nav-link" data-scroll-target="#key-libraries">üì¶ Key Libraries</a>
  <ul class="collapse">
  <li><a href="#primary-library" id="toc-primary-library" class="nav-link" data-scroll-target="#primary-library">Primary Library</a></li>
  <li><a href="#deprecated-libraries-do-not-use" id="toc-deprecated-libraries-do-not-use" class="nav-link" data-scroll-target="#deprecated-libraries-do-not-use"><strong>Deprecated Libraries ‚ö†Ô∏è (Do Not Use)</strong></a></li>
  <li><a href="#supporting-libraries-optional" id="toc-supporting-libraries-optional" class="nav-link" data-scroll-target="#supporting-libraries-optional">Supporting Libraries (Optional)</a></li>
  </ul></li>
  <li><a href="#basic-operations" id="toc-basic-operations" class="nav-link" data-scroll-target="#basic-operations">‚ö° Basic Operations</a>
  <ul class="collapse">
  <li><a href="#setting-up-a-cosmos-client" id="toc-setting-up-a-cosmos-client" class="nav-link" data-scroll-target="#setting-up-a-cosmos-client">Setting Up a Cosmos Client</a></li>
  <li><a href="#managing-databases-and-containers" id="toc-managing-databases-and-containers" class="nav-link" data-scroll-target="#managing-databases-and-containers">Managing Databases and Containers</a></li>
  <li><a href="#working-with-items" id="toc-working-with-items" class="nav-link" data-scroll-target="#working-with-items">Working with Items</a></li>
  </ul></li>
  <li><a href="#crud-operations" id="toc-crud-operations" class="nav-link" data-scroll-target="#crud-operations">üîÑ CRUD Operations</a>
  <ul class="collapse">
  <li><a href="#query-read" id="toc-query-read" class="nav-link" data-scroll-target="#query-read">Query (Read)</a></li>
  <li><a href="#working-with-dynamic-entities" id="toc-working-with-dynamic-entities" class="nav-link" data-scroll-target="#working-with-dynamic-entities">Working with Dynamic Entities</a></li>
  <li><a href="#working-with-raw-json-responses" id="toc-working-with-raw-json-responses" class="nav-link" data-scroll-target="#working-with-raw-json-responses">Working with Raw JSON Responses</a></li>
  <li><a href="#performance-comparison" id="toc-performance-comparison" class="nav-link" data-scroll-target="#performance-comparison">Performance Comparison</a></li>
  <li><a href="#create" id="toc-create" class="nav-link" data-scroll-target="#create">Create</a></li>
  <li><a href="#update" id="toc-update" class="nav-link" data-scroll-target="#update">Update</a></li>
  <li><a href="#delete" id="toc-delete" class="nav-link" data-scroll-target="#delete">Delete</a></li>
  </ul></li>
  <li><a href="#advanced-patterns" id="toc-advanced-patterns" class="nav-link" data-scroll-target="#advanced-patterns">üöÄ Advanced Patterns</a>
  <ul class="collapse">
  <li><a href="#bulk-operations" id="toc-bulk-operations" class="nav-link" data-scroll-target="#bulk-operations">Bulk Operations</a></li>
  <li><a href="#change-feed-processing" id="toc-change-feed-processing" class="nav-link" data-scroll-target="#change-feed-processing">Change Feed Processing</a></li>
  <li><a href="#server-side-programming" id="toc-server-side-programming" class="nav-link" data-scroll-target="#server-side-programming">Server-Side Programming</a></li>
  <li><a href="#retry-policies" id="toc-retry-policies" class="nav-link" data-scroll-target="#retry-policies">Retry Policies</a></li>
  <li><a href="#dependency-injection-setup" id="toc-dependency-injection-setup" class="nav-link" data-scroll-target="#dependency-injection-setup">Dependency Injection Setup</a></li>
  </ul></li>
  <li><a href="#authentication-approaches" id="toc-authentication-approaches" class="nav-link" data-scroll-target="#authentication-approaches">üîê Authentication Approaches</a>
  <ul class="collapse">
  <li><a href="#primary-key-authentication-connection-string" id="toc-primary-key-authentication-connection-string" class="nav-link" data-scroll-target="#primary-key-authentication-connection-string">1. <strong>Primary Key Authentication (Connection String)</strong></a></li>
  <li><a href="#azure-active-directory-aad-authentication" id="toc-azure-active-directory-aad-authentication" class="nav-link" data-scroll-target="#azure-active-directory-aad-authentication">2. <strong>Azure Active Directory (AAD) Authentication</strong></a></li>
  <li><a href="#resource-token-authentication" id="toc-resource-token-authentication" class="nav-link" data-scroll-target="#resource-token-authentication">3. <strong>Resource Token Authentication</strong></a></li>
  <li><a href="#authentication-comparison" id="toc-authentication-comparison" class="nav-link" data-scroll-target="#authentication-comparison">Authentication Comparison</a></li>
  <li><a href="#best-practices" id="toc-best-practices" class="nav-link" data-scroll-target="#best-practices">Best Practices</a></li>
  </ul></li>
  <li><a href="#migration-from-legacy-sdk" id="toc-migration-from-legacy-sdk" class="nav-link" data-scroll-target="#migration-from-legacy-sdk">üîÑ Migration from Legacy SDK</a>
  <ul class="collapse">
  <li><a href="#legacy-sdks-overview" id="toc-legacy-sdks-overview" class="nav-link" data-scroll-target="#legacy-sdks-overview">Legacy SDKs Overview</a></li>
  <li><a href="#why-legacy-sdks-were-discontinued" id="toc-why-legacy-sdks-were-discontinued" class="nav-link" data-scroll-target="#why-legacy-sdks-were-discontinued">Why Legacy SDKs Were Discontinued</a></li>
  <li><a href="#comprehensive-library-comparison" id="toc-comprehensive-library-comparison" class="nav-link" data-scroll-target="#comprehensive-library-comparison">Comprehensive Library Comparison</a></li>
  <li><a href="#migration-paths-code-examples" id="toc-migration-paths-code-examples" class="nav-link" data-scroll-target="#migration-paths-code-examples">Migration Paths &amp; Code Examples</a></li>
  <li><a href="#migration-decision-matrix" id="toc-migration-decision-matrix" class="nav-link" data-scroll-target="#migration-decision-matrix">Migration Decision Matrix</a></li>
  <li><a href="#key-migration-considerations" id="toc-key-migration-considerations" class="nav-link" data-scroll-target="#key-migration-considerations">Key Migration Considerations</a></li>
  <li><a href="#migration-benefits" id="toc-migration-benefits" class="nav-link" data-scroll-target="#migration-benefits">Migration Benefits</a></li>
  <li><a href="#support-timeline" id="toc-support-timeline" class="nav-link" data-scroll-target="#support-timeline">Support Timeline</a></li>
  </ul></li>
  <li><a href="#useful-resources" id="toc-useful-resources" class="nav-link" data-scroll-target="#useful-resources">üîó Useful Resources</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">üìù Summary</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/darioairoldi/Learn/edit/main/03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/darioairoldi/Learn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Technologies</li><li class="breadcrumb-item">Data</li><li class="breadcrumb-item"><a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html">02 Cosmosdb Access Options</a></li><li class="breadcrumb-item"><a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html">üåê Azure CosmosDB Access Options (with C#)</a></li></ol></nav></header>




<section id="azure-cosmosdb-access-options-with-c" class="level1">
<h1>üåê Azure CosmosDB Access Options (with C#)</h1>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">üìã Overview</h2>
<p><strong>Azure Cosmos DB</strong> is a fully managed NoSQL database service that provides <strong>global distribution, elastic scaling, and multi-model support</strong> with comprehensive SLAs for throughput, latency, availability, and consistency. It offers multiple APIs including <strong>SQL (Core)</strong>, <strong>MongoDB</strong>, <strong>Cassandra</strong>, <strong>Gremlin</strong>, and <strong>Table</strong>, making it highly versatile for various application patterns.</p>
</section>
<section id="table-of-contents" class="level2">
<h2 class="anchored" data-anchor-id="table-of-contents">üìö Table of Contents</h2>
<ol type="1">
<li>üìã Overview</li>
<li>üîß Available Approaches
<ul>
<li>SQL API (Core)</li>
<li>MongoDB API</li>
<li>Other APIs</li>
</ul></li>
<li>üì¶ Key Libraries
<ul>
<li>Primary Library</li>
<li>Supporting Libraries</li>
</ul></li>
<li>‚ö° Basic Operations
<ul>
<li>Setting Up a Cosmos Client</li>
<li>Managing Databases and Containers</li>
<li>Working with Items</li>
</ul></li>
<li>üîÑ CRUD Operations
<ul>
<li>Query (Read)</li>
<li>Create</li>
<li>Update</li>
<li>Delete</li>
</ul></li>
<li>üöÄ Advanced Patterns
<ul>
<li>Bulk Operations</li>
<li>Change Feed Processing</li>
<li>Server-Side Programming</li>
<li>Retry Policies</li>
<li>Dependency Injection Setup</li>
</ul></li>
<li>üîê Authentication Approaches</li>
<li>üîÑ Migration from Legacy SDK</li>
<li>üîó Useful Resources</li>
<li>üìù Summary</li>
</ol>
</section>
<section id="available-approaches" class="level2">
<h2 class="anchored" data-anchor-id="available-approaches">üîß Available Approaches</h2>
<section id="sql-api-core" class="level3">
<h3 class="anchored" data-anchor-id="sql-api-core">1. <strong>SQL API (Core)</strong></h3>
<ul>
<li><strong>Native JSON document model</strong> with rich <mark>SQL querying</mark> capabilities</li>
<li>Recommended for new applications with flexible schema requirements</li>
<li><strong>Primary C# SDK</strong>: <mark><code>Microsoft.Azure.Cosmos</code></mark></li>
<li>Best performance and feature support</li>
</ul>
</section>
<section id="mongodb-api" class="level3">
<h3 class="anchored" data-anchor-id="mongodb-api">2. <strong>MongoDB API</strong></h3>
<ul>
<li><mark>MongoDB-compatible API</mark> for existing MongoDB applications</li>
<li>Use standard MongoDB drivers and tools</li>
<li>No code changes required for MongoDB applications</li>
<li><strong>C# SDK</strong>: MongoDB .NET Driver</li>
</ul>
</section>
<section id="other-apis" class="level3">
<h3 class="anchored" data-anchor-id="other-apis">3. <strong>Other APIs</strong></h3>
<ul>
<li><strong>Cassandra API</strong>: For existing Cassandra workloads (<mark>CassandraCSharpDriver</mark>)</li>
<li><strong>Gremlin API</strong>: For graph databases (<mark>Gremlin.Net</mark>)</li>
<li><strong>Table API</strong>: For Table Storage compatibility
<ul>
<li><strong>Recommended</strong>: Use unified <mark><code>Microsoft.Azure.Cosmos</code></mark> SDK</li>
<li><strong>Alternative</strong>: <mark><code>Azure.Data.Tables</code></mark> for Azure Table Storage</li>
<li><strong>Deprecated (‚ö†Ô∏è)</strong>: <mark><code>Microsoft.Azure.Cosmos.Table</code></mark> (discontinued)</li>
</ul></li>
</ul>
</section>
</section>
<section id="key-libraries" class="level2">
<h2 class="anchored" data-anchor-id="key-libraries">üì¶ Key Libraries</h2>
<section id="primary-library" class="level3">
<h3 class="anchored" data-anchor-id="primary-library">Primary Library</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- For SQL API (Recommended) --&gt;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Microsoft.Azure.Cosmos"</span><span class="ot"> Version=</span><span class="st">"3.37.0"</span> /&gt;</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- For MongoDB API --&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"MongoDB.Driver"</span><span class="ot"> Version=</span><span class="st">"2.22.0"</span> /&gt;</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- For Table API (if not using unified Cosmos SDK) --&gt;</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Azure.Data.Tables"</span><span class="ot"> Version=</span><span class="st">"12.8.0"</span> /&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="deprecated-libraries-do-not-use" class="level3">
<h3 class="anchored" data-anchor-id="deprecated-libraries-do-not-use"><strong>Deprecated Libraries ‚ö†Ô∏è (Do Not Use)</strong></h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- </span><span class="al">DEPRECATED</span><span class="co">: Legacy SQL API SDK --&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;PackageReference Include="Microsoft.Azure.DocumentDB" Version="2.x.x" /&gt; --&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- </span><span class="al">DEPRECATED</span><span class="co">: Legacy Table API SDK --&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;PackageReference Include="Microsoft.Azure.Cosmos.Table" Version="1.x.x" /&gt; --&gt;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- </span><span class="al">DEPRECATED</span><span class="co">: Original Table Storage SDK --&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;PackageReference Include="WindowsAzure.Storage" Version="9.x.x" /&gt; --&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="supporting-libraries-optional" class="level3">
<h3 class="anchored" data-anchor-id="supporting-libraries-optional">Supporting Libraries (Optional)</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- For dependency injection --&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Microsoft.Extensions.DependencyInjection"</span><span class="ot"> Version=</span><span class="st">"7.0.0"</span> /&gt;</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Microsoft.Extensions.Configuration"</span><span class="ot"> Version=</span><span class="st">"7.0.0"</span> /&gt;</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- For managed identity authentication --&gt;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Azure.Identity"</span><span class="ot"> Version=</span><span class="st">"1.10.4"</span> /&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="basic-operations" class="level2">
<h2 class="anchored" data-anchor-id="basic-operations">‚ö° Basic Operations</h2>
<section id="setting-up-a-cosmos-client" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-a-cosmos-client">Setting Up a Cosmos Client</h3>
<p>The <strong>CosmosClient class</strong> is the primary interface for interacting with Azure Cosmos DB SQL API. It provides a thread-safe client that manages connections, handles retries, and implements the Azure Cosmos DB protocol.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/001.01 CosmosClientClass.png" class="img-fluid figure-img"></p>
<figcaption>alt text</figcaption>
</figure>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Microsoft<span class="op">.</span><span class="fu">Azure</span><span class="op">.</span><span class="fu">Cosmos</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Connection using endpoint and key (basic example)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> endpoint <span class="op">=</span> <span class="st">"https://your-account.documents.azure.com:443/"</span><span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> key <span class="op">=</span> <span class="st">"your-primary-key"</span><span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>endpoint<span class="op">,</span> key<span class="op">,</span> <span class="kw">new</span> CosmosClientOptions</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    ConnectionMode <span class="op">=</span> ConnectionMode<span class="op">.</span><span class="fu">Direct</span><span class="op">,</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    SerializerOptions <span class="op">=</span> <span class="kw">new</span> CosmosSerializationOptions</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        PropertyNamingPolicy <span class="op">=</span> CosmosPropertyNamingPolicy<span class="op">.</span><span class="fu">CamelCase</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="op">});</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="key-cosmosclientoptions" class="level4">
<h4 class="anchored" data-anchor-id="key-cosmosclientoptions">Key CosmosClientOptions</h4>
<p>The CosmosClient behavior can be customized with CosmosClientOptions:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> clientOptions <span class="op">=</span> <span class="kw">new</span> CosmosClientOptions</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Performance options</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    ConnectionMode <span class="op">=</span> ConnectionMode<span class="op">.</span><span class="fu">Direct</span><span class="op">,</span> <span class="co">// Direct for better performance</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    ApplicationName <span class="op">=</span> <span class="st">"YourApplication"</span><span class="op">,</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Consistency level</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    ConsistencyLevel <span class="op">=</span> ConsistencyLevel<span class="op">.</span><span class="fu">Session</span><span class="op">,</span> <span class="co">// Default</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Regional preferences</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    ApplicationRegion <span class="op">=</span> <span class="st">"West US 2"</span><span class="op">,</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Serialization</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    SerializerOptions <span class="op">=</span> <span class="kw">new</span> CosmosSerializationOptions</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        PropertyNamingPolicy <span class="op">=</span> CosmosPropertyNamingPolicy<span class="op">.</span><span class="fu">CamelCase</span><span class="op">,</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        IgnoreNullValues <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Resilience</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    MaxRetryAttemptsOnRateLimitedRequests <span class="op">=</span> <span class="dv">9</span><span class="op">,</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    MaxRetryWaitTimeOnRateLimitedRequests <span class="op">=</span> TimeSpan<span class="op">.</span><span class="fu">FromSeconds</span><span class="op">(</span><span class="dv">30</span><span class="op">)</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>endpoint<span class="op">,</span> key<span class="op">,</span> clientOptions<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="managing-databases-and-containers" class="level3">
<h3 class="anchored" data-anchor-id="managing-databases-and-containers">Managing Databases and Containers</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create or get a database</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>Database database <span class="op">=</span> await cosmosClient<span class="op">.</span><span class="fu">CreateDatabaseIfNotExistsAsync</span><span class="op">(</span><span class="st">"MyDatabase"</span><span class="op">);</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">// Create container with RU/s provisioning and partition key</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>ContainerProperties containerProperties <span class="op">=</span> <span class="kw">new</span> ContainerProperties</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    Id <span class="op">=</span> <span class="st">"MyContainer"</span><span class="op">,</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    PartitionKeyPath <span class="op">=</span> <span class="st">"/partitionKey"</span><span class="op">,</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Optional: configure indexing policy</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    IndexingPolicy <span class="op">=</span> <span class="kw">new</span> IndexingPolicy</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        Automatic <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        IndexingMode <span class="op">=</span> IndexingMode<span class="op">.</span><span class="fu">Consistent</span><span class="op">,</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>        IncludedPaths <span class="op">=</span> <span class="op">{</span> <span class="kw">new</span> IncludedPath <span class="op">{</span> Path <span class="op">=</span> <span class="st">"/*"</span> <span class="op">}</span> <span class="op">},</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>        ExcludedPaths <span class="op">=</span> <span class="op">{</span> <span class="kw">new</span> ExcludedPath <span class="op">{</span> Path <span class="op">=</span> <span class="st">"/path/to/exclude/*"</span> <span class="op">}</span> <span class="op">}</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co">// Create with 400 RU/s throughput</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>Container container <span class="op">=</span> await database<span class="op">.</span><span class="fu">CreateContainerIfNotExistsAsync</span><span class="op">(</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    containerProperties<span class="op">,</span> </span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    ThroughputProperties<span class="op">.</span><span class="fu">CreateManualThroughput</span><span class="op">(</span><span class="dv">400</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="working-with-items" class="level3">
<h3 class="anchored" data-anchor-id="working-with-items">Working with Items</h3>
<p>In Azure Cosmos DB‚Äôs SQL API, you work with ‚Äúitems‚Äù - JSON documents with unique IDs:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Define a model class</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> TodoItem</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="fu">JsonProperty</span><span class="op">(</span><span class="st">"id"</span><span class="op">)]</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> Id <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span> <span class="op">=</span> Guid<span class="op">.</span><span class="fu">NewGuid</span><span class="op">().</span><span class="fu">ToString</span><span class="op">();</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="fu">JsonProperty</span><span class="op">(</span><span class="st">"partitionKey"</span><span class="op">)]</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> PartitionKey <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> Title <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">bool</span> Completed <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> DateTime CreatedDate <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span> <span class="op">=</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Alternative: Using System.Text.Json attributes</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> TodoItemWithSystemTextJson</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="fu">JsonPropertyName</span><span class="op">(</span><span class="st">"id"</span><span class="op">)]</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> Id <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span> <span class="op">=</span> Guid<span class="op">.</span><span class="fu">NewGuid</span><span class="op">().</span><span class="fu">ToString</span><span class="op">();</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="fu">JsonPropertyName</span><span class="op">(</span><span class="st">"partitionKey"</span><span class="op">)]</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> PartitionKey <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> Title <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">bool</span> Completed <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> DateTime CreatedDate <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span> <span class="op">=</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">;</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="crud-operations" class="level2">
<h2 class="anchored" data-anchor-id="crud-operations">üîÑ CRUD Operations</h2>
<section id="query-read" class="level3">
<h3 class="anchored" data-anchor-id="query-read">Query (Read)</h3>
<p>CosmosDB SQL API provides a rich SQL-like query language for JSON documents. You can query using strongly-typed entities, dynamic objects, or raw JSON responses:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Point read by ID and partition key (most efficient)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    ItemResponse<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> response <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReadItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>        id<span class="op">:</span> <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        partitionKey<span class="op">:</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    TodoItem item <span class="op">=</span> response<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Retrieved item: {item.Title}, RUs consumed: {response.RequestCharge}"</span><span class="op">);</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">NotFound</span><span class="op">)</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item not found"</span><span class="op">);</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. SQL Query</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>QueryDefinition query <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SELECT * FROM c WHERE c.partitionKey = @partitionKey AND c.completed = @status"</span><span class="op">)</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WithParameter</span><span class="op">(</span><span class="st">"@partitionKey"</span><span class="op">,</span> <span class="st">"personal"</span><span class="op">)</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WithParameter</span><span class="op">(</span><span class="st">"@status"</span><span class="op">,</span> <span class="kw">false</span><span class="op">);</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>FeedIterator<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> resultSet <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    query<span class="op">,</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>        MaxItemCount <span class="op">=</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>        PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">)</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> totalRequestCharge <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>List<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> results <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>TodoItem<span class="op">&gt;();</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>resultSet<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    FeedResponse<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> response <span class="op">=</span> await resultSet<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    totalRequestCharge <span class="op">+=</span> response<span class="op">.</span><span class="fu">RequestCharge</span><span class="op">;</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>    results<span class="op">.</span><span class="fu">AddRange</span><span class="op">(</span>response<span class="op">.</span><span class="fu">ToList</span><span class="op">());</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Found {results.Count} items, total RU consumed: {totalRequestCharge}"</span><span class="op">);</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. LINQ query </span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Microsoft<span class="op">.</span><span class="fu">Azure</span><span class="op">.</span><span class="fu">Cosmos</span><span class="op">.</span><span class="fu">Linq</span><span class="op">;</span></span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>IOrderedQueryable<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> linqQueryable <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemLinqQueryable</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;();</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> query <span class="op">=</span> linqQueryable</span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">Where</span><span class="op">(</span>t <span class="op">=&gt;</span> t<span class="op">.</span><span class="fu">PartitionKey</span> <span class="op">==</span> <span class="st">"personal"</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>t<span class="op">.</span><span class="fu">Completed</span><span class="op">)</span></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">OrderBy</span><span class="op">(</span>t <span class="op">=&gt;</span> t<span class="op">.</span><span class="fu">CreatedDate</span><span class="op">);</span></span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> FeedIterator<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> linqResultSet <span class="op">=</span> query<span class="op">.</span><span class="fu">ToFeedIterator</span><span class="op">();</span></span>
<span id="cb8-52"><a href="#cb8-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-53"><a href="#cb8-53" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>linqResultSet<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb8-54"><a href="#cb8-54" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-55"><a href="#cb8-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="op">(</span><span class="dt">var</span> item <span class="kw">in</span> await linqResultSet<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">())</span></span>
<span id="cb8-56"><a href="#cb8-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb8-57"><a href="#cb8-57" aria-hidden="true" tabindex="-1"></a>        Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"{item.Title}: {item.CreatedDate}"</span><span class="op">);</span></span>
<span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="working-with-dynamic-entities" class="level3">
<h3 class="anchored" data-anchor-id="working-with-dynamic-entities">Working with Dynamic Entities</h3>
<p>You can work with dynamic objects when you don‚Äôt want to define strongly-typed classes:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Point read with dynamic object</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ItemResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> dynamicResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReadItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    id<span class="op">:</span> <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    partitionKey<span class="op">:</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>dynamic item <span class="op">=</span> dynamicResponse<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Title: {item.title}, Completed: {item.completed}"</span><span class="op">);</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Query with dynamic objects</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>QueryDefinition dynamicQuery <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SELECT * FROM c WHERE c.partitionKey = @partitionKey"</span><span class="op">)</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WithParameter</span><span class="op">(</span><span class="st">"@partitionKey"</span><span class="op">,</span> <span class="st">"personal"</span><span class="op">);</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>FeedIterator<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> dynamicResultSet <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    dynamicQuery<span class="op">,</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>        PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">)</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>dynamicResultSet<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    FeedResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> response <span class="op">=</span> await dynamicResultSet<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="op">(</span>dynamic item <span class="kw">in</span> response<span class="op">)</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>        Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"ID: {item.id}, Title: {item.title}"</span><span class="op">);</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. Creating items with dynamic objects</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>dynamic newDynamicItem <span class="op">=</span> <span class="kw">new</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    id <span class="op">=</span> <span class="st">"dynamic-task-1"</span><span class="op">,</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    partitionKey <span class="op">=</span> <span class="st">"personal"</span><span class="op">,</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="st">"Task created with dynamic object"</span><span class="op">,</span></span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>    completed <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    tags <span class="op">=</span> <span class="kw">new</span><span class="op">[]</span> <span class="op">{</span> <span class="st">"dynamic"</span><span class="op">,</span> <span class="st">"example"</span> <span class="op">}</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>    newDynamicItem<span class="op">,</span> </span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="working-with-raw-json-responses" class="level3">
<h3 class="anchored" data-anchor-id="working-with-raw-json-responses">Working with Raw JSON Responses</h3>
<p>For maximum flexibility, you can work directly with JSON strings:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Query returning raw JSON stream</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>QueryDefinition jsonQuery <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SELECT * FROM c WHERE c.partitionKey = @partitionKey"</span><span class="op">)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WithParameter</span><span class="op">(</span><span class="st">"@partitionKey"</span><span class="op">,</span> <span class="st">"personal"</span><span class="op">);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>FeedIterator jsonIterator <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryStreamIterator</span><span class="op">(</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    jsonQuery<span class="op">,</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>        PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">)</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>jsonIterator<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> ResponseMessage response <span class="op">=</span> await jsonIterator<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="op">(</span>response<span class="op">.</span><span class="fu">IsSuccessStatusCode</span><span class="op">)</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">using</span> StreamReader reader <span class="op">=</span> <span class="kw">new</span> <span class="fu">StreamReader</span><span class="op">(</span>response<span class="op">.</span><span class="fu">Content</span><span class="op">);</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">string</span> jsonContent <span class="op">=</span> await reader<span class="op">.</span><span class="fu">ReadToEndAsync</span><span class="op">();</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Raw JSON Response: {jsonContent}"</span><span class="op">);</span></span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Parse manually if needed</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">using</span> JsonDocument document <span class="op">=</span> JsonDocument<span class="op">.</span><span class="fu">Parse</span><span class="op">(</span>jsonContent<span class="op">);</span></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>        JsonElement root <span class="op">=</span> document<span class="op">.</span><span class="fu">RootElement</span><span class="op">;</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> <span class="op">(</span>root<span class="op">.</span><span class="fu">TryGetProperty</span><span class="op">(</span><span class="st">"Documents"</span><span class="op">,</span> <span class="kw">out</span> JsonElement documents<span class="op">))</span></span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>            <span class="kw">foreach</span> <span class="op">(</span>JsonElement item <span class="kw">in</span> documents<span class="op">.</span><span class="fu">EnumerateArray</span><span class="op">())</span></span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>                <span class="kw">if</span> <span class="op">(</span>item<span class="op">.</span><span class="fu">TryGetProperty</span><span class="op">(</span><span class="st">"title"</span><span class="op">,</span> <span class="kw">out</span> JsonElement title<span class="op">))</span></span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>                <span class="op">{</span></span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>                    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Title from JSON: {title.GetString()}"</span><span class="op">);</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-39"><a href="#cb10-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-40"><a href="#cb10-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Point read with raw JSON</span></span>
<span id="cb10-42"><a href="#cb10-42" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> ResponseMessage jsonResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReadItemStreamAsync</span><span class="op">(</span></span>
<span id="cb10-43"><a href="#cb10-43" aria-hidden="true" tabindex="-1"></a>    <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb10-44"><a href="#cb10-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb10-45"><a href="#cb10-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-46"><a href="#cb10-46" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="op">(</span>jsonResponse<span class="op">.</span><span class="fu">IsSuccessStatusCode</span><span class="op">)</span></span>
<span id="cb10-47"><a href="#cb10-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-48"><a href="#cb10-48" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> StreamReader reader <span class="op">=</span> <span class="kw">new</span> <span class="fu">StreamReader</span><span class="op">(</span>jsonResponse<span class="op">.</span><span class="fu">Content</span><span class="op">);</span></span>
<span id="cb10-49"><a href="#cb10-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">string</span> itemJson <span class="op">=</span> await reader<span class="op">.</span><span class="fu">ReadToEndAsync</span><span class="op">();</span></span>
<span id="cb10-50"><a href="#cb10-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-51"><a href="#cb10-51" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Raw JSON Item: {itemJson}"</span><span class="op">);</span></span>
<span id="cb10-52"><a href="#cb10-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-53"><a href="#cb10-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. Create item with raw JSON</span></span>
<span id="cb10-55"><a href="#cb10-55" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> newItemJson <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb10-56"><a href="#cb10-56" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-57"><a href="#cb10-57" aria-hidden="true" tabindex="-1"></a>    <span class="st">"id"</span><span class="op">:</span> <span class="st">"json-task-1"</span><span class="op">,</span></span>
<span id="cb10-58"><a href="#cb10-58" aria-hidden="true" tabindex="-1"></a>    <span class="st">"partitionKey"</span><span class="op">:</span> <span class="st">"personal"</span><span class="op">,</span></span>
<span id="cb10-59"><a href="#cb10-59" aria-hidden="true" tabindex="-1"></a>    <span class="st">"title"</span><span class="op">:</span> <span class="st">"Task created with raw JSON"</span><span class="op">,</span></span>
<span id="cb10-60"><a href="#cb10-60" aria-hidden="true" tabindex="-1"></a>    <span class="st">"completed"</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb10-61"><a href="#cb10-61" aria-hidden="true" tabindex="-1"></a>    <span class="st">"metadata"</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb10-62"><a href="#cb10-62" aria-hidden="true" tabindex="-1"></a>        <span class="st">"createdBy"</span><span class="op">:</span> <span class="st">"system"</span><span class="op">,</span></span>
<span id="cb10-63"><a href="#cb10-63" aria-hidden="true" tabindex="-1"></a>        <span class="st">"priority"</span><span class="op">:</span> <span class="st">"high"</span></span>
<span id="cb10-64"><a href="#cb10-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb10-65"><a href="#cb10-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-66"><a href="#cb10-66" aria-hidden="true" tabindex="-1"></a><span class="st">""";</span></span>
<span id="cb10-67"><a href="#cb10-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-68"><a href="#cb10-68" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> MemoryStream stream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>newItemJson<span class="op">));</span></span>
<span id="cb10-69"><a href="#cb10-69" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> ResponseMessage createResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreateItemStreamAsync</span><span class="op">(</span></span>
<span id="cb10-70"><a href="#cb10-70" aria-hidden="true" tabindex="-1"></a>    stream<span class="op">,</span> </span>
<span id="cb10-71"><a href="#cb10-71" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb10-72"><a href="#cb10-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-73"><a href="#cb10-73" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="op">(</span>createResponse<span class="op">.</span><span class="fu">IsSuccessStatusCode</span><span class="op">)</span></span>
<span id="cb10-74"><a href="#cb10-74" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-75"><a href="#cb10-75" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Created item with status: {createResponse.StatusCode}"</span><span class="op">);</span></span>
<span id="cb10-76"><a href="#cb10-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="performance-comparison" class="level3">
<h3 class="anchored" data-anchor-id="performance-comparison">Performance Comparison</h3>
<p>Different approaches have different performance characteristics:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Performance comparison example</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> stopwatch <span class="op">=</span> Stopwatch<span class="op">.</span><span class="fu">StartNew</span><span class="op">();</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Strongly-typed (fastest deserialization)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> typedResults <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>TodoItem<span class="op">&gt;();</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> typedIterator <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span><span class="st">"SELECT * FROM c WHERE c.partitionKey = 'personal'"</span><span class="op">),</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions <span class="op">{</span> PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">)</span> <span class="op">});</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>typedIterator<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    typedResults<span class="op">.</span><span class="fu">AddRange</span><span class="op">(</span>await typedIterator<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">());</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Strongly-typed query: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Restart</span><span class="op">();</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Dynamic objects (flexible but slower)</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> dynamicResults <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>dynamic<span class="op">&gt;();</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> dynamicIterator <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span><span class="st">"SELECT * FROM c WHERE c.partitionKey = 'personal'"</span><span class="op">),</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions <span class="op">{</span> PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">)</span> <span class="op">});</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>dynamicIterator<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>    dynamicResults<span class="op">.</span><span class="fu">AddRange</span><span class="op">(</span>await dynamicIterator<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">());</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Dynamic query: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Restart</span><span class="op">();</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. Raw JSON (fastest network transfer, manual parsing required)</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> jsonIterator <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryStreamIterator</span><span class="op">(</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span><span class="st">"SELECT * FROM c WHERE c.partitionKey = 'personal'"</span><span class="op">),</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions <span class="op">{</span> PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">)</span> <span class="op">});</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>jsonIterator<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> <span class="dt">var</span> response <span class="op">=</span> await jsonIterator<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> <span class="dt">var</span> reader <span class="op">=</span> <span class="kw">new</span> <span class="fu">StreamReader</span><span class="op">(</span>response<span class="op">.</span><span class="fu">Content</span><span class="op">);</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">string</span> json <span class="op">=</span> await reader<span class="op">.</span><span class="fu">ReadToEndAsync</span><span class="op">();</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Process JSON as needed</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Raw JSON query: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<section id="query-performance-tips" class="level4">
<h4 class="anchored" data-anchor-id="query-performance-tips">Query Performance Tips</h4>
<ul>
<li><strong>Always include the partition key</strong> in your queries when possible</li>
<li><strong>Point reads</strong> (id + partition key) are the most efficient operations</li>
<li>Use <strong>parameterized queries</strong> to prevent SQL injection and improve caching</li>
<li>Monitor <strong>request charge (RUs)</strong> to optimize queries</li>
<li>Use <strong>projections</strong> (<code>SELECT VALUE c.name</code>) to return only needed properties</li>
<li>Consider <strong>paging</strong> with continuation tokens for large result sets</li>
</ul>
<div class="sourceCode" id="cb12"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Query with continuation token (pagination)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>QueryDefinition largeQuery <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span><span class="st">"SELECT * FROM c"</span><span class="op">);</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>QueryRequestOptions options <span class="op">=</span> <span class="kw">new</span> QueryRequestOptions</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    MaxItemCount <span class="op">=</span> <span class="dv">10</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>FeedIterator<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> iterator <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    largeQuery<span class="op">,</span> </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> options<span class="op">);</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> continuationToken <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="co">// First page</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>FeedResponse<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> page <span class="op">=</span> await iterator<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>continuationToken <span class="op">=</span> page<span class="op">.</span><span class="fu">ContinuationToken</span><span class="op">;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ProcessItems</span><span class="op">(</span>page<span class="op">);</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="co">// Later, get the next page using the continuation token</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>options<span class="op">.</span><span class="fu">RequestContinuation</span> <span class="op">=</span> continuationToken<span class="op">;</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>iterator <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span>largeQuery<span class="op">,</span> requestOptions<span class="op">:</span> options<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="create" class="level3">
<h3 class="anchored" data-anchor-id="create">Create</h3>
<p>You can create items using strongly-typed entities, dynamic objects, or raw JSON:</p>
<section id="creating-with-strongly-typed-entities" class="level4">
<h4 class="anchored" data-anchor-id="creating-with-strongly-typed-entities">Creating with Strongly-Typed Entities</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create a new item with strongly-typed class</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> newItem <span class="op">=</span> <span class="kw">new</span> TodoItem</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    Id <span class="op">=</span> <span class="st">"task-1"</span><span class="op">,</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    PartitionKey <span class="op">=</span> <span class="st">"personal"</span><span class="op">,</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    Title <span class="op">=</span> <span class="st">"Complete Azure Cosmos DB documentation"</span><span class="op">,</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    Completed <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Insert the item</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    ItemResponse<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> response <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">(</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>        newItem<span class="op">,</span> </span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>newItem<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">));</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Created item: {newItem.Id}"</span><span class="op">);</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Request charge: {response.RequestCharge} RUs"</span><span class="op">);</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">Conflict</span><span class="op">)</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item already exists"</span><span class="op">);</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">// Upsert - create if not exists, replace if exists</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">UpsertItemAsync</span><span class="op">(</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>    newItem<span class="op">,</span> </span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>newItem<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">));</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Create with custom options</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>ItemRequestOptions requestOptions <span class="op">=</span> <span class="kw">new</span> ItemRequestOptions</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>    EnableContentResponseOnWrite <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> <span class="co">// Saves RUs by not returning the created item</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>    ConsistencyLevel <span class="op">=</span> ConsistencyLevel<span class="op">.</span><span class="fu">Session</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">(</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>    newItem<span class="op">,</span> </span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>newItem<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">),</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creating-with-dynamic-objects" class="level4">
<h4 class="anchored" data-anchor-id="creating-with-dynamic-objects">Creating with Dynamic Objects</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create with anonymous object</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>dynamic dynamicItem <span class="op">=</span> <span class="kw">new</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    id <span class="op">=</span> <span class="st">"dynamic-task-2"</span><span class="op">,</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    partitionKey <span class="op">=</span> <span class="st">"personal"</span><span class="op">,</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="st">"Task created with dynamic object"</span><span class="op">,</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    completed <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    priority <span class="op">=</span> <span class="st">"high"</span><span class="op">,</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    tags <span class="op">=</span> <span class="kw">new</span><span class="op">[]</span> <span class="op">{</span> <span class="st">"dynamic"</span><span class="op">,</span> <span class="st">"flexible"</span> <span class="op">},</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    metadata <span class="op">=</span> <span class="kw">new</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>        createdBy <span class="op">=</span> <span class="st">"system"</span><span class="op">,</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        version <span class="op">=</span> <span class="st">"1.0"</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>ItemResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> dynamicResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    dynamicItem<span class="op">,</span> </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Created dynamic item: {dynamicResponse.Resource.id}"</span><span class="op">);</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co">// Create with ExpandoObject for runtime flexibility</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>dynamic expandoItem <span class="op">=</span> <span class="kw">new</span> <span class="fu">ExpandoObject</span><span class="op">();</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>expandoItem<span class="op">.</span><span class="fu">id</span> <span class="op">=</span> <span class="st">"expando-task-1"</span><span class="op">;</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>expandoItem<span class="op">.</span><span class="fu">partitionKey</span> <span class="op">=</span> <span class="st">"personal"</span><span class="op">;</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>expandoItem<span class="op">.</span><span class="fu">title</span> <span class="op">=</span> <span class="st">"Task created with ExpandoObject"</span><span class="op">;</span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>expandoItem<span class="op">.</span><span class="fu">completed</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Add properties dynamically</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="op">((</span>IDictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">object</span><span class="op">&gt;)</span>expandoItem<span class="op">)[</span><span class="st">"customField"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"customValue"</span><span class="op">;</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="op">((</span>IDictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">object</span><span class="op">&gt;)</span>expandoItem<span class="op">)[</span><span class="st">"timestamp"</span><span class="op">]</span> <span class="op">=</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">;</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    expandoItem<span class="op">,</span> </span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">// Upsert with dynamic objects</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">UpsertItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>    dynamicItem<span class="op">,</span> </span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creating-with-raw-json" class="level4">
<h4 class="anchored" data-anchor-id="creating-with-raw-json">Creating with Raw JSON</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Create item with JSON string</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> newItemJson <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"id"</span><span class="op">:</span> <span class="st">"json-task-2"</span><span class="op">,</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"partitionKey"</span><span class="op">:</span> <span class="st">"personal"</span><span class="op">,</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"title"</span><span class="op">:</span> <span class="st">"Task created with raw JSON"</span><span class="op">,</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"completed"</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"priority"</span><span class="op">:</span> <span class="st">"medium"</span><span class="op">,</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tags"</span><span class="op">:</span> <span class="op">[</span><span class="st">"json"</span><span class="op">,</span> <span class="st">"manual"</span><span class="op">],</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"metadata"</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"createdBy"</span><span class="op">:</span> <span class="st">"api"</span><span class="op">,</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"source"</span><span class="op">:</span> <span class="st">"external-system"</span><span class="op">,</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"timestamp"</span><span class="op">:</span> <span class="st">"2025-01-15T10:30:00Z"</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"customProperties"</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>        <span class="st">"nested"</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"value"</span><span class="op">:</span> <span class="dv">42</span><span class="op">,</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"active"</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="st">""";</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co">// Create using stream for maximum performance</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> MemoryStream stream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>newItemJson<span class="op">));</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> ResponseMessage createResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreateItemStreamAsync</span><span class="op">(</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    stream<span class="op">,</span> </span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="op">(</span>createResponse<span class="op">.</span><span class="fu">IsSuccessStatusCode</span><span class="op">)</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Created JSON item with status: {createResponse.StatusCode}"</span><span class="op">);</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Request charge: {createResponse.Headers.RequestCharge} RUs"</span><span class="op">);</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Read the created item from response if needed</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> StreamReader reader <span class="op">=</span> <span class="kw">new</span> <span class="fu">StreamReader</span><span class="op">(</span>createResponse<span class="op">.</span><span class="fu">Content</span><span class="op">);</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">string</span> createdItemJson <span class="op">=</span> await reader<span class="op">.</span><span class="fu">ReadToEndAsync</span><span class="op">();</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Created item: {createdItemJson}"</span><span class="op">);</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Failed to create item: {createResponse.StatusCode}"</span><span class="op">);</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> StreamReader errorReader <span class="op">=</span> <span class="kw">new</span> <span class="fu">StreamReader</span><span class="op">(</span>createResponse<span class="op">.</span><span class="fu">Content</span><span class="op">);</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">string</span> errorMessage <span class="op">=</span> await errorReader<span class="op">.</span><span class="fu">ReadToEndAsync</span><span class="op">();</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Error: {errorMessage}"</span><span class="op">);</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a><span class="co">// Upsert with JSON stream</span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> MemoryStream upsertStream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>newItemJson<span class="op">));</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> ResponseMessage upsertResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">UpsertItemStreamAsync</span><span class="op">(</span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>    upsertStream<span class="op">,</span> </span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a><span class="co">// Create with custom request options using JSON</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>ItemRequestOptions jsonRequestOptions <span class="op">=</span> <span class="kw">new</span> ItemRequestOptions</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>    EnableContentResponseOnWrite <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> MemoryStream customStream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>newItemJson<span class="op">));</span></span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> ResponseMessage customResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreateItemStreamAsync</span><span class="op">(</span></span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>    customStream<span class="op">,</span> </span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">),</span></span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>    jsonRequestOptions<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="performance-comparison-for-create-operations" class="level4">
<h4 class="anchored" data-anchor-id="performance-comparison-for-create-operations">Performance Comparison for Create Operations</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> stopwatch <span class="op">=</span> Stopwatch<span class="op">.</span><span class="fu">StartNew</span><span class="op">();</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Strongly-typed (good balance of performance and type safety)</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> typedItem <span class="op">=</span> <span class="kw">new</span> TodoItem <span class="op">{</span> Id <span class="op">=</span> <span class="st">"perf-typed"</span><span class="op">,</span> PartitionKey <span class="op">=</span> <span class="st">"test"</span><span class="op">,</span> Title <span class="op">=</span> <span class="st">"Typed"</span> <span class="op">};</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">(</span>typedItem<span class="op">,</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"test"</span><span class="op">));</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Strongly-typed create: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Restart</span><span class="op">();</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Dynamic object (flexible but slower serialization)</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>dynamic dynamicItem <span class="op">=</span> <span class="kw">new</span> <span class="op">{</span> id <span class="op">=</span> <span class="st">"perf-dynamic"</span><span class="op">,</span> partitionKey <span class="op">=</span> <span class="st">"test"</span><span class="op">,</span> title <span class="op">=</span> <span class="st">"Dynamic"</span> <span class="op">};</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span>dynamicItem<span class="op">,</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"test"</span><span class="op">));</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Dynamic create: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Restart</span><span class="op">();</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. Raw JSON (fastest, no serialization overhead)</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> jsonItem <span class="op">=</span> <span class="st">"""{"</span>id<span class="st">": "</span>perf<span class="op">-</span>json<span class="st">", "</span>partitionKey<span class="st">": "</span>test<span class="st">", "</span>title<span class="st">": "</span>JSON<span class="st">"}"""</span><span class="op">;</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="dt">var</span> stream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>jsonItem<span class="op">));</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">CreateItemStreamAsync</span><span class="op">(</span>stream<span class="op">,</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"test"</span><span class="op">));</span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Raw JSON create: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="update" class="level3">
<h3 class="anchored" data-anchor-id="update">Update</h3>
<p>You can update items using strongly-typed entities, dynamic objects, or raw JSON through replace operations or patch operations:</p>
<section id="updating-with-strongly-typed-entities" class="level4">
<h4 class="anchored" data-anchor-id="updating-with-strongly-typed-entities">Updating with Strongly-Typed Entities</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Read first, then update</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Get the existing item</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    ItemResponse<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> response <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReadItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    TodoItem item <span class="op">=</span> response<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Modify properties</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    item<span class="op">.</span><span class="fu">Title</span> <span class="op">=</span> <span class="st">"Updated title"</span><span class="op">;</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    item<span class="op">.</span><span class="fu">Completed</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Update with optimistic concurrency control using ETag</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    ItemRequestOptions options <span class="op">=</span> <span class="kw">new</span> ItemRequestOptions</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>        IfMatchEtag <span class="op">=</span> response<span class="op">.</span><span class="fu">ETag</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Replace the item</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    await container<span class="op">.</span><span class="fu">ReplaceItemAsync</span><span class="op">(</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        item<span class="op">,</span> </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        item<span class="op">.</span><span class="fu">Id</span><span class="op">,</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>item<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">),</span> </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>        options<span class="op">);</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item updated successfully"</span><span class="op">);</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">PreconditionFailed</span><span class="op">)</span></span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item was modified by another process"</span><span class="op">);</span></span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">NotFound</span><span class="op">)</span></span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item not found"</span><span class="op">);</span></span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a><span class="co">// Direct patch operations without reading first</span></span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>PatchItemRequestOptions patchOptions <span class="op">=</span> <span class="kw">new</span> <span class="fu">PatchItemRequestOptions</span><span class="op">();</span></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>List<span class="op">&lt;</span>PatchOperation<span class="op">&gt;</span> patchOperations <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>PatchOperation<span class="op">&gt;</span></span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/title"</span><span class="op">,</span> <span class="st">"New patched title"</span><span class="op">),</span></span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/completed"</span><span class="op">,</span> <span class="kw">true</span><span class="op">),</span></span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="st">"/tags"</span><span class="op">,</span> <span class="kw">new</span><span class="op">[]</span> <span class="op">{</span> <span class="st">"important"</span><span class="op">,</span> <span class="st">"documentation"</span> <span class="op">})</span></span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">PatchItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>    <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">),</span></span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>    patchOperations<span class="op">,</span></span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>    patchOptions<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="updating-with-dynamic-objects" class="level4">
<h4 class="anchored" data-anchor-id="updating-with-dynamic-objects">Updating with Dynamic Objects</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Read and update with dynamic objects</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>ItemResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> dynamicResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReadItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dynamic-task-1"</span><span class="op">,</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>dynamic item <span class="op">=</span> dynamicResponse<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Modify properties</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>item<span class="op">.</span><span class="fu">title</span> <span class="op">=</span> <span class="st">"Updated dynamic title"</span><span class="op">;</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>item<span class="op">.</span><span class="fu">completed</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>item<span class="op">.</span><span class="fu">lastModified</span> <span class="op">=</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">;</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">// Add new properties dynamically</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>item<span class="op">.</span><span class="fu">updatedBy</span> <span class="op">=</span> <span class="st">"system"</span><span class="op">;</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>item<span class="op">.</span><span class="fu">version</span> <span class="op">=</span> <span class="st">"2.0"</span><span class="op">;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co">// Replace with dynamic object</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">ReplaceItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>    item<span class="op">,</span> </span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">(</span><span class="dt">string</span><span class="op">)</span>item<span class="op">.</span><span class="fu">id</span><span class="op">,</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">((</span><span class="dt">string</span><span class="op">)</span>item<span class="op">.</span><span class="fu">partitionKey</span><span class="op">));</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co">// Patch operations with dynamic values</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>List<span class="op">&lt;</span>PatchOperation<span class="op">&gt;</span> dynamicPatchOps <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>PatchOperation<span class="op">&gt;</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/title"</span><span class="op">,</span> <span class="st">"Patched dynamic title"</span><span class="op">),</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="st">"/metadata/lastUpdated"</span><span class="op">,</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">.</span><span class="fu">ToString</span><span class="op">(</span><span class="st">"O"</span><span class="op">)),</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/priority"</span><span class="op">,</span> <span class="st">"urgent"</span><span class="op">),</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Remove</span><span class="op">(</span><span class="st">"/tags/0"</span><span class="op">)</span> <span class="co">// Remove first tag</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">PatchItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dynamic-task-1"</span><span class="op">,</span> </span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">),</span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>    dynamicPatchOps<span class="op">);</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a><span class="co">// Create or update with ExpandoObject</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>dynamic expandoUpdate <span class="op">=</span> <span class="kw">new</span> <span class="fu">ExpandoObject</span><span class="op">();</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> expandoDict <span class="op">=</span> <span class="op">(</span>IDictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">object</span><span class="op">&gt;)</span>expandoUpdate<span class="op">;</span></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>expandoDict<span class="op">[</span><span class="st">"id"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"expando-task-1"</span><span class="op">;</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>expandoDict<span class="op">[</span><span class="st">"partitionKey"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"personal"</span><span class="op">;</span></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>expandoDict<span class="op">[</span><span class="st">"title"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"Updated ExpandoObject"</span><span class="op">;</span></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>expandoDict<span class="op">[</span><span class="st">"completed"</span><span class="op">]</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>expandoDict<span class="op">[</span><span class="st">"updatedAt"</span><span class="op">]</span> <span class="op">=</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">;</span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a><span class="co">// Add nested objects</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>expandoDict<span class="op">[</span><span class="st">"metadata"</span><span class="op">]</span> <span class="op">=</span> <span class="kw">new</span> Dictionary<span class="op">&lt;</span><span class="dt">string</span><span class="op">,</span> <span class="dt">object</span><span class="op">&gt;</span></span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">"lastModifiedBy"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"api"</span><span class="op">,</span></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">"version"</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="st">"changes"</span><span class="op">]</span> <span class="op">=</span> <span class="kw">new</span><span class="op">[]</span> <span class="op">{</span> <span class="st">"title"</span><span class="op">,</span> <span class="st">"status"</span> <span class="op">}</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">UpsertItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>    expandoUpdate<span class="op">,</span> </span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="updating-with-raw-json" class="level4">
<h4 class="anchored" data-anchor-id="updating-with-raw-json">Updating with Raw JSON</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Replace using JSON stream</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> updatedItemJson <span class="op">=</span> <span class="st">"""</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"id"</span><span class="op">:</span> <span class="st">"json-task-1"</span><span class="op">,</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"partitionKey"</span><span class="op">:</span> <span class="st">"personal"</span><span class="op">,</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"title"</span><span class="op">:</span> <span class="st">"Updated JSON task"</span><span class="op">,</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">"completed"</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">"priority"</span><span class="op">:</span> <span class="st">"high"</span><span class="op">,</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"tags"</span><span class="op">:</span> <span class="op">[</span><span class="st">"json"</span><span class="op">,</span> <span class="st">"updated"</span><span class="op">],</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"metadata"</span><span class="op">:</span> <span class="op">{</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"lastModified"</span><span class="op">:</span> <span class="st">"2025-01-15T15:30:00Z"</span><span class="op">,</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"modifiedBy"</span><span class="op">:</span> <span class="st">"api-service"</span><span class="op">,</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"version"</span><span class="op">:</span> <span class="dv">2</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"history"</span><span class="op">:</span> <span class="op">[</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>            <span class="st">"action"</span><span class="op">:</span> <span class="st">"created"</span><span class="op">,</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>            <span class="st">"timestamp"</span><span class="op">:</span> <span class="st">"2025-01-15T10:30:00Z"</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">},</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>            <span class="st">"action"</span><span class="op">:</span> <span class="st">"updated"</span><span class="op">,</span> </span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>            <span class="st">"timestamp"</span><span class="op">:</span> <span class="st">"2025-01-15T15:30:00Z"</span><span class="op">,</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>            <span class="st">"changes"</span><span class="op">:</span> <span class="op">[</span><span class="st">"title"</span><span class="op">,</span> <span class="st">"completed"</span><span class="op">,</span> <span class="st">"priority"</span><span class="op">]</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">]</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="st">""";</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="co">// Replace with JSON stream</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> MemoryStream replaceStream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>updatedItemJson<span class="op">));</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> ResponseMessage replaceResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReplaceItemStreamAsync</span><span class="op">(</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    replaceStream<span class="op">,</span> </span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"json-task-1"</span><span class="op">,</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="op">(</span>replaceResponse<span class="op">.</span><span class="fu">IsSuccessStatusCode</span><span class="op">)</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Updated JSON item with status: {replaceResponse.StatusCode}"</span><span class="op">);</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Request charge: {replaceResponse.Headers.RequestCharge} RUs"</span><span class="op">);</span></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a><span class="co">// Upsert with JSON stream (create if not exists, replace if exists)</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> MemoryStream upsertStream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>updatedItemJson<span class="op">));</span></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> ResponseMessage upsertResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">UpsertItemStreamAsync</span><span class="op">(</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>    upsertStream<span class="op">,</span> </span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a><span class="co">// Optimistic concurrency with ETag using JSON</span></span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>ItemRequestOptions etagOptions <span class="op">=</span> <span class="kw">new</span> ItemRequestOptions</span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>    IfMatchEtag <span class="op">=</span> <span class="st">"</span><span class="sc">\"</span><span class="st">some-etag-value</span><span class="sc">\"</span><span class="st">"</span> <span class="co">// Get this from a previous read operation</span></span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> MemoryStream concurrencyStream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>updatedItemJson<span class="op">));</span></span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">using</span> ResponseMessage concurrencyResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReplaceItemStreamAsync</span><span class="op">(</span></span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>        concurrencyStream<span class="op">,</span> </span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>        <span class="st">"json-task-1"</span><span class="op">,</span></span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">),</span></span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a>        etagOptions<span class="op">);</span></span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">PreconditionFailed</span><span class="op">)</span></span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item was modified by another process - ETag mismatch"</span><span class="op">);</span></span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="advanced-patch-operations" class="level4">
<h4 class="anchored" data-anchor-id="advanced-patch-operations">Advanced Patch Operations</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Complex patch operations with different data types</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>List<span class="op">&lt;</span>PatchOperation<span class="op">&gt;</span> advancedPatchOps <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>PatchOperation<span class="op">&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Replace operations</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/title"</span><span class="op">,</span> <span class="st">"Advanced patched title"</span><span class="op">),</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/completed"</span><span class="op">,</span> <span class="kw">true</span><span class="op">),</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/priority"</span><span class="op">,</span> <span class="st">"critical"</span><span class="op">),</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add operations</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="st">"/tags/-"</span><span class="op">,</span> <span class="st">"new-tag"</span><span class="op">),</span> <span class="co">// Add to end of array</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="st">"/metadata/patchedAt"</span><span class="op">,</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">),</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="st">"/assignee"</span><span class="op">,</span> <span class="kw">new</span> <span class="op">{</span> name <span class="op">=</span> <span class="st">"John Doe"</span><span class="op">,</span> id <span class="op">=</span> <span class="st">"user123"</span> <span class="op">}),</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Remove operations</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Remove</span><span class="op">(</span><span class="st">"/oldProperty"</span><span class="op">),</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Remove</span><span class="op">(</span><span class="st">"/tags/0"</span><span class="op">),</span> <span class="co">// Remove first element from array</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Increment operation (for numeric values)</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Increment</span><span class="op">(</span><span class="st">"/retryCount"</span><span class="op">,</span> <span class="dv">1</span><span class="op">),</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Set operation (like replace, but creates the path if it doesn't exist)</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>    PatchOperation<span class="op">.</span><span class="fu">Set</span><span class="op">(</span><span class="st">"/status/lastChecked"</span><span class="op">,</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">)</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="co">// Apply patch with conditional predicate</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>PatchItemRequestOptions advancedPatchOptions <span class="op">=</span> <span class="kw">new</span> PatchItemRequestOptions</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>    FilterPredicate <span class="op">=</span> <span class="st">"FROM c WHERE c.version &lt; 5"</span> <span class="co">// Only apply if version is less than 5</span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-31"><a href="#cb20-31" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb20-32"><a href="#cb20-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-33"><a href="#cb20-33" aria-hidden="true" tabindex="-1"></a>    ItemResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> patchResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">PatchItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb20-34"><a href="#cb20-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb20-35"><a href="#cb20-35" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">),</span></span>
<span id="cb20-36"><a href="#cb20-36" aria-hidden="true" tabindex="-1"></a>        advancedPatchOps<span class="op">,</span></span>
<span id="cb20-37"><a href="#cb20-37" aria-hidden="true" tabindex="-1"></a>        advancedPatchOptions<span class="op">);</span></span>
<span id="cb20-38"><a href="#cb20-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb20-39"><a href="#cb20-39" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Patch applied successfully. New version: {patchResponse.Resource.version}"</span><span class="op">);</span></span>
<span id="cb20-40"><a href="#cb20-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb20-41"><a href="#cb20-41" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">PreconditionFailed</span><span class="op">)</span></span>
<span id="cb20-42"><a href="#cb20-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-43"><a href="#cb20-43" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Patch condition not met - item version is &gt;= 5"</span><span class="op">);</span></span>
<span id="cb20-44"><a href="#cb20-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="performance-comparison-for-update-operations" class="level4">
<h4 class="anchored" data-anchor-id="performance-comparison-for-update-operations">Performance Comparison for Update Operations</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> stopwatch <span class="op">=</span> Stopwatch<span class="op">.</span><span class="fu">StartNew</span><span class="op">();</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Full replace with strongly-typed (type-safe but requires full object)</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> typedItem <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReadItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span><span class="st">"perf-typed"</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"test"</span><span class="op">));</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>typedItem<span class="op">.</span><span class="fu">Resource</span><span class="op">.</span><span class="fu">Title</span> <span class="op">=</span> <span class="st">"Updated"</span><span class="op">;</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">ReplaceItemAsync</span><span class="op">(</span>typedItem<span class="op">.</span><span class="fu">Resource</span><span class="op">,</span> <span class="st">"perf-typed"</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"test"</span><span class="op">));</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Strongly-typed replace: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Restart</span><span class="op">();</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Patch operation (most efficient for partial updates)</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">PatchItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"perf-typed"</span><span class="op">,</span> </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"test"</span><span class="op">),</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span><span class="op">[]</span> <span class="op">{</span> PatchOperation<span class="op">.</span><span class="fu">Replace</span><span class="op">(</span><span class="st">"/title"</span><span class="op">,</span> <span class="st">"Patched"</span><span class="op">)</span> <span class="op">});</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Patch operation: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Restart</span><span class="op">();</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a><span class="co">// 3. JSON stream replace (fastest for full updates, no serialization)</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> jsonUpdate <span class="op">=</span> <span class="st">"""{"</span>id<span class="st">": "</span>perf<span class="op">-</span>json<span class="st">", "</span>partitionKey<span class="st">": "</span>test<span class="st">", "</span>title<span class="st">": "</span>JSON Updated<span class="st">"}"""</span><span class="op">;</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="dt">var</span> stream <span class="op">=</span> <span class="kw">new</span> <span class="fu">MemoryStream</span><span class="op">(</span>Encoding<span class="op">.</span><span class="fu">UTF8</span><span class="op">.</span><span class="fu">GetBytes</span><span class="op">(</span>jsonUpdate<span class="op">));</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">ReplaceItemStreamAsync</span><span class="op">(</span>stream<span class="op">,</span> <span class="st">"perf-json"</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"test"</span><span class="op">));</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>stopwatch<span class="op">.</span><span class="fu">Stop</span><span class="op">();</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Raw JSON replace: {stopwatch.ElapsedMilliseconds}ms"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="delete" class="level3">
<h3 class="anchored" data-anchor-id="delete">Delete</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Delete an item</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="kw">try</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>    await container<span class="op">.</span><span class="fu">DeleteItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>        <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">));</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item deleted successfully"</span><span class="op">);</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">NotFound</span><span class="op">)</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span><span class="st">"Item not found"</span><span class="op">);</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Delete with optimistic concurrency</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> etag <span class="op">=</span> <span class="st">"</span><span class="sc">\"</span><span class="st">00000000-0000-0000-0000-000000000000</span><span class="sc">\"</span><span class="st">"</span><span class="op">;</span> <span class="co">// ETag from previous read</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>ItemRequestOptions deleteOptions <span class="op">=</span> <span class="kw">new</span> ItemRequestOptions</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>    IfMatchEtag <span class="op">=</span> etag</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>await container<span class="op">.</span><span class="fu">DeleteItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"task-1"</span><span class="op">,</span> </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">),</span></span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>    deleteOptions<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="advanced-patterns" class="level2">
<h2 class="anchored" data-anchor-id="advanced-patterns">üöÄ Advanced Patterns</h2>
<section id="bulk-operations" class="level3">
<h3 class="anchored" data-anchor-id="bulk-operations">Bulk Operations</h3>
<p>For high-throughput scenarios, Cosmos DB provides bulk operations through parallel tasks:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Prepare items to create</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>List<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> itemsToCreate <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>TodoItem<span class="op">&gt;();</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">100</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    itemsToCreate<span class="op">.</span><span class="fu">Add</span><span class="op">(</span><span class="kw">new</span> TodoItem</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        Id <span class="op">=</span> $<span class="st">"bulk-task-{i}"</span><span class="op">,</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>        PartitionKey <span class="op">=</span> <span class="st">"bulk"</span><span class="op">,</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>        Title <span class="op">=</span> $<span class="st">"Bulk created item {i}"</span><span class="op">,</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>        Completed <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="co">// Create a list of tasks for parallel execution</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>List<span class="op">&lt;</span>Task<span class="op">&gt;</span> concurrentTasks <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>Task<span class="op">&gt;();</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> <span class="op">(</span><span class="dt">var</span> item <span class="kw">in</span> itemsToCreate<span class="op">)</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>    concurrentTasks<span class="op">.</span><span class="fu">Add</span><span class="op">(</span>container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">(</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>        item<span class="op">,</span> </span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>item<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">))</span></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">ContinueWith</span><span class="op">(</span>itemTask <span class="op">=&gt;</span></span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> <span class="op">(</span>itemTask<span class="op">.</span><span class="fu">IsCompletedSuccessfully</span><span class="op">)</span></span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>                ItemResponse<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> response <span class="op">=</span> itemTask<span class="op">.</span><span class="fu">Result</span><span class="op">;</span></span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>                Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Created item {item.Id}: {response.RequestCharge} RUs"</span><span class="op">);</span></span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>            <span class="kw">else</span></span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a>                AggregateException exceptions <span class="op">=</span> itemTask<span class="op">.</span><span class="fu">Exception</span><span class="op">;</span></span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a>                Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Failed to create item {item.Id}: {exceptions.InnerException.Message}"</span><span class="op">);</span></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}));</span></span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="co">// Wait for all operations to complete</span></span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a>await Task<span class="op">.</span><span class="fu">WhenAll</span><span class="op">(</span>concurrentTasks<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="change-feed-processing" class="level3">
<h3 class="anchored" data-anchor-id="change-feed-processing">Change Feed Processing</h3>
<p>The Change Feed is a powerful feature that provides a log of all changes to your containers:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Basic change feed processor</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>Container leaseContainer <span class="op">=</span> await database<span class="op">.</span><span class="fu">CreateContainerIfNotExistsAsync</span><span class="op">(</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"leases"</span><span class="op">,</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"/id"</span><span class="op">,</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">400</span><span class="op">);</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> changeFeedProcessor <span class="op">=</span> container<span class="op">.</span><span class="fu">GetChangeFeedProcessorBuilder</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    processorName<span class="op">:</span> <span class="st">"todoChanges"</span><span class="op">,</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    onChangesDelegate<span class="op">:</span> HandleChangesAsync<span class="op">)</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WithInstanceName</span><span class="op">(</span><span class="st">"workerInstance1"</span><span class="op">)</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WithLeaseContainer</span><span class="op">(</span>leaseContainer<span class="op">)</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">Build</span><span class="op">();</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>await changeFeedProcessor<span class="op">.</span><span class="fu">StartAsync</span><span class="op">();</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">// Handle changes</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>async Task <span class="fu">HandleChangesAsync</span><span class="op">(</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    ChangeFeedProcessorContext context<span class="op">,</span> </span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    IReadOnlyCollection<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> changes<span class="op">,</span> </span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    CancellationToken cancellationToken<span class="op">)</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Detected {changes.Count} document changes"</span><span class="op">);</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="op">(</span>TodoItem item <span class="kw">in</span> changes<span class="op">)</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>        Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Changed item: {item.Id}, Title: {item.Title}"</span><span class="op">);</span></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Process changes - update cache, trigger workflows, etc.</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Later - stop the processor</span></span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>await changeFeedProcessor<span class="op">.</span><span class="fu">StopAsync</span><span class="op">();</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="server-side-programming" class="level3">
<h3 class="anchored" data-anchor-id="server-side-programming">Server-Side Programming</h3>
<p>CosmosDB supports stored procedures, triggers, and UDFs for server-side logic:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">// 1. Create a stored procedure</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> sprocId <span class="op">=</span> <span class="st">"createTodoItem"</span><span class="op">;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> sprocBody <span class="op">=</span> @<span class="st">"</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>function <span class="fu">createTodoItem</span><span class="op">(</span>itemBody<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">var</span> context <span class="op">=</span> <span class="fu">getContext</span><span class="op">();</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">var</span> container <span class="op">=</span> context<span class="op">.</span><span class="fu">getCollection</span><span class="op">();</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">var</span> response <span class="op">=</span> context<span class="op">.</span><span class="fu">getResponse</span><span class="op">();</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Generate ID if not provided</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="op">(!</span>itemBody<span class="op">.</span><span class="fu">id</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>        itemBody<span class="op">.</span><span class="fu">id</span> <span class="op">=</span> <span class="fu">generateGuid</span><span class="op">();</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Add creation timestamp</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    itemBody<span class="op">.</span><span class="fu">createdAt</span> <span class="op">=</span> <span class="kw">new</span> <span class="fu">Date</span><span class="op">().</span><span class="fu">toISOString</span><span class="op">();</span></span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Create document</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">var</span> accepted <span class="op">=</span> container<span class="op">.</span><span class="fu">createDocument</span><span class="op">(</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>        container<span class="op">.</span><span class="fu">getSelfLink</span><span class="op">(),</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>        itemBody<span class="op">,</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>        <span class="fu">function</span><span class="op">(</span>err<span class="op">,</span> documentCreated<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>            <span class="kw">if</span> <span class="op">(</span>err<span class="op">)</span> <span class="kw">throw</span> <span class="kw">new</span> <span class="fu">Error</span><span class="op">(</span>'Error<span class="op">:</span> ' <span class="op">+</span> err<span class="op">.</span><span class="fu">message</span><span class="op">);</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>            response<span class="op">.</span><span class="fu">setBody</span><span class="op">(</span>documentCreated<span class="op">);</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">);</span></span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="op">(!</span>accepted<span class="op">)</span> <span class="kw">throw</span> <span class="kw">new</span> <span class="fu">Error</span><span class="op">(</span>'The item create was not accepted'<span class="op">);</span></span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    function <span class="fu">generateGuid</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> 'xxxxxxxx<span class="op">-</span>xxxx<span class="dv">-4</span>xxx<span class="op">-</span>yxxx<span class="op">-</span>xxxxxxxxxxxx'<span class="op">.</span><span class="fu">replace</span><span class="op">(/[</span>xy<span class="op">]/</span>g<span class="op">,</span> <span class="fu">function</span><span class="op">(</span>c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>            <span class="dt">var</span> r <span class="op">=</span> Math<span class="op">.</span><span class="fu">random</span><span class="op">()</span> <span class="op">*</span> <span class="dv">16</span> <span class="op">|</span> <span class="dv">0</span><span class="op">,</span> v <span class="op">=</span> c <span class="op">==</span> <span class="ch">'x'</span> <span class="op">?</span> r <span class="op">:</span> <span class="op">(</span>r <span class="op">&amp;</span> <span class="bn">0x3</span> <span class="op">|</span> <span class="bn">0x8</span><span class="op">);</span></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> v<span class="op">.</span><span class="fu">toString</span><span class="op">(</span><span class="dv">16</span><span class="op">);</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">});</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span><span class="st">";</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>StoredProcedureResponse response <span class="op">=</span> await container<span class="op">.</span><span class="fu">Scripts</span><span class="op">.</span><span class="fu">CreateStoredProcedureAsync</span><span class="op">(</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> StoredProcedureProperties</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>        Id <span class="op">=</span> sprocId<span class="op">,</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>        Body <span class="op">=</span> sprocBody</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a><span class="co">// 2. Execute a stored procedure</span></span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>dynamic todoItem <span class="op">=</span> <span class="kw">new</span></span>
<span id="cb25-46"><a href="#cb25-46" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb25-47"><a href="#cb25-47" aria-hidden="true" tabindex="-1"></a>    partitionKey <span class="op">=</span> <span class="st">"personal"</span><span class="op">,</span></span>
<span id="cb25-48"><a href="#cb25-48" aria-hidden="true" tabindex="-1"></a>    title <span class="op">=</span> <span class="st">"Learn about stored procedures"</span><span class="op">,</span></span>
<span id="cb25-49"><a href="#cb25-49" aria-hidden="true" tabindex="-1"></a>    completed <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb25-50"><a href="#cb25-50" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb25-51"><a href="#cb25-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-52"><a href="#cb25-52" aria-hidden="true" tabindex="-1"></a>StoredProcedureExecuteResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> executeResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">Scripts</span><span class="op">.</span><span class="fu">ExecuteStoredProcedureAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb25-53"><a href="#cb25-53" aria-hidden="true" tabindex="-1"></a>    sprocId<span class="op">,</span></span>
<span id="cb25-54"><a href="#cb25-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"personal"</span><span class="op">),</span></span>
<span id="cb25-55"><a href="#cb25-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span><span class="op">[]</span> <span class="op">{</span> todoItem <span class="op">});</span></span>
<span id="cb25-56"><a href="#cb25-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-57"><a href="#cb25-57" aria-hidden="true" tabindex="-1"></a>dynamic createdItem <span class="op">=</span> executeResponse<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb25-58"><a href="#cb25-58" aria-hidden="true" tabindex="-1"></a>Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Created item ID: {createdItem.id}"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="retry-policies" class="level3">
<h3 class="anchored" data-anchor-id="retry-policies">Retry Policies</h3>
<p>The Cosmos SDK has built-in retry policies, but you can customize them:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Custom retry policy for handling rate limiting (429) errors</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>CosmosClientOptions options <span class="op">=</span> <span class="kw">new</span> CosmosClientOptions</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    MaxRetryAttemptsOnRateLimitedRequests <span class="op">=</span> <span class="dv">9</span><span class="op">,</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    MaxRetryWaitTimeOnRateLimitedRequests <span class="op">=</span> TimeSpan<span class="op">.</span><span class="fu">FromSeconds</span><span class="op">(</span><span class="dv">30</span><span class="op">)</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>endpoint<span class="op">,</span> key<span class="op">,</span> options<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For more complex scenarios, you can use Polly:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Polly<span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Define policy</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> retryPolicy <span class="op">=</span> Policy</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">Handle</span><span class="op">&lt;</span>CosmosException<span class="op">&gt;(</span>ex <span class="op">=&gt;</span> ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">TooManyRequests</span><span class="op">)</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WaitAndRetryAsync</span><span class="op">(</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        retryCount<span class="op">:</span> <span class="dv">5</span><span class="op">,</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>        sleepDurationProvider<span class="op">:</span> <span class="op">(</span>attempt<span class="op">)</span> <span class="op">=&gt;</span> TimeSpan<span class="op">.</span><span class="fu">FromSeconds</span><span class="op">(</span>Math<span class="op">.</span><span class="fu">Pow</span><span class="op">(</span><span class="dv">2</span><span class="op">,</span> attempt<span class="op">)),</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>        onRetry<span class="op">:</span> <span class="op">(</span>exception<span class="op">,</span> timespan<span class="op">,</span> retryCount<span class="op">,</span> context<span class="op">)</span> <span class="op">=&gt;</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>            Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>$<span class="st">"Retry {retryCount} after {timespan.TotalSeconds}s due to {exception.Message}"</span><span class="op">);</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">});</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co">// Execute with policy</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>await retryPolicy<span class="op">.</span><span class="fu">ExecuteAsync</span><span class="op">(</span><span class="fu">async</span> <span class="op">()</span> <span class="op">=&gt;</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">(</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>        newItem<span class="op">,</span> </span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>        <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>newItem<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">));</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a><span class="op">});</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="dependency-injection-setup" class="level3">
<h3 class="anchored" data-anchor-id="dependency-injection-setup">Dependency Injection Setup</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Program.cs or Startup.cs</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Microsoft<span class="op">.</span><span class="fu">Azure</span><span class="op">.</span><span class="fu">Cosmos</span><span class="op">;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Microsoft<span class="op">.</span><span class="fu">Extensions</span><span class="op">.</span><span class="fu">DependencyInjection</span><span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">ConfigureServices</span><span class="op">(</span>IServiceCollection services<span class="op">)</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Register CosmosClient as singleton</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    services<span class="op">.</span><span class="fu">AddSingleton</span><span class="op">(</span>serviceProvider <span class="op">=&gt;</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>        <span class="dt">var</span> configuration <span class="op">=</span> serviceProvider<span class="op">.</span><span class="fu">GetRequiredService</span><span class="op">&lt;</span>IConfiguration<span class="op">&gt;();</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>            configuration<span class="op">[</span><span class="st">"CosmosDb:EndpointUrl"</span><span class="op">],</span> </span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>            configuration<span class="op">[</span><span class="st">"CosmosDb:PrimaryKey"</span><span class="op">],</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>            <span class="kw">new</span> CosmosClientOptions</span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>                SerializerOptions <span class="op">=</span> <span class="kw">new</span> CosmosSerializationOptions</span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>                <span class="op">{</span></span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>                    PropertyNamingPolicy <span class="op">=</span> CosmosPropertyNamingPolicy<span class="op">.</span><span class="fu">CamelCase</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>            <span class="op">});</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Register database and container clients</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>    services<span class="op">.</span><span class="fu">AddSingleton</span><span class="op">(</span>serviceProvider <span class="op">=&gt;</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">var</span> cosmosClient <span class="op">=</span> serviceProvider<span class="op">.</span><span class="fu">GetRequiredService</span><span class="op">&lt;</span>CosmosClient<span class="op">&gt;();</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> cosmosClient<span class="op">.</span><span class="fu">GetDatabase</span><span class="op">(</span><span class="st">"MyDatabase"</span><span class="op">);</span></span>
<span id="cb28-28"><a href="#cb28-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb28-29"><a href="#cb28-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-30"><a href="#cb28-30" aria-hidden="true" tabindex="-1"></a>    services<span class="op">.</span><span class="fu">AddSingleton</span><span class="op">(</span>serviceProvider <span class="op">=&gt;</span></span>
<span id="cb28-31"><a href="#cb28-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb28-32"><a href="#cb28-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">var</span> database <span class="op">=</span> serviceProvider<span class="op">.</span><span class="fu">GetRequiredService</span><span class="op">&lt;</span>Database<span class="op">&gt;();</span></span>
<span id="cb28-33"><a href="#cb28-33" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> database<span class="op">.</span><span class="fu">GetContainer</span><span class="op">(</span><span class="st">"TodoItems"</span><span class="op">);</span></span>
<span id="cb28-34"><a href="#cb28-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb28-35"><a href="#cb28-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-36"><a href="#cb28-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Register your services</span></span>
<span id="cb28-37"><a href="#cb28-37" aria-hidden="true" tabindex="-1"></a>    services<span class="op">.</span><span class="fu">AddScoped</span><span class="op">&lt;</span>ITodoService<span class="op">,</span> TodoService<span class="op">&gt;();</span></span>
<span id="cb28-38"><a href="#cb28-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb28-39"><a href="#cb28-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-40"><a href="#cb28-40" aria-hidden="true" tabindex="-1"></a><span class="co">// Service implementation</span></span>
<span id="cb28-41"><a href="#cb28-41" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> ITodoService</span>
<span id="cb28-42"><a href="#cb28-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb28-43"><a href="#cb28-43" aria-hidden="true" tabindex="-1"></a>    Task<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> <span class="fu">GetItemAsync</span><span class="op">(</span><span class="dt">string</span> id<span class="op">,</span> <span class="dt">string</span> partitionKey<span class="op">);</span></span>
<span id="cb28-44"><a href="#cb28-44" aria-hidden="true" tabindex="-1"></a>    Task<span class="op">&lt;</span>IEnumerable<span class="op">&lt;</span>TodoItem<span class="op">&gt;&gt;</span> <span class="fu">GetIncompleteItemsAsync</span><span class="op">(</span><span class="dt">string</span> partitionKey<span class="op">);</span></span>
<span id="cb28-45"><a href="#cb28-45" aria-hidden="true" tabindex="-1"></a>    Task<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> <span class="fu">CreateItemAsync</span><span class="op">(</span>TodoItem item<span class="op">);</span></span>
<span id="cb28-46"><a href="#cb28-46" aria-hidden="true" tabindex="-1"></a>    Task <span class="fu">UpdateItemAsync</span><span class="op">(</span>TodoItem item<span class="op">);</span></span>
<span id="cb28-47"><a href="#cb28-47" aria-hidden="true" tabindex="-1"></a>    Task <span class="fu">DeleteItemAsync</span><span class="op">(</span><span class="dt">string</span> id<span class="op">,</span> <span class="dt">string</span> partitionKey<span class="op">);</span></span>
<span id="cb28-48"><a href="#cb28-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb28-49"><a href="#cb28-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-50"><a href="#cb28-50" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> TodoService <span class="op">:</span> ITodoService</span>
<span id="cb28-51"><a href="#cb28-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb28-52"><a href="#cb28-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">private</span> <span class="kw">readonly</span> Container _container<span class="op">;</span></span>
<span id="cb28-53"><a href="#cb28-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-54"><a href="#cb28-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">TodoService</span><span class="op">(</span>Container container<span class="op">)</span></span>
<span id="cb28-55"><a href="#cb28-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb28-56"><a href="#cb28-56" aria-hidden="true" tabindex="-1"></a>        _container <span class="op">=</span> container<span class="op">;</span></span>
<span id="cb28-57"><a href="#cb28-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb28-58"><a href="#cb28-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-59"><a href="#cb28-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> async Task<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> <span class="fu">GetItemAsync</span><span class="op">(</span><span class="dt">string</span> id<span class="op">,</span> <span class="dt">string</span> partitionKey<span class="op">)</span></span>
<span id="cb28-60"><a href="#cb28-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb28-61"><a href="#cb28-61" aria-hidden="true" tabindex="-1"></a>        <span class="kw">try</span></span>
<span id="cb28-62"><a href="#cb28-62" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb28-63"><a href="#cb28-63" aria-hidden="true" tabindex="-1"></a>            <span class="dt">var</span> response <span class="op">=</span> await _container<span class="op">.</span><span class="fu">ReadItemAsync</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb28-64"><a href="#cb28-64" aria-hidden="true" tabindex="-1"></a>                id<span class="op">,</span> </span>
<span id="cb28-65"><a href="#cb28-65" aria-hidden="true" tabindex="-1"></a>                <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>partitionKey<span class="op">));</span></span>
<span id="cb28-66"><a href="#cb28-66" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb28-67"><a href="#cb28-67" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> response<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb28-68"><a href="#cb28-68" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb28-69"><a href="#cb28-69" aria-hidden="true" tabindex="-1"></a>        <span class="kw">catch</span> <span class="op">(</span>CosmosException ex<span class="op">)</span> <span class="fu">when</span> <span class="op">(</span>ex<span class="op">.</span><span class="fu">StatusCode</span> <span class="op">==</span> HttpStatusCode<span class="op">.</span><span class="fu">NotFound</span><span class="op">)</span></span>
<span id="cb28-70"><a href="#cb28-70" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb28-71"><a href="#cb28-71" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb28-72"><a href="#cb28-72" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb28-73"><a href="#cb28-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb28-74"><a href="#cb28-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-75"><a href="#cb28-75" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> async Task<span class="op">&lt;</span>IEnumerable<span class="op">&lt;</span>TodoItem<span class="op">&gt;&gt;</span> <span class="fu">GetIncompleteItemsAsync</span><span class="op">(</span><span class="dt">string</span> partitionKey<span class="op">)</span></span>
<span id="cb28-76"><a href="#cb28-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb28-77"><a href="#cb28-77" aria-hidden="true" tabindex="-1"></a>        <span class="dt">var</span> query <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span></span>
<span id="cb28-78"><a href="#cb28-78" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SELECT * FROM c WHERE c.partitionKey = @pk AND c.completed = false"</span><span class="op">)</span></span>
<span id="cb28-79"><a href="#cb28-79" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">WithParameter</span><span class="op">(</span><span class="st">"@pk"</span><span class="op">,</span> partitionKey<span class="op">);</span></span>
<span id="cb28-80"><a href="#cb28-80" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb28-81"><a href="#cb28-81" aria-hidden="true" tabindex="-1"></a>        <span class="dt">var</span> results <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>TodoItem<span class="op">&gt;();</span></span>
<span id="cb28-82"><a href="#cb28-82" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb28-83"><a href="#cb28-83" aria-hidden="true" tabindex="-1"></a>        <span class="dt">var</span> iterator <span class="op">=</span> _container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>TodoItem<span class="op">&gt;(</span></span>
<span id="cb28-84"><a href="#cb28-84" aria-hidden="true" tabindex="-1"></a>            query<span class="op">,</span> </span>
<span id="cb28-85"><a href="#cb28-85" aria-hidden="true" tabindex="-1"></a>            requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions</span>
<span id="cb28-86"><a href="#cb28-86" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb28-87"><a href="#cb28-87" aria-hidden="true" tabindex="-1"></a>                PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>partitionKey<span class="op">)</span></span>
<span id="cb28-88"><a href="#cb28-88" aria-hidden="true" tabindex="-1"></a>            <span class="op">});</span></span>
<span id="cb28-89"><a href="#cb28-89" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb28-90"><a href="#cb28-90" aria-hidden="true" tabindex="-1"></a>        <span class="kw">while</span> <span class="op">(</span>iterator<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb28-91"><a href="#cb28-91" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb28-92"><a href="#cb28-92" aria-hidden="true" tabindex="-1"></a>            <span class="dt">var</span> response <span class="op">=</span> await iterator<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb28-93"><a href="#cb28-93" aria-hidden="true" tabindex="-1"></a>            results<span class="op">.</span><span class="fu">AddRange</span><span class="op">(</span>response<span class="op">);</span></span>
<span id="cb28-94"><a href="#cb28-94" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb28-95"><a href="#cb28-95" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb28-96"><a href="#cb28-96" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> results<span class="op">;</span></span>
<span id="cb28-97"><a href="#cb28-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb28-98"><a href="#cb28-98" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-99"><a href="#cb28-99" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> async Task<span class="op">&lt;</span>TodoItem<span class="op">&gt;</span> <span class="fu">CreateItemAsync</span><span class="op">(</span>TodoItem item<span class="op">)</span></span>
<span id="cb28-100"><a href="#cb28-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb28-101"><a href="#cb28-101" aria-hidden="true" tabindex="-1"></a>        <span class="dt">var</span> response <span class="op">=</span> await _container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">(</span></span>
<span id="cb28-102"><a href="#cb28-102" aria-hidden="true" tabindex="-1"></a>            item<span class="op">,</span> </span>
<span id="cb28-103"><a href="#cb28-103" aria-hidden="true" tabindex="-1"></a>            <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>item<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">));</span></span>
<span id="cb28-104"><a href="#cb28-104" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb28-105"><a href="#cb28-105" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> response<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb28-106"><a href="#cb28-106" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb28-107"><a href="#cb28-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-108"><a href="#cb28-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Additional methods...</span></span>
<span id="cb28-109"><a href="#cb28-109" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="authentication-approaches" class="level2">
<h2 class="anchored" data-anchor-id="authentication-approaches">üîê Authentication Approaches</h2>
<p>Azure Cosmos DB supports multiple authentication methods, each with its own security characteristics and use cases:</p>
<section id="primary-key-authentication-connection-string" class="level3">
<h3 class="anchored" data-anchor-id="primary-key-authentication-connection-string">1. <strong>Primary Key Authentication (Connection String)</strong></h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Basic endpoint and key authentication</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> endpoint <span class="op">=</span> <span class="st">"https://your-account.documents.azure.com:443/"</span><span class="op">;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> primaryKey <span class="op">=</span> <span class="st">"your-primary-key"</span><span class="op">;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>endpoint<span class="op">,</span> primaryKey<span class="op">);</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Alternative: Connection string</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> connectionString <span class="op">=</span> <span class="st">"AccountEndpoint=https://your-account.documents.azure.com:443/;AccountKey=your-primary-key;"</span><span class="op">;</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>connectionString<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Best for</strong>: Development environments, simple applications, single-service scenarios. <strong>Security considerations</strong>: Keys provide full access to the account and should be carefully protected.</p>
</section>
<section id="azure-active-directory-aad-authentication" class="level3">
<h3 class="anchored" data-anchor-id="azure-active-directory-aad-authentication">2. <strong>Azure Active Directory (AAD) Authentication</strong></h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Azure<span class="op">.</span><span class="fu">Identity</span><span class="op">;</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Using Managed Identity</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> credential <span class="op">=</span> <span class="kw">new</span> <span class="fu">DefaultAzureCredential</span><span class="op">();</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>endpoint<span class="op">,</span> credential<span class="op">);</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="co">// Using Service Principal</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> servicePrincipalCredential <span class="op">=</span> <span class="kw">new</span> <span class="fu">ClientSecretCredential</span><span class="op">(</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    tenantId<span class="op">:</span> <span class="st">"your-tenant-id"</span><span class="op">,</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    clientId<span class="op">:</span> <span class="st">"your-client-id"</span><span class="op">,</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    clientSecret<span class="op">:</span> <span class="st">"your-client-secret"</span><span class="op">);</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>endpoint<span class="op">,</span> servicePrincipalCredential<span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Best for</strong>: Production environments, multi-service applications, Azure-hosted services. <strong>Security considerations</strong>: No secrets in code, integrated with Azure RBAC, supports key rotation.</p>
</section>
<section id="resource-token-authentication" class="level3">
<h3 class="anchored" data-anchor-id="resource-token-authentication">3. <strong>Resource Token Authentication</strong></h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">// First, create a permission (typically on a server with master key)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> permissionResponse <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreatePermissionAsync</span><span class="op">(</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> PermissionProperties</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>        Id <span class="op">=</span> <span class="st">"read-only-permission"</span><span class="op">,</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>        PermissionMode <span class="op">=</span> PermissionMode<span class="op">.</span><span class="fu">Read</span><span class="op">,</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>        ResourceLink <span class="op">=</span> container<span class="op">.</span><span class="fu">Link</span><span class="op">,</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        ResourcePartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"user123"</span><span class="op">)</span></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="dt">string</span> resourceToken <span class="op">=</span> permissionResponse<span class="op">.</span><span class="fu">Resource</span><span class="op">.</span><span class="fu">Token</span><span class="op">;</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="co">// On client side - use the limited resource token</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> resourceTokenCosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    endpoint<span class="op">,</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    resourceToken<span class="op">,</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> CosmosClientOptions</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>        ApplicationRegion <span class="op">=</span> <span class="st">"West US 2"</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Best for</strong>: Client-side applications, multi-tenant scenarios, granular access control. <strong>Security considerations</strong>: Fine-grained access control, short-lived tokens, limited to specific containers/partitions.</p>
</section>
<section id="authentication-comparison" class="level3">
<h3 class="anchored" data-anchor-id="authentication-comparison">Authentication Comparison</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 17%">
<col style="width: 29%">
<col style="width: 21%">
<col style="width: 31%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Security Level</th>
<th>Best For</th>
<th>Considerations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Primary Key</strong></td>
<td>‚ö†Ô∏è Basic</td>
<td>Development, Simple apps</td>
<td>Full account access, difficult to rotate</td>
</tr>
<tr class="even">
<td><strong>AAD Authentication</strong></td>
<td>‚úÖ High</td>
<td>Production, Azure services</td>
<td>No secrets in code, easy to manage access</td>
</tr>
<tr class="odd">
<td><strong>Managed Identity</strong></td>
<td>‚úÖ Highest</td>
<td>Azure-hosted services</td>
<td>No secrets anywhere, automatic rotation</td>
</tr>
<tr class="even">
<td><strong>Resource Tokens</strong></td>
<td>‚úÖ High</td>
<td>Client apps, Multi-tenant</td>
<td>Fine-grained, time-limited access</td>
</tr>
</tbody>
</table>
</section>
<section id="best-practices" class="level3">
<h3 class="anchored" data-anchor-id="best-practices">Best Practices</h3>
<ol type="1">
<li><strong>Always use Managed Identity</strong> for Azure-hosted applications</li>
<li><strong>Never store primary keys</strong> in code or configuration files</li>
<li><strong>Use Azure Key Vault</strong> to securely store connection strings when needed</li>
<li><strong>Apply Principle of Least Privilege</strong> with resource tokens or RBAC</li>
<li><strong>Implement token caching</strong> when using resource tokens</li>
<li><strong>Set up alerts</strong> for unusual access patterns</li>
<li><strong>Regularly rotate keys</strong> to limit exposure from potential leaks</li>
</ol>
</section>
</section>
<section id="migration-from-legacy-sdk" class="level2">
<h2 class="anchored" data-anchor-id="migration-from-legacy-sdk">üîÑ Migration from Legacy SDK</h2>
<p>Azure Cosmos DB has evolved significantly, and several legacy SDKs have been <strong>deprecated and discontinued</strong>. Understanding the migration path is crucial for maintaining secure, performant applications.</p>
<section id="legacy-sdks-overview" class="level3">
<h3 class="anchored" data-anchor-id="legacy-sdks-overview">Legacy SDKs Overview</h3>
<section id="microsoft.azure.documentdb-sql-api-legacy" class="level4">
<h4 class="anchored" data-anchor-id="microsoft.azure.documentdb-sql-api-legacy"><strong>1. Microsoft.Azure.DocumentDB (SQL API Legacy)</strong></h4>
<p>The original SDK for Cosmos DB SQL API, discontinued in March 2020.</p>
</section>
<section id="microsoft.azure.cosmos.table-table-api-legacy" class="level4">
<h4 class="anchored" data-anchor-id="microsoft.azure.cosmos.table-table-api-legacy"><strong>2. Microsoft.Azure.Cosmos.Table (Table API Legacy)</strong></h4>
<p>A specialized SDK for accessing Cosmos DB Table API, based on Azure Table Storage patterns. <strong>Also deprecated</strong> in favor of the unified <code>Microsoft.Azure.Cosmos</code> approach.</p>
</section>
<section id="windowsazure.storage-azure-table-storage" class="level4">
<h4 class="anchored" data-anchor-id="windowsazure.storage-azure-table-storage"><strong>3. WindowsAzure.Storage (Azure Table Storage)</strong></h4>
<p>The original Azure Table Storage SDK that many developers used before Cosmos DB Table API existed.</p>
</section>
</section>
<section id="why-legacy-sdks-were-discontinued" class="level3">
<h3 class="anchored" data-anchor-id="why-legacy-sdks-were-discontinued">Why Legacy SDKs Were Discontinued</h3>
<section id="architecture-design-issues" class="level4">
<h4 class="anchored" data-anchor-id="architecture-design-issues"><strong>1. Architecture &amp; Design Issues</strong></h4>
<ul>
<li><strong>Callback-Based Patterns</strong>: Legacy SDKs were designed around callback patterns predating modern async/await</li>
<li><strong>Inadequate Error Handling</strong>: Limited status code mapping and retry policies</li>
<li><strong>Complex Object Model</strong>: Overly complex inheritance chains and abstractions</li>
<li><strong>Fragmented APIs</strong>: Different SDKs for different APIs led to inconsistent developer experience</li>
</ul>
</section>
<section id="modern-development-standards" class="level4">
<h4 class="anchored" data-anchor-id="modern-development-standards"><strong>2. Modern Development Standards</strong></h4>
<ul>
<li><strong>Async/Await Patterns</strong>: Modern applications require efficient async operations from the ground up</li>
<li><strong>Performance</strong>: Legacy SDKs had performance bottlenecks and inefficient memory usage</li>
<li><strong>Target Framework Support</strong>: Limited support for newer .NET versions and .NET Core</li>
<li><strong>Unified Experience</strong>: Microsoft moved towards a single, unified SDK approach</li>
</ul>
</section>
<section id="service-evolution" class="level4">
<h4 class="anchored" data-anchor-id="service-evolution"><strong>3. Service Evolution</strong></h4>
<ul>
<li><strong>New Features</strong>: Legacy SDKs couldn‚Äôt support newer features like change feed, bulk operations, and AAD auth</li>
<li><strong>Consistency</strong>: Microsoft moved to consistent Azure SDK guidelines across all services</li>
<li><strong>Maintenance</strong>: Supporting multiple SDKs was inefficient and led to inconsistencies</li>
<li><strong>Multi-Model Support</strong>: Modern SDK supports multiple APIs from a single package</li>
</ul>
</section>
</section>
<section id="comprehensive-library-comparison" class="level3">
<h3 class="anchored" data-anchor-id="comprehensive-library-comparison">Comprehensive Library Comparison</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 25%">
<col style="width: 26%">
<col style="width: 17%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Feature</th>
<th><code>Microsoft.Azure.DocumentDB</code></th>
<th><code>Microsoft.Azure.Cosmos.Table</code></th>
<th><code>Azure.Data.Tables</code></th>
<th><code>Microsoft.Azure.Cosmos</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Status</strong></td>
<td>‚ùå Deprecated (2020)</td>
<td>‚ùå Deprecated (2021)</td>
<td>‚úÖ Active (Table Storage)</td>
<td>‚úÖ Active &amp; Recommended</td>
</tr>
<tr class="even">
<td><strong>Target Service</strong></td>
<td>Cosmos DB SQL API</td>
<td>Cosmos DB Table API</td>
<td>Azure Table Storage</td>
<td>All Cosmos DB APIs</td>
</tr>
<tr class="odd">
<td><strong>API Design</strong></td>
<td>Callback-heavy</td>
<td>Table Storage patterns</td>
<td>Modern async/await</td>
<td>Modern async/await</td>
</tr>
<tr class="even">
<td><strong>Performance</strong></td>
<td>Poor</td>
<td>Moderate</td>
<td>Good</td>
<td>Excellent</td>
</tr>
<tr class="odd">
<td><strong>Bulk Operations</strong></td>
<td>Limited</td>
<td>Limited</td>
<td>Basic</td>
<td>Advanced</td>
</tr>
<tr class="even">
<td><strong>Authentication</strong></td>
<td>Primary key only</td>
<td>Primary key + SAS</td>
<td>AAD + SAS + Key</td>
<td>AAD + Managed Identity + Key</td>
</tr>
<tr class="odd">
<td><strong>.NET Core Support</strong></td>
<td>Limited</td>
<td>Full</td>
<td>Full</td>
<td>Full</td>
</tr>
<tr class="even">
<td><strong>Multi-Model</strong></td>
<td>SQL only</td>
<td>Table only</td>
<td>Table only</td>
<td>SQL, Table, MongoDB, etc.</td>
</tr>
<tr class="odd">
<td><strong>Change Feed</strong></td>
<td>Basic</td>
<td>‚ùå Not supported</td>
<td>‚ùå Not supported</td>
<td>Comprehensive</td>
</tr>
<tr class="even">
<td><strong>Global Distribution</strong></td>
<td>Basic</td>
<td>Basic</td>
<td>‚ùå Limited</td>
<td>Advanced</td>
</tr>
<tr class="odd">
<td><strong>Diagnostics</strong></td>
<td>Limited</td>
<td>Limited</td>
<td>Good</td>
<td>Excellent</td>
</tr>
</tbody>
</table>
</section>
<section id="migration-paths-code-examples" class="level3">
<h3 class="anchored" data-anchor-id="migration-paths-code-examples">Migration Paths &amp; Code Examples</h3>
<section id="path-1-from-microsoft.azure.documentdb-sql-api" class="level4">
<h4 class="anchored" data-anchor-id="path-1-from-microsoft.azure.documentdb-sql-api"><strong>Path 1: From Microsoft.Azure.DocumentDB (SQL API)</strong></h4>
<p><strong>Step 1: Update Package References</strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- REMOVE legacy package --&gt;</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;PackageReference Include="Microsoft.Azure.DocumentDB" Version="2.x.x" /&gt; --&gt;</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ADD modern package --&gt;</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Microsoft.Azure.Cosmos"</span><span class="ot"> Version=</span><span class="st">"3.37.0"</span> /&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 2: Update Namespace Imports</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD namespaces</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co">// using Microsoft.Azure.Documents;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co">// using Microsoft.Azure.Documents.Client;</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW namespace</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Microsoft<span class="op">.</span><span class="fu">Azure</span><span class="op">.</span><span class="fu">Cosmos</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 3: Update Client Initialization</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - DocumentDB</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">DocumentClient client = new DocumentClient(</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">    new Uri("https://your-account.documents.azure.com:443/"),</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">    "your-primary-key");</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">await client.OpenAsync();</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Cosmos SDK</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>CosmosClient cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://your-account.documents.azure.com:443/"</span><span class="op">,</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"your-primary-key"</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 4: Update CRUD Operations</strong></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - Create Document</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">Document document = await client.CreateDocumentAsync(</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">    UriFactory.CreateDocumentCollectionUri("MyDatabase", "MyCollection"),</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co">    new { id = "item1", name = "Item 1", partitionKey = "pk1" });</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Create Item</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>ItemResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> response <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="op">{</span> id <span class="op">=</span> <span class="st">"item1"</span><span class="op">,</span> name <span class="op">=</span> <span class="st">"Item 1"</span><span class="op">,</span> partitionKey <span class="op">=</span> <span class="st">"pk1"</span> <span class="op">},</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"pk1"</span><span class="op">));</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - Query Documents</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co">FeedOptions options = new FeedOptions { EnableCrossPartitionQuery = true };</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co">IDocumentQuery&lt;dynamic&gt; query = client.CreateDocumentQuery&lt;dynamic&gt;(</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a><span class="co">    UriFactory.CreateDocumentCollectionUri("MyDatabase", "MyCollection"),</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co">    "SELECT * FROM c WHERE c.name = 'Item 1'", </span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="co">    options).AsDocumentQuery();</span></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="co">while (query.HasMoreResults)</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a><span class="co">{</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a><span class="co">    FeedResponse&lt;dynamic&gt; results = await query.ExecuteNextAsync&lt;dynamic&gt;();</span></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a><span class="co">    foreach (var item in results)</span></span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a><span class="co">    {</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a><span class="co">        Console.WriteLine(item.name);</span></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a><span class="co">    }</span></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a><span class="co">}</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Query Items</span></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>QueryDefinition queryDefinition <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span></span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SELECT * FROM c WHERE c.name = 'Item 1'"</span><span class="op">);</span></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a>FeedIterator<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> resultSet <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>dynamic<span class="op">&gt;(</span></span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>    queryDefinition<span class="op">,</span></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions <span class="op">{</span> MaxItemCount <span class="op">=</span> <span class="dv">10</span> <span class="op">});</span></span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>resultSet<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>    FeedResponse<span class="op">&lt;</span>dynamic<span class="op">&gt;</span> response <span class="op">=</span> await resultSet<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">foreach</span> <span class="op">(</span><span class="dt">var</span> item <span class="kw">in</span> response<span class="op">)</span></span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a>        Console<span class="op">.</span><span class="fu">WriteLine</span><span class="op">(</span>item<span class="op">.</span><span class="fu">name</span><span class="op">);</span></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="path-2-from-microsoft.azure.cosmos.table-table-api" class="level4">
<h4 class="anchored" data-anchor-id="path-2-from-microsoft.azure.cosmos.table-table-api"><strong>Path 2: From Microsoft.Azure.Cosmos.Table (Table API)</strong></h4>
<p><strong>Step 1: Update Package References</strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- REMOVE legacy Table API package --&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- &lt;PackageReference Include="Microsoft.Azure.Cosmos.Table" Version="1.x.x" /&gt; --&gt;</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ADD modern unified package --&gt;</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Microsoft.Azure.Cosmos"</span><span class="ot"> Version=</span><span class="st">"3.37.0"</span> /&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 2: Update Namespace Imports</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD namespaces</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co">// using Microsoft.Azure.Cosmos.Table;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co">// using Microsoft.Azure.Cosmos.Table.Protocol;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW namespace</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> Microsoft<span class="op">.</span><span class="fu">Azure</span><span class="op">.</span><span class="fu">Cosmos</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 3: Client &amp; Container Setup</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - Table Client</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="co">CloudStorageAccount storageAccount = CloudStorageAccount.Parse(connectionString);</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co">CloudTableClient tableClient = storageAccount.CreateCloudTableClient();</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co">CloudTable table = tableClient.GetTableReference("MyTable");</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co">await table.CreateIfNotExistsAsync();</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Cosmos Container (Table API via SQL API)</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>CosmosClient cosmosClient <span class="op">=</span> <span class="kw">new</span> <span class="fu">CosmosClient</span><span class="op">(</span>endpoint<span class="op">,</span> key<span class="op">);</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>Database database <span class="op">=</span> await cosmosClient<span class="op">.</span><span class="fu">CreateDatabaseIfNotExistsAsync</span><span class="op">(</span><span class="st">"MyDatabase"</span><span class="op">);</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>Container container <span class="op">=</span> await database<span class="op">.</span><span class="fu">CreateContainerIfNotExistsAsync</span><span class="op">(</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    id<span class="op">:</span> <span class="st">"MyTable"</span><span class="op">,</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    partitionKeyPath<span class="op">:</span> <span class="st">"/PartitionKey"</span><span class="op">,</span> <span class="co">// Note: PartitionKey is the property name</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    throughput<span class="op">:</span> <span class="dv">400</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 4: Entity Model Changes</strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - Table Entity</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co">public class CustomerEntity : TableEntity</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co">{</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co">    public CustomerEntity(string lastName, string firstName)</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="co">    {</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co">        this.PartitionKey = lastName;</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co">        this.RowKey = firstName;</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co">    }</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co">    public CustomerEntity() { }</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="co">    public string Email { get; set; }</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a><span class="co">    public string PhoneNumber { get; set; }</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="co">}</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Cosmos Document Model</span></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">class</span> Customer</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="fu">JsonProperty</span><span class="op">(</span><span class="st">"id"</span><span class="op">)]</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> Id <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span> <span class="co">// Combination of PartitionKey + RowKey</span></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">[</span><span class="fu">JsonProperty</span><span class="op">(</span><span class="st">"PartitionKey"</span><span class="op">)]</span> </span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> PartitionKey <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span> <span class="co">// Same as Table PartitionKey</span></span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> LastName <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> FirstName <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> Email <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="dt">string</span> PhoneNumber <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> DateTime Timestamp <span class="op">{</span> <span class="kw">get</span><span class="op">;</span> <span class="kw">set</span><span class="op">;</span> <span class="op">}</span> <span class="op">=</span> DateTime<span class="op">.</span><span class="fu">UtcNow</span><span class="op">;</span></span>
<span id="cb39-32"><a href="#cb39-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-33"><a href="#cb39-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Constructor to maintain Table API compatibility</span></span>
<span id="cb39-34"><a href="#cb39-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">Customer</span><span class="op">(</span><span class="dt">string</span> lastName<span class="op">,</span> <span class="dt">string</span> firstName<span class="op">)</span></span>
<span id="cb39-35"><a href="#cb39-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb39-36"><a href="#cb39-36" aria-hidden="true" tabindex="-1"></a>        PartitionKey <span class="op">=</span> lastName<span class="op">;</span></span>
<span id="cb39-37"><a href="#cb39-37" aria-hidden="true" tabindex="-1"></a>        LastName <span class="op">=</span> lastName<span class="op">;</span></span>
<span id="cb39-38"><a href="#cb39-38" aria-hidden="true" tabindex="-1"></a>        FirstName <span class="op">=</span> firstName<span class="op">;</span></span>
<span id="cb39-39"><a href="#cb39-39" aria-hidden="true" tabindex="-1"></a>        Id <span class="op">=</span> $<span class="st">"{lastName}#{firstName}"</span><span class="op">;</span> <span class="co">// Composite key</span></span>
<span id="cb39-40"><a href="#cb39-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb39-41"><a href="#cb39-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-42"><a href="#cb39-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">Customer</span><span class="op">()</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb39-43"><a href="#cb39-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Step 5: CRUD Operations Migration</strong></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode csharp code-with-copy"><code class="sourceCode cs"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - Insert Entity</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">CustomerEntity customer = new CustomerEntity("Doe", "John")</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">{</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">    Email = "john.doe@example.com",</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">    PhoneNumber = "555-1234"</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">};</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">TableOperation insertOperation = TableOperation.Insert(customer);</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co">TableResult result = await table.ExecuteAsync(insertOperation);</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Create Item</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>Customer customer <span class="op">=</span> <span class="kw">new</span> <span class="fu">Customer</span><span class="op">(</span><span class="st">"Doe"</span><span class="op">,</span> <span class="st">"John"</span><span class="op">)</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>    Email <span class="op">=</span> <span class="st">"john.doe@example.com"</span><span class="op">,</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>    PhoneNumber <span class="op">=</span> <span class="st">"555-1234"</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>ItemResponse<span class="op">&lt;</span>Customer<span class="op">&gt;</span> response <span class="op">=</span> await container<span class="op">.</span><span class="fu">CreateItemAsync</span><span class="op">(</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>    customer<span class="op">,</span></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span>customer<span class="op">.</span><span class="fu">PartitionKey</span><span class="op">));</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - Retrieve Entity</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a><span class="co">TableOperation retrieveOperation = TableOperation.Retrieve&lt;CustomerEntity&gt;("Doe", "John");</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a><span class="co">TableResult retrievedResult = await table.ExecuteAsync(retrieveOperation);</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a><span class="co">CustomerEntity customer = retrievedResult.Result as CustomerEntity;</span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Read Item</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>ItemResponse<span class="op">&lt;</span>Customer<span class="op">&gt;</span> response <span class="op">=</span> await container<span class="op">.</span><span class="fu">ReadItemAsync</span><span class="op">&lt;</span>Customer<span class="op">&gt;(</span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Doe#John"</span><span class="op">,</span> <span class="co">// Composite ID</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"Doe"</span><span class="op">));</span></span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>Customer customer <span class="op">=</span> response<span class="op">.</span><span class="fu">Resource</span><span class="op">;</span></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="co">// OLD - Query Entities</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a><span class="co">TableQuery&lt;CustomerEntity&gt; query = new TableQuery&lt;CustomerEntity&gt;()</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a><span class="co">    .Where(TableQuery.GenerateFilterCondition("PartitionKey", QueryComparisons.Equal, "Doe"));</span></span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a><span class="co">TableContinuationToken token = null;</span></span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a><span class="co">var customers = new List&lt;CustomerEntity&gt;();</span></span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a><span class="co">do</span></span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a><span class="co">{</span></span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a><span class="co">    TableQuerySegment&lt;CustomerEntity&gt; segment = await table.ExecuteQuerySegmentedAsync(query, token);</span></span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a><span class="co">    customers.AddRange(segment.Results);</span></span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a><span class="co">    token = segment.ContinuationToken;</span></span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a><span class="co">} while (token != null);</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a><span class="co">// NEW - Query Items</span></span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a>QueryDefinition query <span class="op">=</span> <span class="kw">new</span> <span class="fu">QueryDefinition</span><span class="op">(</span></span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a>    <span class="st">"SELECT * FROM c WHERE c.PartitionKey = @partitionKey"</span><span class="op">)</span></span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">WithParameter</span><span class="op">(</span><span class="st">"@partitionKey"</span><span class="op">,</span> <span class="st">"Doe"</span><span class="op">);</span></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a>FeedIterator<span class="op">&lt;</span>Customer<span class="op">&gt;</span> resultSet <span class="op">=</span> container<span class="op">.</span><span class="fu">GetItemQueryIterator</span><span class="op">&lt;</span>Customer<span class="op">&gt;(</span></span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a>    query<span class="op">,</span></span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a>    requestOptions<span class="op">:</span> <span class="kw">new</span> QueryRequestOptions</span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a>        PartitionKey <span class="op">=</span> <span class="kw">new</span> <span class="fu">PartitionKey</span><span class="op">(</span><span class="st">"Doe"</span><span class="op">)</span></span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a>List<span class="op">&lt;</span>Customer<span class="op">&gt;</span> customers <span class="op">=</span> <span class="kw">new</span> List<span class="op">&lt;</span>Customer<span class="op">&gt;();</span></span>
<span id="cb40-66"><a href="#cb40-66" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="op">(</span>resultSet<span class="op">.</span><span class="fu">HasMoreResults</span><span class="op">)</span></span>
<span id="cb40-67"><a href="#cb40-67" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-68"><a href="#cb40-68" aria-hidden="true" tabindex="-1"></a>    FeedResponse<span class="op">&lt;</span>Customer<span class="op">&gt;</span> response <span class="op">=</span> await resultSet<span class="op">.</span><span class="fu">ReadNextAsync</span><span class="op">();</span></span>
<span id="cb40-69"><a href="#cb40-69" aria-hidden="true" tabindex="-1"></a>    customers<span class="op">.</span><span class="fu">AddRange</span><span class="op">(</span>response<span class="op">);</span></span>
<span id="cb40-70"><a href="#cb40-70" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="path-3-from-windowsazure.storage-to-modern-options" class="level4">
<h4 class="anchored" data-anchor-id="path-3-from-windowsazure.storage-to-modern-options"><strong>Path 3: From WindowsAzure.Storage to Modern Options</strong></h4>
<p>If you‚Äôre coming from Azure Table Storage and want to access Cosmos DB:</p>
<p><strong>Option A: Stay with Table Storage using Azure.Data.Tables</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Azure.Data.Tables"</span><span class="ot"> Version=</span><span class="st">"12.8.0"</span> /&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Option B: Migrate to Cosmos DB with Microsoft.Azure.Cosmos</strong></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode xml code-with-copy"><code class="sourceCode xml"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">PackageReference</span><span class="ot"> Include=</span><span class="st">"Microsoft.Azure.Cosmos"</span><span class="ot"> Version=</span><span class="st">"3.37.0"</span> /&gt;</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The migration from <code>WindowsAzure.Storage</code> to <code>Azure.Data.Tables</code> is straightforward and maintains Table API semantics. However, migrating to Cosmos DB provides global distribution, better performance, and additional features.</p>
</section>
</section>
<section id="migration-decision-matrix" class="level3">
<h3 class="anchored" data-anchor-id="migration-decision-matrix">Migration Decision Matrix</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 18%">
<col style="width: 23%">
<col style="width: 26%">
<col style="width: 17%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>Current SDK</th>
<th>Target Service</th>
<th>Recommended Path</th>
<th>Complexity</th>
<th>Benefits</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Microsoft.Azure.DocumentDB</strong></td>
<td>Cosmos DB SQL</td>
<td>‚Üí <code>Microsoft.Azure.Cosmos</code></td>
<td>Medium</td>
<td>Modern API, Performance, Features</td>
</tr>
<tr class="even">
<td><strong>Microsoft.Azure.Cosmos.Table</strong></td>
<td>Cosmos DB Table</td>
<td>‚Üí <code>Microsoft.Azure.Cosmos</code></td>
<td>High</td>
<td>Unified SDK, Better Performance</td>
</tr>
<tr class="odd">
<td><strong>Microsoft.Azure.Cosmos.Table</strong></td>
<td>Azure Table Storage</td>
<td>‚Üí <code>Azure.Data.Tables</code></td>
<td>Low</td>
<td>Modern Table API, Simpler Migration</td>
</tr>
<tr class="even">
<td><strong>WindowsAzure.Storage</strong></td>
<td>Azure Table Storage</td>
<td>‚Üí <code>Azure.Data.Tables</code></td>
<td>Low</td>
<td>Modern SDK, Better Performance</td>
</tr>
<tr class="odd">
<td><strong>WindowsAzure.Storage</strong></td>
<td>Cosmos DB</td>
<td>‚Üí <code>Microsoft.Azure.Cosmos</code></td>
<td>High</td>
<td>Global Distribution, Advanced Features</td>
</tr>
</tbody>
</table>
</section>
<section id="key-migration-considerations" class="level3">
<h3 class="anchored" data-anchor-id="key-migration-considerations">Key Migration Considerations</h3>
<section id="data-model-changes" class="level4">
<h4 class="anchored" data-anchor-id="data-model-changes"><strong>1. Data Model Changes</strong></h4>
<ul>
<li><strong>Table API ‚Üí SQL API</strong>: Convert <code>PartitionKey/RowKey</code> to composite <code>id</code> field</li>
<li><strong>Entity inheritance</strong>: Replace <code>TableEntity</code> base class with POCO models</li>
<li><strong>Property mapping</strong>: Handle special Table Storage types (byte arrays, etc.)</li>
</ul>
</section>
<section id="performance-implications" class="level4">
<h4 class="anchored" data-anchor-id="performance-implications"><strong>2. Performance Implications</strong></h4>
<ul>
<li><strong>Throughput provisioning</strong>: Cosmos DB uses RU/s instead of storage-based pricing</li>
<li><strong>Indexing</strong>: SQL API provides richer indexing than Table API</li>
<li><strong>Query patterns</strong>: SQL queries vs Table queries have different performance characteristics</li>
</ul>
</section>
<section id="feature-migration" class="level4">
<h4 class="anchored" data-anchor-id="feature-migration"><strong>3. Feature Migration</strong></h4>
<ul>
<li><strong>Authentication</strong>: Migrate from connection strings to AAD/Managed Identity</li>
<li><strong>Error handling</strong>: Update exception handling for new exception types</li>
<li><strong>Batch operations</strong>: Leverage bulk operations in modern SDKs</li>
<li><strong>Monitoring</strong>: Implement RU consumption monitoring</li>
</ul>
</section>
</section>
<section id="migration-benefits" class="level3">
<h3 class="anchored" data-anchor-id="migration-benefits">Migration Benefits</h3>
<p>Moving to <code>Microsoft.Azure.Cosmos</code> provides:</p>
<p>‚úÖ <strong>Unified Experience</strong> - Single SDK for all Cosmos DB APIs<br>
‚úÖ <strong>Better Performance</strong> - Optimized for modern async patterns<br>
‚úÖ <strong>Advanced Features</strong> - Bulk operations, change feed, global distribution<br>
‚úÖ <strong>Enhanced Authentication</strong> - AAD, Managed Identity, fine-grained access<br>
‚úÖ <strong>Rich Diagnostics</strong> - Detailed metrics and performance insights<br>
‚úÖ <strong>Future-Proof</strong> - Active development and new feature support</p>
</section>
<section id="support-timeline" class="level3">
<h3 class="anchored" data-anchor-id="support-timeline">Support Timeline</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 21%">
<col style="width: 22%">
<col style="width: 25%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>SDK</th>
<th>Final Version</th>
<th>End of Support</th>
<th>Security Updates</th>
<th>Recommendation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Microsoft.Azure.DocumentDB</code></td>
<td>2.18.0</td>
<td>March 2020</td>
<td>‚ùå None</td>
<td>‚ö†Ô∏è Migrate immediately</td>
</tr>
<tr class="even">
<td><code>Microsoft.Azure.Cosmos.Table</code></td>
<td>1.0.8</td>
<td>August 2021</td>
<td>‚ùå None</td>
<td>‚ö†Ô∏è Migrate immediately</td>
</tr>
<tr class="odd">
<td><code>WindowsAzure.Storage</code></td>
<td>9.3.3</td>
<td>November 2023</td>
<td>‚ùå None</td>
<td>‚ö†Ô∏è Migrate immediately</td>
</tr>
<tr class="even">
<td><code>Azure.Data.Tables</code></td>
<td>Current</td>
<td>‚úÖ Active</td>
<td>‚úÖ Yes</td>
<td>‚úÖ Use for Table Storage</td>
</tr>
<tr class="odd">
<td><code>Microsoft.Azure.Cosmos</code></td>
<td>Current</td>
<td>‚úÖ Active</td>
<td>‚úÖ Yes</td>
<td>‚úÖ Use for Cosmos DB</td>
</tr>
</tbody>
</table>
<blockquote class="blockquote">
<p><strong>‚ö†Ô∏è Important</strong>: Microsoft will not provide security updates or bug fixes for legacy SDKs. Migration to <code>Microsoft.Azure.Cosmos</code> is strongly recommended for security and compatibility reasons.</p>
</blockquote>
</section>
</section>
<section id="useful-resources" class="level2">
<h2 class="anchored" data-anchor-id="useful-resources">üîó Useful Resources</h2>
<ul>
<li><p><strong>Official Documentation</strong>: <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/">Azure Cosmos DB Documentation</a><br> Comprehensive documentation covering Azure Cosmos DB concepts, capabilities, APIs, and service-level features. Essential for understanding provisioning models, consistency levels, indexing policies, and architectural considerations for designing Cosmos DB solutions.</p></li>
<li><p><strong>SDK Reference</strong>: <a href="https://learn.microsoft.com/en-us/dotnet/api/microsoft.azure.cosmos">Microsoft.Azure.Cosmos SDK Reference</a><br> Complete API reference documentation for the Microsoft.Azure.Cosmos SDK, including all classes, methods, properties, and their signatures. Critical development resource for understanding method parameters, return types, exceptions, and proper usage patterns when writing Cosmos DB applications.</p></li>
<li><p><strong>Code Samples</strong>: <a href="https://github.com/Azure/azure-cosmos-dotnet-v3/tree/master/Microsoft.Azure.Cosmos.Samples">Azure Cosmos DB .NET SDK Samples</a><br> Official code samples demonstrating real-world implementation patterns, performance optimization techniques, and advanced scenarios like change feed processing and bulk operations. Provides practical examples of best practices, error handling, and common use cases.</p></li>
<li><p><strong>Performance Tips</strong>: <a href="https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/performance-tips-dotnet-sdk">Performance Tips for Azure Cosmos DB</a><br> Expert guidance on optimizing your applications for maximum performance and cost-efficiency with Azure Cosmos DB, including connection management, query optimization, indexing strategies, and RU optimization techniques to ensure your applications run efficiently.</p></li>
<li><p><strong>Migration Guide</strong>: <a href="https://github.com/Azure/azure-cosmos-dotnet-v3/blob/master/Microsoft.Azure.Cosmos/MIGRATE.md">Migrating from DocumentDB SDK to Cosmos DB SDK</a><br> Detailed migration guide for transitioning from the legacy Microsoft.Azure.DocumentDB SDK to the modern Microsoft.Azure.Cosmos SDK, with code comparisons, breaking change explanations, and step-by-step migration strategies.</p></li>
</ul>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">üìù Summary</h2>
<p>The <strong>Microsoft.Azure.Cosmos</strong> SDK is the recommended approach for accessing Azure Cosmos DB from C#. It provides:</p>
<ul>
<li>‚úÖ Modern async/await patterns for responsive applications</li>
<li>‚úÖ Comprehensive support for all Cosmos DB SQL API features</li>
<li>‚úÖ Better performance and throughput optimization</li>
<li>‚úÖ Built-in retry logic and error handling</li>
<li>‚úÖ Support for AAD and managed identity authentication</li>
<li>‚úÖ Rich diagnostic information for monitoring and troubleshooting</li>
<li>‚úÖ Optimized bulk operations for high-throughput scenarios</li>
<li>‚úÖ Simplified change feed processing</li>
</ul>
<p>Azure Cosmos DB offers a globally distributed, multi-model database service with comprehensive SLAs for throughput, latency, availability, and consistency, making it ideal for modern cloud applications requiring global scale and low latency.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/darioairoldi\.github\.io\/Learn");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../03.00-tech/03.01-data/01-table-storage-access-options/readme.html" class="pagination-link" aria-label="Azure Table Storage Access with C#">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Azure Table Storage Access with C#</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/02-cosmosdb-partitioning-strategies.html" class="pagination-link" aria-label="üéØ CosmosDB Partitioning Strategies">
        <span class="nav-page-text">üéØ CosmosDB Partitioning Strategies</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/darioairoldi/Learn/edit/main/03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/darioairoldi/Learn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>