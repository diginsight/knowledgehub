<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Diginsight Team">
<meta name="dcterms.date" content="2026-01-08">

<title>Customizing Markdown Rendering with Lua Filters ‚Äì Dario‚Äôs Learning Journey</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../03.00-tech/20.01-markdown/01-quarto/readme.html" rel="next">
<link href="../../../03.00-tech/20.01-markdown/01-quarto/09.02-azure-storage-deployment.html" rel="prev">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-3a62b57c7ce0f47a491e97fb1cd0ccc4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Learning Hub</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="../../../README.html" aria-current="page"> <i class="bi bi-house-fill" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-news" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">News</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-news">    
        <li class="dropdown-header">Latest Updates</li>
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20260130-6-advanced-rules-for-production-copilot-agents/summary.html">
 <span class="dropdown-text">6 Advanced Rules for Copilot Agents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20260124-copilotstudio-sdk/github-copilot-sdk-building-agents-for-any-application.html">
 <span class="dropdown-text">GitHub Copilot SDK - Building Agents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20260111-6-vital-rules-for-production-ready-copilot-agents/summary.html">
 <span class="dropdown-text">6 VITAL Rules for Copilot Agents</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20251224-vscode-v1.107-release/01-summary.html">
 <span class="dropdown-text">VS Code v1.107 Release Summary</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../01.00-news/20251224-vscode-v1.107-release/02-readme.sonnet4.html">
 <span class="dropdown-text">VS Code v1.107 Release Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-events" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Events</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-events">    
        <li class="dropdown-header">No events currently available</li>
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Event content coming soon‚Ä¶</li>
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-architectures" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Architectures</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-architectures">    
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/01-podcast-and-rss-feed-information-gathering-and-analysis.html">
 <span class="dropdown-text">Podcast and RSS Feed Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/02-analyzing-atom-and-rss-specifications.html">
 <span class="dropdown-text">Analyzing Atom and RSS Specifications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/03-additional-metadata-for-rss-and-atom-feeds.html">
 <span class="dropdown-text">Additional Metadata for RSS and Atom Feeds</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/04-c#-reference-classes-for-reading-feeds.html">
 <span class="dropdown-text">C# Reference Classes for Reading Feeds</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-azure" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Azure</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-azure">    
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/02.01-azure/00-azure-naming-conventions/readme.html">
 <span class="dropdown-text">Azure Best Practices</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Security &amp; Identity</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/01-external-users-authentication-in-azure-ad-explained.html">
 <span class="dropdown-text">Azure AD External Users Explained</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/02-external-users-types-and-invitation-process.html">
 <span class="dropdown-text">External Users Types &amp; Invitation</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Data Services</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/01-table-storage-access-options/readme.html">
 <span class="dropdown-text">Table Storage Access</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/01-blob-storage-access-options.html">
 <span class="dropdown-text">Blob Storage Access Options</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/02-blob-storage-limitations.html">
 <span class="dropdown-text">Blob Storage Limitations</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html">
 <span class="dropdown-text">CosmosDB Access</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-markdown--docs" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Markdown &amp; Docs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-markdown--docs">    
        <li class="dropdown-header">Quarto Documentation</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/01.01-introduction-to-quarto.html">
 <span class="dropdown-text">Using Quarto (Overview)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/01.02-how-quarto-works.html">
 <span class="dropdown-text">Quarto Architecture: How It Works</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/02.01-monolithic-vs-modular-deployment.html">
 <span class="dropdown-text">Quarto: Monolithic vs.&nbsp;Modular Deployment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/02.02-split-navigation-build.html">
 <span class="dropdown-text">Quarto: Split Navigation Build</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/03.01-quarto-yml-structure.html">
 <span class="dropdown-text">Quarto.yml Document Structure</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/05.01-theming-and-styling.html">
 <span class="dropdown-text">Quarto Theming and Styling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/04.01-markdown-features.html">
 <span class="dropdown-text">Quarto-Specific Markdown Features</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/07.01-build-optimization.html">
 <span class="dropdown-text">Optimizing Quarto Build &amp; Deploy</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/06.01-sidebar-layout.html">
 <span class="dropdown-text">How Quarto Sidebar Works</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/06.02-navigation-workflow.html">
 <span class="dropdown-text">Quarto Navigation Workflow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/06.03-transition-optimization.html">
 <span class="dropdown-text">Sidebar Page Transition Optimization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/08.01-troubleshooting-guide.html">
 <span class="dropdown-text">Troubleshooting Quarto Sites</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/09.01-github-pages-deployment.html">
 <span class="dropdown-text">Deploying Quarto to GitHub Pages</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/09.02-azure-storage-deployment.html">
 <span class="dropdown-text">Deploying Quarto to Azure Storage</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.html">
 <span class="dropdown-text">Customizing with Lua Filters</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">MkDocs Documentation</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/02-mkdocs/000.000-using-mkdocs.html">
 <span class="dropdown-text">Using MkDocs (Overview)</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.001-architecture-how-mkdocs-works.html">
 <span class="dropdown-text">MkDocs Architecture: How It Works</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.002-architecture-monolithic-vs.-modular-deployment.html">
 <span class="dropdown-text">MkDocs: Monolithic vs.&nbsp;Modular Deployment</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Hugo Documentation</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/readme.html">
 <span class="dropdown-text">Hugo Series Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.01-introduction-to-hugo.html">
 <span class="dropdown-text">Introduction to Hugo</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.02-hugo-core-concepts.html">
 <span class="dropdown-text">Hugo Core Concepts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.03-goldmark-markdown-processing.html">
 <span class="dropdown-text">Goldmark Markdown Processing</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/01.04-hugo-vs-quarto.html">
 <span class="dropdown-text">Hugo vs Quarto Comparison</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/20.01-markdown/03-hugo/05.03-rendering-learning-hub-with-hugo.html">
 <span class="dropdown-text">Rendering Learning Hub with Hugo</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-technologies" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Technologies</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-technologies">    
        <li class="dropdown-header">GitHub &amp; Version Control</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.01-github/01.01-cli/20250709-manage-gitrepo-from-commandline/readme.html">
 <span class="dropdown-text">Git Command Line</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.01-github/01.01-cli/20250118-github-cli/cli-commands-for-github.html">
 <span class="dropdown-text">GitHub CLI Commands</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Prompt Engineering</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/03.00-how_to_structure_content_for_copilot_prompt_files.html">
 <span class="dropdown-text">Structuring Prompt Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/04.00-how_to_structure_content_for_copilot_agent_files.html">
 <span class="dropdown-text">Structuring Agent Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/05.00-how_to_structure_content_for_copilot_instruction_files.html">
 <span class="dropdown-text">Structuring Instruction Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/06.00-how_to_structure_content_for_copilot_skills.html">
 <span class="dropdown-text">Structuring Skill Files</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/07.00-how_to_create_mcp_servers_for_copilot.html">
 <span class="dropdown-text">Creating MCP Servers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/08.00-how_to_optimize_prompts_for_specific_models.html">
 <span class="dropdown-text">Optimizing Prompts for Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/09.00-how_to_manage_information_flow_during_prompt_orchestrations.html">
 <span class="dropdown-text">Managing Information Flow</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/05.02-prompt-engineering/20-how_to_create_a_prompt_interacting_with_agents.html">
 <span class="dropdown-text">Prompt Orchestrations with Agents</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Technical Writing</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/40.00-technical-writing/00-foundations-of-technical-documentation.html">
 <span class="dropdown-text">Foundations of Technical Docs</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/00-microsoft-style-guide-overview.html">
 <span class="dropdown-text">Microsoft Style Guide</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">API Testing &amp; Tools</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/00-http-rest-api-testing-tools-comprehensive-comparison.html">
 <span class="dropdown-text">HTTP/REST API Testing Comparison</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/readme.html">
 <span class="dropdown-text">Using .http Files (VSCode)</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Programming &amp; Hardware</li>
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/readme.html">
 <span class="dropdown-text">yq YAML Processor</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../03.00-tech/60.01-hardware/surface-laptop-6-features-analysis.html">
 <span class="dropdown-text">Surface Laptop 6</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-how-to-guides" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">How-To Guides</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-how-to-guides">    
        <li>
    <a class="dropdown-item" href="../../../04.00-howto/20251108-howto-configure-promot-files-for-markdown-preview-in-visual-studio.html">
 <span class="dropdown-text">Configure .prompt Files in VS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../../04.00-howto/20251013-howto-expose-my-computer-with-no-ip-ddns/howto.expose-my-computer-with-no-ip-ddns.html">
 <span class="dropdown-text">No-IP DDNS Setup</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ideas--projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ideas &amp; Projects</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ideas--projects">    
        <li>
    <a class="dropdown-item" href="../../../06.00-idea/learning-hub/01-learning-hub-overview/01-learning-hub-introduction.html">
 <span class="dropdown-text">Learning Hub Overview</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item compact">
    <a class="nav-link" href="../../../#"> <i class="bi bi-bell-fill" role="img" aria-label="Intelligent Notifications">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../#"> <i class="bi bi-rss" role="img" aria-label="Intelligent Feeds">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../../#"> <i class="bi bi-sliders" role="img" aria-label="Intelligent Rules">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/darioairoldi/Learn"> <i class="bi bi-github" role="img" aria-label="GitHub Repository">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Technologies</li><li class="breadcrumb-item">Markdown Compilers</li><li class="breadcrumb-item"><a href="../../../03.00-tech/20.01-markdown/01-quarto/01.01-introduction-to-quarto.html">Quarto</a></li><li class="breadcrumb-item"><a href="../../../03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.html">Customizing Markdown Rendering with Lua Filters</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../README.html" class="sidebar-item-text sidebar-link"><i class="bi bi-house-fill" role="img">
</i> 
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true"><i class="bi bi-newspaper" role="img">
</i> 
 <span class="menu-text">News &amp; Updates</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20260130-6-advanced-rules-for-production-copilot-agents/summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">20260130 - 6 Advanced Rules For Production Copilot Agents</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20260124-copilotstudio-sdk/github-copilot-sdk-building-agents-for-any-application.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">20260124 - GitHub Copilot SDK Building Agents</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20260111-6-vital-rules-for-production-ready-copilot-agents/summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">20260111 - 6 Vital Rules For Production Ready Copilot Agents</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">20251224 VS Code v1.107 Release</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20251224-vscode-v1.107-release/01-summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../01.00-news/20251224-vscode-v1.107-release/02-readme.sonnet4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true"><i class="bi bi-calendar-event" role="img">
</i> 
 <span class="menu-text">Events</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
 <span class="menu-text">No events currently available</span>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true"><i class="bi bi-cpu" role="img">
</i> 
 <span class="menu-text">Technologies</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true"><i class="bi bi-shield-lock" role="img">
</i> 
 <span class="menu-text">Authentication</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false">
 <span class="menu-text">20251102 Authenticating External Users in Azure Ad</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/01-external-users-authentication-in-azure-ad-explained.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External Users Authentication in Azure AD Explained</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/01.01-authentication/20251102-authenticating-external-users-in-azure-ad/02-external-users-types-and-invitation-process.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">External User Types and Invitation Process in Azure AD/Entra ID</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true"><i class="bi bi-cloud" role="img">
</i> 
 <span class="menu-text">Azure</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/02.01-azure/00-azure-naming-conventions/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Azure Naming Conventions</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true"><i class="bi bi-database" role="img">
</i> 
 <span class="menu-text">Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false">
 <span class="menu-text">01 Table Storage Access Options</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/01-table-storage-access-options/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Azure Table Storage Access with C#</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false">
 <span class="menu-text">02 Cosmosdb Access Options</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/01-azure-cosmosdb-access-options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üåê Azure CosmosDB Access Options (with C#)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/02-cosmosdb-access-options/02-cosmosdb-partitioning-strategies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üéØ CosmosDB Partitioning Strategies</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false">
 <span class="menu-text">03 Blob Storage Access Options</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/01-blob-storage-access-options.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Azure Blob Storage Access Approaches with C#</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/03.01-data/03-blob-storage-access-options/02-blob-storage-limitations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">‚ö†Ô∏è Azure Blob Storage Limitations</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true"><i class="bi bi-code-slash" role="img">
</i> 
 <span class="menu-text">Programming Languages</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false">
 <span class="menu-text">20250827 What Is Yq Overview</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/appendix-advanced-techniques.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix B: Advanced YAML to JSON Conversion Techniques</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/appendix-yq-tool.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix A: The yq Tool - Complete Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/04.01-programming-languages/20250827-what-is-yq-overview/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Convert YAML to JSON - Complete Guide</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">GitHub</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-14" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-14" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="false">
 <span class="menu-text">01 Repositories</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-15" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-15" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="false">
 <span class="menu-text">20250825 Github Repositories Limitations</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-16" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-16" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/01-repositories/20250825-github-repositories-limitations/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overcoming GitHub Repository Limitations</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" role="navigation" aria-expanded="false">
 <span class="menu-text">01.01 Cli</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-17" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-17" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" role="navigation" aria-expanded="false">
 <span class="menu-text">20250118 Github Cli</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-18" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-18" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/01.01-cli/20250118-github-cli/cli-commands-for-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üöÄ CLI Commands to Interact with GitHub Repositories</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" role="navigation" aria-expanded="false">
 <span class="menu-text">20250709 Manage Gitrepo from Commandline</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-19" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-19" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/01.01-cli/20250709-manage-gitrepo-from-commandline/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HowTo: Manage your Git repo from the command line</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" role="navigation" aria-expanded="false">
 <span class="menu-text">02 Actions</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-20" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-20" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" role="navigation" aria-expanded="false">
 <span class="menu-text">20251018 Issue Github Action Fails with Artifact Storage Quota Has Been Hit</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-21" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-21" class="collapse list-unstyled sidebar-section depth4 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/01-readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ISSUE: Github action fails with ‚ÄòArtifact storage quota has been hit‚Äô</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/02-quickstart.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quick Start Guide - Fixing Artifact Storage Quota Issue</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/03-solution_summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Summary - GitHub Actions Artifact Storage Quota Issue</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/05-final_solution_no_artifacts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FINAL SOLUTION: No Artifacts Approach</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.01-github/02-actions/20251018-issue-github-action-fails-with-artifact-storage-quota-has-been-hit/99-wsl_error_fix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">WSL Error Fix - Updated Solution</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" role="navigation" aria-expanded="true"><i class="bi bi-chat-dots" role="img">
</i> 
 <span class="menu-text">Prompt Engineering</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-22" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-22" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/02.00-how_to_name_and_organize_prompt_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Name and Organize Prompt Files in Your GitHub Repository</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/03.00-how_to_structure_content_for_copilot_prompt_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Prompt Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/04.00-how_to_structure_content_for_copilot_agent_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Agent Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/05.00-how_to_structure_content_for_copilot_instruction_files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Instruction Files</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/06.00-how_to_structure_content_for_copilot_skills.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Structure Content for GitHub Copilot Skills</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/07.00-how_to_create_mcp_servers_for_copilot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Create MCP Servers for GitHub Copilot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.00-how_to_optimize_prompts_for_specific_models.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Optimize Prompts for Specific Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.01-appendix_openai_prompting_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 01: OpenAI Models Prompting Guide Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.02-appendix_anthropic_prompting_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 02: Anthropic Claude Prompting Guide Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/08.03-appendix_google_prompting_guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Appendix 03: Google Gemini Prompting Guide Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/09.00-how_to_manage_information_flow_during_prompt_orchestrations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Manage Information Flow During Prompt Orchestrations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/10.00-how_to_optimize_token_consumption_during_prompt_orchestrations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Optimize Token Consumption During Prompt Orchestrations</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/20-how_to_create_a_prompt_interacting_with_agents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How to Create a Prompt Orchestrating Multiple Agents</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/21.1-example_prompt_interacting_with_agents_plan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Multi-Agent Orchestration Plan V2 for Prompt and Agent File Creation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/22-prompts-and-markdown-structure-for-a-documentation-site.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prompts and Markdown Structure for a Documentation Site</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" role="navigation" aria-expanded="false">
 <span class="menu-text">02 Getting Started</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-23" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-23" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/05.02-prompt-engineering/02-getting-started/01.00-how_github_copilot_uses_markdown_and_prompt_folders.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How GitHub Copilot Uses Markdown and Prompt Folders within Your Repo</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" role="navigation" aria-expanded="true"><i class="bi bi-plug" role="img">
</i> 
 <span class="menu-text">HTTP Client</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-24" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-24" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" role="navigation" aria-expanded="false">
 <span class="menu-text">20250711 Use Http Files for Easy and Repeatable Test</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-25" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-25" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250711-use-http-files-for-easy-and-repeatable-test/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readme</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-26" role="navigation" aria-expanded="false">
 <span class="menu-text">20250713 Use Http Files for Easy and Repeatable Test</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-26" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-26" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/00-http-rest-api-testing-tools-comprehensive-comparison.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üîç HTTP/REST API Testing Tools - Comprehensive Comparison</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/02-using-http-files-for-api-testing-(visual-studio).html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using HTTP Files for API Testing (Visual Studio)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/10.01-httpclient/20250713-use-http-files-for-easy-and-repeatable-test/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Readme</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-27" role="navigation" aria-expanded="true"><i class="bi bi-book" role="img">
</i> 
 <span class="menu-text">Markdown Compilers</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-27" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-27" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-28" role="navigation" aria-expanded="true"><i class="bi bi-file-richtext" role="img">
</i> 
 <span class="menu-text">Quarto</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-28" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-28" class="collapse list-unstyled sidebar-section depth3 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/01.01-introduction-to-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Quarto</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/01.02-how-quarto-works.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How Quarto Works</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/02.01-monolithic-vs-modular-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Monolithic vs.&nbsp;Modular Deployment</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/02.02-split-navigation-build.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Split Navigation Build from Content Rendering</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/03.01-quarto-yml-structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">_quarto.yml Document Structure</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/04.01-markdown-features.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto-Specific Markdown Features</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/05.01-theming-and-styling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto Theming and Styling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/06.01-sidebar-layout.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">How does quarto site layout works</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/06.02-navigation-workflow.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Navbars Navigation Workflow</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/06.03-transition-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Sidebar Page Transition Optimization</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/07.01-build-optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimizing Quarto Build and Deploy Performance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/08.01-troubleshooting-guide.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Troubleshooting Quarto Sites</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/09.01-github-pages-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deploying a Quarto Site to GitHub Pages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/09.02-azure-storage-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Deploying a Quarto Site to Azure Storage Accounts</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Customizing Markdown Rendering with Lua Filters</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/01-quarto/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quarto Documentation Series</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-29" role="navigation" aria-expanded="false"><i class="bi bi-book-half" role="img">
</i> 
 <span class="menu-text">MkDocs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-29" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-29" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/02-mkdocs/000.000-using-mkdocs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using MkDocs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.001-architecture-how-mkdocs-works.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MkDocs Architecture - How MkDocs Works</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/02-mkdocs/001.002-architecture-monolithic-vs.-modular-deployment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MkDocs Architecture - Monolithic vs.&nbsp;Modular Deployment</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-30" role="navigation" aria-expanded="false"><i class="bi bi-lightning-charge" role="img">
</i> 
 <span class="menu-text">Hugo</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-30" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-30" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.01-introduction-to-hugo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to Hugo Static Site Generator</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.02-hugo-core-concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hugo Core Concepts: Content Organization and Management</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.03-goldmark-markdown-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Goldmark Markdown Processing in Hugo</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/01.04-hugo-vs-quarto.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hugo vs Quarto: Comprehensive Comparison for Learning Hub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/05.03-rendering-learning-hub-with-hugo.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Rendering Learning Hub with Hugo: Practical Implementation Guide</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/20.01-markdown/03-hugo/readme.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Hugo Static Site Generator Series</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-31" role="navigation" aria-expanded="true"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text">Feed Architectures &amp; Protocols</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-31" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-31" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-32" role="navigation" aria-expanded="false">
 <span class="menu-text">20251005 Feeds Architectures and Protocols</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-32" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-32" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/01-podcast-and-rss-feed-information-gathering-and-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Podcast and RSS Feed: Information Gathering and Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/02-analyzing-atom-and-rss-specifications.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analyzing Atom and RSS Specifications</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/03-additional-metadata-for-rss-and-atom-feeds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Metadata for RSS and Atom Feeds</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/21.01-feed/20251005-feeds-architectures-and-protocols/04-c#-reference-classes-for-reading-feeds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">C# Reference Classes for Reading RSS and Atom Feeds</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-33" role="navigation" aria-expanded="true"><i class="bi bi-cpu-fill" role="img">
</i> 
 <span class="menu-text">Hardware</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-33" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-33" class="collapse list-unstyled sidebar-section depth2 show">  
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-34" role="navigation" aria-expanded="true"><i class="bi bi-pencil-square" role="img">
</i> 
 <span class="menu-text">Technical Writing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-34" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-34" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/00-foundations-of-technical-documentation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Foundations &amp; Principles</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/01-writing-style-and-voice-principles.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Writing Style &amp; Voice</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/02-structure-and-information-architecture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Structure &amp; Architecture</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/03-accessibility-in-technical-writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Accessibility</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/04-code-documentation-excellence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Code Documentation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/05-validation-and-quality-assurance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Validation &amp; QA</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/06-citations-and-reference-management.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Citations &amp; References</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/07-ai-enhanced-documentation-writing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">AI-Enhanced Writing</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-35" role="navigation" aria-expanded="false"><i class="bi bi-microsoft" role="img">
</i> 
 <span class="menu-text">microsoft-writing-style-guide</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-35" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-35" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/00-microsoft-style-guide-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview &amp; Philosophy</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/01-microsoft-voice-and-tone.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Voice &amp; Tone</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/02-microsoft-mechanics-and-formatting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Mechanics &amp; Formatting</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/03-microsoft-compared-to-other-guides.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Comparative Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../03.00-tech/40.00-technical-writing/microsoft-writing-style-guide/04-microsoft-style-principles-reference.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Principles Reference (YAML/JSON)</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-36" role="navigation" aria-expanded="true"><i class="bi bi-tools" role="img">
</i> 
 <span class="menu-text">How-To Guides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-36" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-36" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../04.00-howto/20251108-howto-configure-promot-files-for-markdown-preview-in-visual-studio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">HowTo: Configure .prompt Files for Markdown Preview in Visual Studio</span></a>
  </div>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-37" role="navigation" aria-expanded="true">
 <span class="menu-text">20251013 Howto Expose My Computer with No Ip Ddns</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-37" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-37" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../04.00-howto/20251013-howto-expose-my-computer-with-no-ip-ddns/howto.expose-my-computer-with-no-ip-ddns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">üåê HowTo: Expose My Computer with No-IP DDNS</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
        <li class="px-0"><hr class="sidebar-divider hi "></li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-38" role="navigation" aria-expanded="true"><i class="bi bi-lightbulb" role="img">
</i> 
 <span class="menu-text">Ideas &amp; Projects</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-38" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-38" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-39" role="navigation" aria-expanded="true"><i class="bi bi-book-half" role="img">
</i> 
 <span class="menu-text">Learning Hub</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-39" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-39" class="collapse list-unstyled sidebar-section depth2 show">  
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-40" role="navigation" aria-expanded="false">
 <span class="menu-text">01 Learning Hub Overview</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-40" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-40" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/01-learning-hub-overview/01-learning-hub-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning Hub Concept</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/01-learning-hub-overview/02-using-learning-hub-for-learning-technologies.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Using Learning Hub for Learning Technologies</span></a>
  </div>
</li>
      </ul>
  </li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-41" role="navigation" aria-expanded="false">
 <span class="menu-text">02 Documentation Taxonomy</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-41" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-41" class="collapse list-unstyled sidebar-section depth3 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../06.00-idea/learning-hub/02-documentation-taxonomy/01-learning-hub-documentation-taxonomy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Learning-hub Documentation Taxonomy</span></a>
  </div>
</li>
      </ul>
  </li>
      </ul>
  </li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#customizing-markdown-rendering-with-lua-filters" id="toc-customizing-markdown-rendering-with-lua-filters" class="nav-link active" data-scroll-target="#customizing-markdown-rendering-with-lua-filters">Customizing Markdown Rendering with Lua Filters</a>
  <ul class="collapse">
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link" data-scroll-target="#table-of-contents">üìã Table of Contents</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction">üåê Introduction</a></li>
  <li><a href="#understanding-quartos-rendering-process" id="toc-understanding-quartos-rendering-process" class="nav-link" data-scroll-target="#understanding-quartos-rendering-process">‚öôÔ∏è Understanding Quarto‚Äôs Rendering Process</a>
  <ul class="collapse">
  <li><a href="#the-rendering-pipeline" id="toc-the-rendering-pipeline" class="nav-link" data-scroll-target="#the-rendering-pipeline">The Rendering Pipeline</a></li>
  <li><a href="#the-abstract-syntax-tree-ast" id="toc-the-abstract-syntax-tree-ast" class="nav-link" data-scroll-target="#the-abstract-syntax-tree-ast">The Abstract Syntax Tree (AST)</a></li>
  </ul></li>
  <li><a href="#lua-filters-intercepting-the-conversion" id="toc-lua-filters-intercepting-the-conversion" class="nav-link" data-scroll-target="#lua-filters-intercepting-the-conversion">üîß Lua Filters: Intercepting the Conversion</a>
  <ul class="collapse">
  <li><a href="#what-are-lua-filters" id="toc-what-are-lua-filters" class="nav-link" data-scroll-target="#what-are-lua-filters">What Are Lua Filters?</a></li>
  <li><a href="#filter-registration" id="toc-filter-registration" class="nav-link" data-scroll-target="#filter-registration">Filter Registration</a></li>
  <li><a href="#filter-execution-order" id="toc-filter-execution-order" class="nav-link" data-scroll-target="#filter-execution-order">Filter Execution Order</a></li>
  <li><a href="#pandoc-markdown-extensions" id="toc-pandoc-markdown-extensions" class="nav-link" data-scroll-target="#pandoc-markdown-extensions">Pandoc Markdown Extensions</a></li>
  </ul></li>
  <li><a href="#creating-your-first-lua-filter" id="toc-creating-your-first-lua-filter" class="nav-link" data-scroll-target="#creating-your-first-lua-filter">üöÄ Creating Your First Lua Filter</a>
  <ul class="collapse">
  <li><a href="#basic-filter-structure" id="toc-basic-filter-structure" class="nav-link" data-scroll-target="#basic-filter-structure">Basic Filter Structure</a></li>
  <li><a href="#element-types" id="toc-element-types" class="nav-link" data-scroll-target="#element-types">Element Types</a></li>
  <li><a href="#example-adding-css-classes" id="toc-example-adding-css-classes" class="nav-link" data-scroll-target="#example-adding-css-classes">Example: Adding CSS Classes</a></li>
  <li><a href="#example-transforming-content" id="toc-example-transforming-content" class="nav-link" data-scroll-target="#example-transforming-content">Example: Transforming Content</a></li>
  </ul></li>
  <li><a href="#advanced-filter-techniques" id="toc-advanced-filter-techniques" class="nav-link" data-scroll-target="#advanced-filter-techniques">üéØ Advanced Filter Techniques</a>
  <ul class="collapse">
  <li><a href="#common-filter-patterns" id="toc-common-filter-patterns" class="nav-link" data-scroll-target="#common-filter-patterns">Common Filter Patterns</a></li>
  <li><a href="#inspecting-element-structure" id="toc-inspecting-element-structure" class="nav-link" data-scroll-target="#inspecting-element-structure">Inspecting Element Structure</a></li>
  <li><a href="#returning-multiple-elements" id="toc-returning-multiple-elements" class="nav-link" data-scroll-target="#returning-multiple-elements">Returning Multiple Elements</a></li>
  <li><a href="#error-handling-strategies" id="toc-error-handling-strategies" class="nav-link" data-scroll-target="#error-handling-strategies">Error Handling Strategies</a></li>
  <li><a href="#filter-coordination-and-ordering" id="toc-filter-coordination-and-ordering" class="nav-link" data-scroll-target="#filter-coordination-and-ordering">Filter Coordination and Ordering</a></li>
  <li><a href="#debugging-and-testing-filters" id="toc-debugging-and-testing-filters" class="nav-link" data-scroll-target="#debugging-and-testing-filters">Debugging and Testing Filters</a></li>
  <li><a href="#conditional-processing" id="toc-conditional-processing" class="nav-link" data-scroll-target="#conditional-processing">Conditional Processing</a></li>
  <li><a href="#creating-extension-packages" id="toc-creating-extension-packages" class="nav-link" data-scroll-target="#creating-extension-packages">Creating Extension Packages</a></li>
  </ul></li>
  <li><a href="#appendix-a-the-bullet-list-problem" id="toc-appendix-a-the-bullet-list-problem" class="nav-link" data-scroll-target="#appendix-a-the-bullet-list-problem">Appendix A: The Bullet List Problem</a>
  <ul class="collapse">
  <li><a href="#problem-definition" id="toc-problem-definition" class="nav-link" data-scroll-target="#problem-definition">Problem Definition</a></li>
  <li><a href="#root-cause-analysis" id="toc-root-cause-analysis" class="nav-link" data-scroll-target="#root-cause-analysis">Root Cause Analysis</a></li>
  <li><a href="#ast-structure-analysis" id="toc-ast-structure-analysis" class="nav-link" data-scroll-target="#ast-structure-analysis">AST Structure Analysis</a></li>
  <li><a href="#solution-approaches" id="toc-solution-approaches" class="nav-link" data-scroll-target="#solution-approaches">Solution Approaches</a></li>
  <li><a href="#implementation-considerations" id="toc-implementation-considerations" class="nav-link" data-scroll-target="#implementation-considerations">Implementation Considerations</a></li>
  <li><a href="#recommendation" id="toc-recommendation" class="nav-link" data-scroll-target="#recommendation">Recommendation</a></li>
  </ul></li>
  <li><a href="#quarto-filter-extensions" id="toc-quarto-filter-extensions" class="nav-link" data-scroll-target="#quarto-filter-extensions">üì¶ Quarto Filter Extensions</a>
  <ul class="collapse">
  <li><a href="#extension-structure" id="toc-extension-structure" class="nav-link" data-scroll-target="#extension-structure">Extension Structure</a></li>
  <li><a href="#creating-an-extension" id="toc-creating-an-extension" class="nav-link" data-scroll-target="#creating-an-extension">Creating an Extension</a></li>
  <li><a href="#using-extensions" id="toc-using-extensions" class="nav-link" data-scroll-target="#using-extensions">Using Extensions</a></li>
  <li><a href="#extension-best-practices" id="toc-extension-best-practices" class="nav-link" data-scroll-target="#extension-best-practices">Extension Best Practices</a></li>
  <li><a href="#publishing-extensions" id="toc-publishing-extensions" class="nav-link" data-scroll-target="#publishing-extensions">Publishing Extensions</a></li>
  <li><a href="#example-complete-extension-package" id="toc-example-complete-extension-package" class="nav-link" data-scroll-target="#example-complete-extension-package">Example: Complete Extension Package</a></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">üéì Conclusion</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources">üìö Resources</a></li>
  <li><a href="#appendix-b-alternatives-to-lua-filters" id="toc-appendix-b-alternatives-to-lua-filters" class="nav-link" data-scroll-target="#appendix-b-alternatives-to-lua-filters">üîÄ Appendix B: Alternatives to Lua Filters</a>
  <ul class="collapse">
  <li><a href="#quarto-shortcodes" id="toc-quarto-shortcodes" class="nav-link" data-scroll-target="#quarto-shortcodes">1. Quarto Shortcodes</a></li>
  <li><a href="#pandoc-templates" id="toc-pandoc-templates" class="nav-link" data-scroll-target="#pandoc-templates">2. Pandoc Templates</a></li>
  <li><a href="#preprocessing-scripts" id="toc-preprocessing-scripts" class="nav-link" data-scroll-target="#preprocessing-scripts">3. Preprocessing Scripts</a></li>
  <li><a href="#quarto-extensions-non-filter" id="toc-quarto-extensions-non-filter" class="nav-link" data-scroll-target="#quarto-extensions-non-filter">4. Quarto Extensions (Non-Filter)</a></li>
  <li><a href="#post-processing-htmllatex" id="toc-post-processing-htmllatex" class="nav-link" data-scroll-target="#post-processing-htmllatex">5. Post-processing HTML/LaTeX</a></li>
  <li><a href="#css-and-javascript-html-only" id="toc-css-and-javascript-html-only" class="nav-link" data-scroll-target="#css-and-javascript-html-only">6. CSS and JavaScript (HTML only)</a></li>
  <li><a href="#decision-matrix" id="toc-decision-matrix" class="nav-link" data-scroll-target="#decision-matrix">Decision Matrix</a></li>
  <li><a href="#recommendation-1" id="toc-recommendation-1" class="nav-link" data-scroll-target="#recommendation-1">Recommendation</a></li>
  </ul></li>
  <li><a href="#version-history" id="toc-version-history" class="nav-link" data-scroll-target="#version-history">üìú Version History</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/darioairoldi/Learn/edit/main/03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/darioairoldi/Learn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Technologies</li><li class="breadcrumb-item">Markdown Compilers</li><li class="breadcrumb-item"><a href="../../../03.00-tech/20.01-markdown/01-quarto/01.01-introduction-to-quarto.html">Quarto</a></li><li class="breadcrumb-item"><a href="../../../03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.html">Customizing Markdown Rendering with Lua Filters</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Customizing Markdown Rendering with Lua Filters</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Diginsight Team </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 8, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="customizing-markdown-rendering-with-lua-filters" class="level1">
<h1>Customizing Markdown Rendering with Lua Filters</h1>
<section id="table-of-contents" class="level2">
<h2 class="anchored" data-anchor-id="table-of-contents">üìã Table of Contents</h2>
<ul>
<li><a href="#introduction">üåê Introduction</a></li>
<li><a href="#understanding-quartos-rendering-process">‚öôÔ∏è Understanding Quarto‚Äôs Rendering Process</a>
<ul>
<li><a href="#the-rendering-pipeline">The Rendering Pipeline</a></li>
<li><a href="#pandoc-markdown-extensions">Pandoc Markdown Extensions</a></li>
</ul></li>
<li><a href="#lua-filters-intercepting-the-conversion">üîß Lua Filters: Intercepting the Conversion</a>
<ul>
<li><a href="#what-is-a-lua-filter">What is a Lua Filter?</a></li>
<li><a href="#the-abstract-syntax-tree-ast">The Abstract Syntax Tree (AST)</a></li>
<li><a href="#filter-registration">Filter Registration</a></li>
<li><a href="#filter-execution-order">Filter Execution Order</a></li>
<li><a href="#performance-considerations">Performance Considerations</a></li>
</ul></li>
<li><a href="#creating-your-first-lua-filter">üöÄ Creating Your First Lua Filter</a>
<ul>
<li><a href="#basic-filter-structure">Basic Filter Structure</a></li>
<li><a href="#element-types">Element Types</a></li>
</ul></li>
<li><a href="#advanced-filter-techniques">üéØ Advanced Filter Techniques</a>
<ul>
<li><a href="#common-filter-patterns">Common Filter Patterns</a></li>
<li><a href="#inspecting-element-structure">Inspecting Element Structure</a></li>
<li><a href="#returning-multiple-elements">Returning Multiple Elements</a></li>
<li><a href="#conditional-processing">Conditional Processing</a></li>
<li><a href="#debugging-and-testing-filters">Debugging and Testing Filters</a></li>
<li><a href="#error-handling-strategies">Error Handling Strategies</a></li>
<li><a href="#filter-coordination-and-ordering">Filter Coordination and Ordering</a></li>
</ul></li>
<li><a href="#quarto-filter-extensions">üì¶ Quarto Filter Extensions</a>
<ul>
<li><a href="#extension-structure">Extension Structure</a></li>
<li><a href="#creating-an-extension">Creating an Extension</a></li>
<li><a href="#using-extensions">Using Extensions</a></li>
<li><a href="#publishing-extensions">Publishing Extensions</a></li>
</ul></li>
<li><a href="#conclusion">üéì Conclusion</a></li>
<li><a href="#resources">üìö Resources</a></li>
<li><a href="#appendix-a-the-bullet-list-problem">üìé Appendix A: The Bullet List Problem</a></li>
<li><a href="#appendix-b-alternatives-to-lua-filters">üîÄ Appendix B: Alternatives to Lua Filters</a></li>
</ul>
<hr>
</section>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">üåê Introduction</h2>
<p>Quarto is a powerful publishing system built on top of Pandoc, enabling the creation of technical documentation, websites, and presentations from Markdown files. While Quarto‚Äôs default rendering is robust, there are cases where you need fine-grained control over how Markdown is converted to HTML. This is where <strong>Lua filters</strong> become invaluable.</p>
<p>This article explains:</p>
<ul>
<li>How Quarto‚Äôs rendering pipeline processes Markdown</li>
<li>How Lua filters intercept and modify the Abstract Syntax Tree (AST)</li>
<li>Practical techniques for fixing HTML generation issues</li>
<li>A real-world case study: solving bullet list rendering problems</li>
</ul>
<hr>
</section>
<section id="understanding-quartos-rendering-process" class="level2">
<h2 class="anchored" data-anchor-id="understanding-quartos-rendering-process">‚öôÔ∏è Understanding Quarto‚Äôs Rendering Process</h2>
<section id="the-rendering-pipeline" class="level3">
<h3 class="anchored" data-anchor-id="the-rendering-pipeline">The Rendering Pipeline</h3>
<p>Quarto‚Äôs rendering process follows this flow:</p>
<pre class="mermaid"><code>graph LR
    A[Markdown Source] --&gt; B[Quarto Preprocessor]
    B --&gt; C[Pandoc Parser]
    C --&gt; D[Abstract Syntax Tree]
    D --&gt; E[Lua Filters]
    E --&gt; F[Pandoc Writer]
    F --&gt; G[HTML Output]</code></pre>
<p><strong>Key stages:</strong></p>
<ol type="1">
<li><strong>Quarto Preprocessor</strong>: Processes YAML metadata, code chunks, and Quarto-specific syntax</li>
<li><strong>Pandoc Parser</strong>: Converts Markdown to an Abstract Syntax Tree (AST)</li>
<li><strong>AST</strong>: Internal representation of document structure as a tree of elements</li>
<li><strong>Lua Filters</strong>: Custom code that modifies the AST before output generation</li>
<li><strong>Pandoc Writer</strong>: Converts AST to target format (HTML, PDF, etc.)</li>
</ol>
</section>
<section id="the-abstract-syntax-tree-ast" class="level3">
<h3 class="anchored" data-anchor-id="the-abstract-syntax-tree-ast">The Abstract Syntax Tree (AST)</h3>
<p>The AST represents your document as nested elements. For example:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>**Bold text:**</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Item 1</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Item 2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Without a blank line, Pandoc parses this as a single <code>Para</code> (paragraph) block containing:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Para <span class="op">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  Strong <span class="op">{</span> Str <span class="st">"Bold"</span> <span class="va">Space</span> Str <span class="st">"text:"</span> <span class="op">}</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">SoftBreak</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  Str <span class="st">"-"</span> <span class="va">Space</span> Str <span class="st">"Item"</span> <span class="va">Space</span> Str <span class="st">"1"</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="va">SoftBreak</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  Str <span class="st">"-"</span> <span class="va">Space</span> Str <span class="st">"Item"</span> <span class="va">Space</span> Str <span class="st">"2"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>With a blank line, it becomes:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Para <span class="op">{</span> Strong <span class="op">{</span> Str <span class="st">"Bold"</span> <span class="va">Space</span> Str <span class="st">"text:"</span> <span class="op">}</span> <span class="op">}</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>BulletList <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span> Plain <span class="op">{</span> Str <span class="st">"Item"</span> <span class="va">Space</span> Str <span class="st">"1"</span> <span class="op">}</span> <span class="op">}</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span> Plain <span class="op">{</span> Str <span class="st">"Item"</span> <span class="va">Space</span> Str <span class="st">"2"</span> <span class="op">}</span> <span class="op">}</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Key insight:</strong> Pandoc uses blank lines to separate block-level elements. Without them, list markers are just text within a paragraph.</p>
<hr>
</section>
</section>
<section id="lua-filters-intercepting-the-conversion" class="level2">
<h2 class="anchored" data-anchor-id="lua-filters-intercepting-the-conversion">üîß Lua Filters: Intercepting the Conversion</h2>
<section id="what-are-lua-filters" class="level3">
<h3 class="anchored" data-anchor-id="what-are-lua-filters">What Are Lua Filters?</h3>
<p>Lua filters are scripts that traverse and modify Pandoc‚Äôs AST during rendering. They allow you to:</p>
<ul>
<li>Transform specific document elements</li>
<li>Add custom HTML attributes</li>
<li>Generate content dynamically</li>
<li>Fix rendering issues that can‚Äôt be addressed with Markdown syntax alone</li>
</ul>
</section>
<section id="filter-registration" class="level3">
<h3 class="anchored" data-anchor-id="filter-registration">Filter Registration</h3>
<p>Filters are registered in <code>_quarto.yml</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">project</span><span class="kw">:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> website</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> _extensions/my-filter/my-filter.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or in document frontmatter:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My Document"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> my-filter.lua</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="filter-execution-order" class="level3">
<h3 class="anchored" data-anchor-id="filter-execution-order">Filter Execution Order</h3>
<p>Filters are applied in the order they appear in configuration. Each filter receives the AST from the previous filter‚Äôs output.</p>
</section>
<section id="pandoc-markdown-extensions" class="level3">
<h3 class="anchored" data-anchor-id="pandoc-markdown-extensions">Pandoc Markdown Extensions</h3>
<p>Pandoc supports numerous Markdown extensions that affect AST generation before filters run. Understanding these is crucial for filter development:</p>
<p><strong>Common extensions that impact filtering:</strong></p>
<ul>
<li><code>fenced_code_attributes</code> - Adds attributes to code blocks (<code>.class #id key=value</code>)</li>
<li><code>backtick_code_blocks</code> - Enables ``` syntax for code blocks</li>
<li><code>fenced_divs</code> - Creates <code>Div</code> elements with <code>:::</code> syntax</li>
<li><code>bracketed_spans</code> - Creates inline <code>Span</code> elements with <code>[text]{.class}</code></li>
<li><code>raw_html</code> - Preserves HTML elements as <code>RawBlock</code>/<code>RawInline</code></li>
<li><code>implicit_figures</code> - Converts standalone images to <code>Figure</code> elements</li>
<li><code>pipe_tables</code> - Enables <code>|</code> delimited tables</li>
</ul>
<p><strong>Checking enabled extensions:</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Pandoc<span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Extensions are available in doc.meta</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">extensions</span> <span class="op">=</span> <span class="cn">PANDOC_READER_OPTIONS</span><span class="op">.</span><span class="va">extensions</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Enabled extensions: "</span> <span class="op">..</span> <span class="fu">tostring</span><span class="op">(</span><span class="va">extensions</span><span class="op">)</span> <span class="op">..</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">doc</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Writing extension-aware filters:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Handle both fenced divs and HTML divs</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Div<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- This catches both :::{.class} and &lt;div class="class"&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span>includes<span class="op">(</span><span class="st">"callout"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Transform callout divs</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"custom-callout"</span><span class="op">)</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> RawBlock<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Handle raw HTML divs if fenced_divs disabled</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">format</span> <span class="op">==</span> <span class="st">"html"</span> <span class="kw">and</span> <span class="va">elem</span><span class="op">.</span><span class="va">text</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">'&lt;div class="callout"&gt;'</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Parse and convert to Div element</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Div<span class="op">({},</span> <span class="op">{</span><span class="va">class</span> <span class="op">=</span> <span class="st">"custom-callout"</span><span class="op">})</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Best practices:</strong></p>
<ul>
<li>Test filters with different extension sets</li>
<li>Document which extensions your filter requires</li>
<li>Provide fallback behavior for disabled extensions</li>
<li>Use <code>PANDOC_READER_OPTIONS</code> to detect extension availability</li>
</ul>
<hr>
</section>
</section>
<section id="creating-your-first-lua-filter" class="level2">
<h2 class="anchored" data-anchor-id="creating-your-first-lua-filter">üöÄ Creating Your First Lua Filter</h2>
<section id="basic-filter-structure" class="level3">
<h3 class="anchored" data-anchor-id="basic-filter-structure">Basic Filter Structure</h3>
<p>A Lua filter defines functions that match Pandoc AST element types:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Simple filter to modify all paragraphs</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Para<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Modify the paragraph element</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter for headers</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Header<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- elem.level contains header level (1-6)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- elem.content contains inline elements</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">-- Filter for links</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Link<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- elem.target contains URL</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- elem.content contains link text</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="element-types" class="level3">
<h3 class="anchored" data-anchor-id="element-types">Element Types</h3>
<p>Common Pandoc AST element types:</p>
<p><strong>Block elements:</strong></p>
<ul>
<li><code>Para</code> - Paragraph</li>
<li><code>Header</code> - Heading</li>
<li><code>BulletList</code> - Unordered list</li>
<li><code>OrderedList</code> - Numbered list</li>
<li><code>CodeBlock</code> - Code block</li>
<li><code>Div</code> - Generic container</li>
</ul>
<p><strong>Inline elements:</strong></p>
<ul>
<li><code>Str</code> - Text string</li>
<li><code>Space</code> - Space character</li>
<li><code>SoftBreak</code> - Line break (newline in source)</li>
<li><code>LineBreak</code> - Hard line break</li>
<li><code>Strong</code> - Bold text</li>
<li><code>Emph</code> - Italic text</li>
<li><code>Link</code> - Hyperlink</li>
<li><code>Code</code> - Inline code</li>
</ul>
</section>
<section id="example-adding-css-classes" class="level3">
<h3 class="anchored" data-anchor-id="example-adding-css-classes">Example: Adding CSS Classes</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Add a CSS class to all code blocks</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> CodeBlock<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"highlight"</span><span class="op">)</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Add custom attributes to headers</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Header<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">level</span> <span class="op">==</span> <span class="dv">2</span> <span class="cf">then</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"section-header"</span><span class="op">)</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="example-transforming-content" class="level3">
<h3 class="anchored" data-anchor-id="example-transforming-content">Example: Transforming Content</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Convert all "TODO" text to highlighted notes</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Str<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">text</span> <span class="op">==</span> <span class="st">"TODO"</span> <span class="cf">then</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Span<span class="op">(</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">{</span><span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">"TODO"</span><span class="op">)},</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>      <span class="op">{</span><span class="va">class</span> <span class="op">=</span> <span class="st">"todo-marker"</span><span class="op">}</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="advanced-filter-techniques" class="level2">
<h2 class="anchored" data-anchor-id="advanced-filter-techniques">üéØ Advanced Filter Techniques</h2>
<section id="common-filter-patterns" class="level3">
<h3 class="anchored" data-anchor-id="common-filter-patterns">Common Filter Patterns</h3>
<p>Reusable patterns for common filtering tasks:</p>
<p><strong>Pattern 1: Find and replace text</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Replace all occurrences of a term with styled version</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Str<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">text</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"API"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Span<span class="op">(</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">{</span><span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">text</span><span class="op">)},</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>      <span class="op">{</span><span class="va">class</span> <span class="op">=</span> <span class="st">"api-term"</span><span class="op">}</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">)</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pattern 2: Wrap elements with containers</strong></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Wrap all tables in a responsive container</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Table<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Div<span class="op">(</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="va">elem</span><span class="op">},</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="va">class</span> <span class="op">=</span> <span class="st">"table-responsive"</span><span class="op">}</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">)</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pattern 3: Add automatic anchors</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Generate URL-friendly anchors for headers</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Header<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> <span class="va">elem</span><span class="op">.</span><span class="va">identifier</span> <span class="kw">or</span> <span class="va">elem</span><span class="op">.</span><span class="va">identifier</span> <span class="op">==</span> <span class="st">""</span> <span class="cf">then</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">identifier</span> <span class="op">=</span> <span class="va">pandoc</span><span class="op">.</span><span class="va">utils</span><span class="op">.</span>stringify<span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">)</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span><span class="fu">gsub</span><span class="op">(</span><span class="st">"%s+"</span><span class="op">,</span> <span class="st">"-"</span><span class="op">)</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span><span class="fu">gsub</span><span class="op">(</span><span class="st">"[^%w-]"</span><span class="op">,</span> <span class="st">""</span><span class="op">)</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span><span class="fu">lower</span><span class="op">()</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pattern 4: Collect document metadata</strong></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">word_count</span> <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">code_blocks</span> <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Str<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="va">word_count</span> <span class="op">=</span> <span class="va">word_count</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> CodeBlock<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="va">code_blocks</span> <span class="op">=</span> <span class="va">code_blocks</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Pandoc<span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="va">doc</span><span class="op">.</span><span class="va">meta</span><span class="op">[</span><span class="st">"word_count"</span><span class="op">]</span> <span class="op">=</span> <span class="va">word_count</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="va">doc</span><span class="op">.</span><span class="va">meta</span><span class="op">[</span><span class="st">"code_blocks"</span><span class="op">]</span> <span class="op">=</span> <span class="va">code_blocks</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">doc</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pattern 5: Transform based on attributes</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Convert divs with special attributes to custom elements</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Div<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"type"</span><span class="op">]</span> <span class="op">==</span> <span class="st">"warning"</span> <span class="cf">then</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">icon</span> <span class="op">=</span> <span class="va">pandoc</span><span class="op">.</span>RawInline<span class="op">(</span><span class="st">"html"</span><span class="op">,</span> <span class="st">"‚ö†Ô∏è "</span><span class="op">)</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">title</span> <span class="op">=</span> <span class="va">pandoc</span><span class="op">.</span>Strong<span class="op">({</span><span class="va">icon</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">"Warning"</span><span class="op">)})</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table.insert</span><span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>Para<span class="op">({</span><span class="va">title</span><span class="op">}))</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"warning-box"</span><span class="op">)</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pattern 6: Link validation and transformation</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Add external link indicator and attributes</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Link<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">url</span> <span class="op">=</span> <span class="va">elem</span><span class="op">.</span><span class="va">target</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">url</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"^https?://"</span><span class="op">)</span> <span class="kw">and</span> <span class="kw">not</span> <span class="va">url</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"^https://mysite.com"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"external-link"</span><span class="op">)</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"target"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"_blank"</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"rel"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"noopener noreferrer"</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Add visual indicator</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table.insert</span><span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">" ‚Üó"</span><span class="op">))</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="inspecting-element-structure" class="level3">
<h3 class="anchored" data-anchor-id="inspecting-element-structure">Inspecting Element Structure</h3>
<p>Use <code>io.stderr:write()</code> to debug AST structure:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Para<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"=== Paragraph ===</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="va">i</span><span class="op">,</span> <span class="va">inline</span> <span class="kw">in</span> <span class="fu">ipairs</span><span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"[%d] %s</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> <span class="va">i</span><span class="op">,</span> <span class="va">inline</span><span class="op">.</span><span class="va">t</span><span class="op">))</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="returning-multiple-elements" class="level3">
<h3 class="anchored" data-anchor-id="returning-multiple-elements">Returning Multiple Elements</h3>
<p>Filters can return arrays to replace one element with many:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Para<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Split paragraph into multiple blocks</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="op">{</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">pandoc</span><span class="op">.</span>Para<span class="op">({</span><span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">"First paragraph"</span><span class="op">)}),</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">pandoc</span><span class="op">.</span>Para<span class="op">({</span><span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">"Second paragraph"</span><span class="op">)})</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="error-handling-strategies" class="level3">
<h3 class="anchored" data-anchor-id="error-handling-strategies">Error Handling Strategies</h3>
<p>Robust filters handle edge cases and failures gracefully:</p>
<p><strong>1. Validate inputs before processing:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Link<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Validate URL exists</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> <span class="va">elem</span><span class="op">.</span><span class="va">target</span> <span class="kw">or</span> <span class="va">elem</span><span class="op">.</span><span class="va">target</span> <span class="op">==</span> <span class="st">""</span> <span class="cf">then</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Warning: Empty link target</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Validate URL format</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> <span class="va">elem</span><span class="op">.</span><span class="va">target</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"^https?://"</span><span class="op">)</span> <span class="kw">and</span> <span class="kw">not</span> <span class="va">elem</span><span class="op">.</span><span class="va">target</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"^/"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"Warning: Unusual URL format: %s</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> <span class="va">elem</span><span class="op">.</span><span class="va">target</span><span class="op">))</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>2. Use pcall for risky operations:</strong></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> CodeBlock<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">success</span><span class="op">,</span> <span class="va">result</span> <span class="op">=</span> <span class="fu">pcall</span><span class="op">(</span><span class="kw">function</span><span class="op">()</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> syntax_highlight<span class="op">(</span><span class="va">elem</span><span class="op">)</span>  <span class="co">-- External function that might fail</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span><span class="op">)</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> <span class="va">success</span> <span class="cf">then</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Syntax highlighting failed: "</span> <span class="op">..</span> <span class="fu">tostring</span><span class="op">(</span><span class="va">result</span><span class="op">)</span> <span class="op">..</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"highlight-error"</span><span class="op">)</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">result</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>3. Provide fallback behavior:</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Image<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Try to read image dimensions</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">success</span><span class="op">,</span> <span class="va">dimensions</span> <span class="op">=</span> <span class="fu">pcall</span><span class="op">(</span><span class="va">get_image_size</span><span class="op">,</span> <span class="va">elem</span><span class="op">.</span><span class="va">src</span><span class="op">)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">success</span> <span class="cf">then</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"width"</span><span class="op">]</span> <span class="op">=</span> <span class="va">dimensions</span><span class="op">.</span><span class="va">width</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"height"</span><span class="op">]</span> <span class="op">=</span> <span class="va">dimensions</span><span class="op">.</span><span class="va">height</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Fallback: Use default dimensions</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"Could not read %s, using defaults</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> <span class="va">elem</span><span class="op">.</span><span class="va">src</span><span class="op">))</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"width"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"800"</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"height"</span><span class="op">]</span> <span class="op">=</span> <span class="st">"600"</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>4. Accumulate errors for summary:</strong></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">errors</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Para<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="kw">and</span> <span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Str"</span> <span class="kw">and</span> <span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="va">text</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"^ERROR:"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table.insert</span><span class="op">(</span><span class="va">errors</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span><span class="va">utils</span><span class="op">.</span>stringify<span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">))</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Pandoc<span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">#</span><span class="va">errors</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">then</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">=== Found %d errors ===</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> <span class="op">#</span><span class="va">errors</span><span class="op">))</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="va">i</span><span class="op">,</span> <span class="va">err</span> <span class="kw">in</span> <span class="fu">ipairs</span><span class="op">(</span><span class="va">errors</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>      <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"%d. %s</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> <span class="va">i</span><span class="op">,</span> <span class="va">err</span><span class="op">))</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">doc</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>5. Fail gracefully with informative messages:</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Div<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"include-file"</span><span class="op">]</span> <span class="cf">then</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">filename</span> <span class="op">=</span> <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">[</span><span class="st">"include-file"</span><span class="op">]</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">file</span> <span class="op">=</span> <span class="fu">io.open</span><span class="op">(</span><span class="va">filename</span><span class="op">,</span> <span class="st">"r"</span><span class="op">)</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> <span class="va">file</span> <span class="cf">then</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>      <span class="co">-- Return error message as content</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Div<span class="op">({</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>        <span class="va">pandoc</span><span class="op">.</span>Para<span class="op">({</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>          <span class="va">pandoc</span><span class="op">.</span>Strong<span class="op">({</span><span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">"Error:"</span><span class="op">)}),</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>          <span class="va">pandoc</span><span class="op">.</span>Space<span class="op">(),</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>          <span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"Could not include file '%s'"</span><span class="op">,</span> <span class="va">filename</span><span class="op">))</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">})</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>      <span class="op">},</span> <span class="op">{</span><span class="va">class</span> <span class="op">=</span> <span class="st">"error"</span><span class="op">})</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">content</span> <span class="op">=</span> <span class="va">file</span><span class="op">:</span><span class="fu">read</span><span class="op">(</span><span class="st">"*all"</span><span class="op">)</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    <span class="va">file</span><span class="op">:</span><span class="fu">close</span><span class="op">()</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- ... process content</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="filter-coordination-and-ordering" class="level3">
<h3 class="anchored" data-anchor-id="filter-coordination-and-ordering">Filter Coordination and Ordering</h3>
<p>When using multiple filters, order matters:</p>
<p><strong>Filter execution flow:</strong></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _quarto.yml</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> normalize-links.lua</span><span class="co">      # 1. Fix relative URLs</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> validate-links.lua</span><span class="co">       # 2. Check link validity  </span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> add-link-icons.lua</span><span class="co">       # 3. Add visual indicators</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Each filter receives the AST modified by previous filters.</p>
<p><strong>Passing data between filters:</strong></p>
<p>Filters can‚Äôt directly share variables, but can use document metadata:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- filter-1.lua: Collect link count</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">link_count</span> <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Link<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="va">link_count</span> <span class="op">=</span> <span class="va">link_count</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Pandoc<span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="va">doc</span><span class="op">.</span><span class="va">meta</span><span class="op">[</span><span class="st">"link_count"</span><span class="op">]</span> <span class="op">=</span> <span class="va">link_count</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">doc</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- filter-2.lua: Use link count from previous filter</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Pandoc<span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">count</span> <span class="op">=</span> <span class="va">doc</span><span class="op">.</span><span class="va">meta</span><span class="op">[</span><span class="st">"link_count"</span><span class="op">]</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">count</span> <span class="kw">and</span> <span class="va">count</span> <span class="op">&gt;</span> <span class="dv">100</span> <span class="cf">then</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Warning: Document has many links</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">doc</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Coordination strategies:</strong></p>
<ol type="1">
<li><p><strong>Separation of concerns:</strong> Each filter handles one transformation</p>
<ul>
<li><code>sanitize.lua</code> - Clean up malformed elements</li>
<li><code>enhance.lua</code> - Add extra functionality</li>
<li><code>style.lua</code> - Apply visual styling</li>
</ul></li>
<li><p><strong>Conditional execution:</strong> Use metadata to enable/disable filters</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Pandoc<span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Only run if enabled in metadata</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> <span class="va">doc</span><span class="op">.</span><span class="va">meta</span><span class="op">[</span><span class="st">"enable-custom-filter"</span><span class="op">]</span> <span class="cf">then</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">doc</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- ... filter logic</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Filter dependencies:</strong> Document prerequisites in comments</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- REQUIRES: normalize-links.lua must run first</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- EXPECTS: All links converted to absolute URLs</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Link<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">assert</span><span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">target</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"^https?://"</span><span class="op">),</span> <span class="st">"Link not normalized"</span><span class="op">)</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- ... validation logic</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Use extension bundles:</strong> Package related filters together</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _extension.yml</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">contributes</span><span class="kw">:</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> step1-normalize.lua</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> step2-validate.lua</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> step3-enhance.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
</section>
<section id="debugging-and-testing-filters" class="level3">
<h3 class="anchored" data-anchor-id="debugging-and-testing-filters">Debugging and Testing Filters</h3>
<p><strong>Debugging techniques:</strong></p>
<ol type="1">
<li><p><strong>Use stderr for logging:</strong> Output doesn‚Äôt interfere with document rendering</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Header<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"Processing H%d: %s</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">level</span><span class="op">,</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="va">pandoc</span><span class="op">.</span><span class="va">utils</span><span class="op">.</span>stringify<span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">)</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">))</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Inspect element structure:</strong> Use <code>pandoc.utils.stringify</code> and type inspection</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> debug_element<span class="op">(</span><span class="va">elem</span><span class="op">,</span> <span class="va">name</span><span class="op">)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">=== %s ===</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> <span class="va">name</span><span class="op">))</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Type: "</span> <span class="op">..</span> <span class="va">elem</span><span class="op">.</span><span class="va">t</span> <span class="op">..</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">content</span> <span class="cf">then</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Content: "</span> <span class="op">..</span> <span class="va">pandoc</span><span class="op">.</span><span class="va">utils</span><span class="op">.</span>stringify<span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">)</span> <span class="op">..</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">attributes</span> <span class="cf">then</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Attributes: "</span> <span class="op">..</span> <span class="va">pandoc</span><span class="op">.</span><span class="va">utils</span><span class="op">.</span>stringify<span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">attributes</span><span class="op">)</span> <span class="op">..</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Div<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  debug_element<span class="op">(</span><span class="va">elem</span><span class="op">,</span> <span class="st">"Div"</span><span class="op">)</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Save AST to file:</strong> Examine structure offline</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Pandoc<span class="op">(</span><span class="va">doc</span><span class="op">)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">file</span> <span class="op">=</span> <span class="fu">io.open</span><span class="op">(</span><span class="st">"ast-debug.json"</span><span class="op">,</span> <span class="st">"w"</span><span class="op">)</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="va">file</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="va">pandoc</span><span class="op">.</span><span class="va">json</span><span class="op">.</span>encode<span class="op">(</span><span class="va">doc</span><span class="op">))</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">file</span><span class="op">:</span><span class="fu">close</span><span class="op">()</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">doc</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Use Pandoc‚Äôs native debugging:</strong> Run with <code>-t native</code> to see AST</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> document.md <span class="at">-t</span> native <span class="op">&gt;</span> ast.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p><strong>Testing strategies:</strong></p>
<ol type="1">
<li><p><strong>Unit test with minimal documents:</strong></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- test-header.md --&gt;</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu"># Test Header</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>This should trigger the filter.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Create test suite:</strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test-filter.sh</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Test 1: Header transformation"</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> test-header.md <span class="at">--lua-filter</span><span class="op">=</span>my-filter.lua <span class="at">-t</span> html</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Test 2: Link modification"</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> test-links.md <span class="at">--lua-filter</span><span class="op">=</span>my-filter.lua <span class="at">-t</span> html</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Test 3: Code block styling"</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> test-code.md <span class="at">--lua-filter</span><span class="op">=</span>my-filter.lua <span class="at">-t</span> html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Compare before/after AST:</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show AST before filter</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> input.md <span class="at">-t</span> native <span class="op">&gt;</span> before.txt</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show AST after filter</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> input.md <span class="at">--lua-filter</span><span class="op">=</span>my-filter.lua <span class="at">-t</span> native <span class="op">&gt;</span> after.txt</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span> before.txt after.txt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Quarto-specific testing:</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test-document.qmd</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Filter Test"</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span><span class="at"> html</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> my-filter.lua</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="fu">keep-md</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span><span class="co">  # Keep intermediate markdown to inspect</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Test Content</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="at">This tests the filter.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<p><strong>Error handling in filters:</strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> CodeBlock<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">success</span><span class="op">,</span> <span class="va">result</span> <span class="op">=</span> <span class="fu">pcall</span><span class="op">(</span><span class="kw">function</span><span class="op">()</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Potentially error-prone code</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> process_code_block<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span><span class="op">)</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="kw">not</span> <span class="va">success</span> <span class="cf">then</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"Error processing code block: "</span> <span class="op">..</span> <span class="fu">tostring</span><span class="op">(</span><span class="va">result</span><span class="op">)</span> <span class="op">..</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">elem</span>  <span class="co">-- Return original element</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">result</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Common debugging scenarios:</strong></p>
<ul>
<li><strong>Filter not triggering:</strong> Check element type names (use <code>-t native</code> to verify)</li>
<li><strong>Partial matches:</strong> Verify AST structure matches your assumptions</li>
<li><strong>Quarto-specific issues:</strong> Check if Quarto preprocessing affects AST</li>
<li><strong>Order dependencies:</strong> Ensure filter runs at correct stage in pipeline</li>
</ul>
</section>
<section id="conditional-processing" class="level3">
<h3 class="anchored" data-anchor-id="conditional-processing">Conditional Processing</h3>
<p>Add logic to target specific patterns:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Para<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Only process paragraphs starting with "Note:"</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="kw">and</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>     <span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Str"</span> <span class="kw">and</span> </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>     <span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="va">text</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"^Note:"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Wrap in a div with special class</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Div<span class="op">({</span><span class="va">elem</span><span class="op">},</span> <span class="op">{</span><span class="va">class</span> <span class="op">=</span> <span class="st">"note"</span><span class="op">})</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creating-extension-packages" class="level3">
<h3 class="anchored" data-anchor-id="creating-extension-packages">Creating Extension Packages</h3>
<p>Organize filters as Quarto extensions:</p>
<pre><code>_extensions/
  my-filter/
    _extension.yml
    my-filter.lua</code></pre>
<p>**_extension.yml:**</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> My Filter</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Your Name</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.0</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">contributes</span><span class="kw">:</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> my-filter.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Register in <code>_quarto.yml</code>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> _extensions/my-filter/my-filter.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
</section>
</section>
<section id="appendix-a-the-bullet-list-problem" class="level2">
<h2 class="anchored" data-anchor-id="appendix-a-the-bullet-list-problem">Appendix A: The Bullet List Problem</h2>
<section id="problem-definition" class="level3">
<h3 class="anchored" data-anchor-id="problem-definition">Problem Definition</h3>
<p><strong>Issue:</strong> Markdown lists that immediately follow text without a blank line separator don‚Äôt render as HTML lists, even with the <code>+lists_without_preceding_blankline</code> Pandoc extension enabled.</p>
<p><strong>Example source:</strong></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>**New Features:**</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Feature 1</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Feature 2</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Feature 3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Actual HTML output:</strong></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>New Features:<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;</span> - Feature 1 - Feature 2 - Feature 3<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Expected HTML output:</strong></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;&lt;</span><span class="kw">strong</span><span class="dt">&gt;</span>New Features:<span class="dt">&lt;/</span><span class="kw">strong</span><span class="dt">&gt;&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">ul</span><span class="dt">&gt;</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>Feature 1<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>Feature 2<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">li</span><span class="dt">&gt;</span>Feature 3<span class="dt">&lt;/</span><span class="kw">li</span><span class="dt">&gt;</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">ul</span><span class="dt">&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="root-cause-analysis" class="level3">
<h3 class="anchored" data-anchor-id="root-cause-analysis">Root Cause Analysis</h3>
<ol type="1">
<li><strong>Pandoc‚Äôs parsing behavior:</strong> Without a blank line, Pandoc treats the entire sequence as a single paragraph</li>
<li><strong>Line breaks become <code>SoftBreak</code> elements</strong> in the AST, not block separators</li>
<li><strong>List markers are parsed as literal text</strong> (<code>Str "-"</code>) within the paragraph</li>
<li><strong>The <code>+lists_without_preceding_blankline</code> extension</strong> only works when list items start at the beginning of a line in a new paragraph context</li>
</ol>
</section>
<section id="ast-structure-analysis" class="level3">
<h3 class="anchored" data-anchor-id="ast-structure-analysis">AST Structure Analysis</h3>
<p>The problematic paragraph is parsed as:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>Para <span class="op">{</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">1</span><span class="op">]</span> Strong <span class="op">{</span> Str <span class="st">"New"</span> <span class="va">Space</span> Str <span class="st">"Features:"</span> <span class="op">}</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="va">SoftBreak</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">3</span><span class="op">]</span> Str <span class="st">"-"</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="va">Space</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">5</span><span class="op">]</span> Str <span class="st">"Feature"</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="va">Space</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">7</span><span class="op">]</span> Str <span class="st">"1"</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">8</span><span class="op">]</span> <span class="va">SoftBreak</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">9</span><span class="op">]</span> Str <span class="st">"-"</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="va">Space</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">11</span><span class="op">]</span> Str <span class="st">"Feature"</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">12</span><span class="op">]</span> <span class="va">Space</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="dv">13</span><span class="op">]</span> Str <span class="st">"2"</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- etc.</span></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Key observations:</strong></p>
<ul>
<li>All content is within a single <code>Para</code> element</li>
<li><code>SoftBreak</code> indicates line breaks in source</li>
<li>List markers (<code>"-"</code>) are just <code>Str</code> elements</li>
<li>No <code>BulletList</code> structure exists</li>
</ul>
</section>
<section id="solution-approaches" class="level3">
<h3 class="anchored" data-anchor-id="solution-approaches">Solution Approaches</h3>
<section id="approach-1-standard-markdown-recommended" class="level4">
<h4 class="anchored" data-anchor-id="approach-1-standard-markdown-recommended">Approach 1: Standard Markdown (Recommended)</h4>
<p><strong>Solution:</strong> Add a blank line before the list in the source:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>**New Features:**</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Feature 1</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Feature 2</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Feature 3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong></p>
<ul>
<li>No custom code required</li>
<li>Standard Markdown syntax</li>
<li>Works reliably across all Markdown renderers</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Requires modifying source files</li>
<li>May not match desired visual spacing</li>
</ul>
</section>
<section id="approach-2-lua-filter-detection-and-transformation" class="level4">
<h4 class="anchored" data-anchor-id="approach-2-lua-filter-detection-and-transformation">Approach 2: Lua Filter Detection and Transformation</h4>
<p><strong>Solution:</strong> Create a Lua filter that detects the inline list pattern and transforms it.</p>
<p><strong>Filter implementation:</strong></p>
<div class="sourceCode" id="cb49"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- detect-inline-lists.lua</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Detects paragraphs containing "SoftBreak + list marker" patterns</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- and transforms them into proper header + list structure</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Para<span class="op">(</span><span class="va">block</span><span class="op">)</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Find all positions where SoftBreak is followed by "- "</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">listMarkers</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="va">i</span><span class="op">,</span> <span class="va">inline</span> <span class="kw">in</span> <span class="fu">ipairs</span><span class="op">(</span><span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="va">inline</span><span class="op">.</span><span class="va">t</span> <span class="op">==</span> <span class="st">"SoftBreak"</span> <span class="kw">and</span> <span class="va">i</span> <span class="op">&lt;</span> <span class="op">#</span><span class="va">block</span><span class="op">.</span><span class="va">content</span> <span class="cf">then</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>      <span class="kw">local</span> <span class="va">next</span> <span class="op">=</span> <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="dv">1</span><span class="op">]</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>      <span class="co">-- Check for pattern: SoftBreak ‚Üí Str("-") ‚Üí Space</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="fu">next</span> <span class="kw">and</span> <span class="va">next</span><span class="op">.</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Str"</span> <span class="kw">and</span> <span class="va">next</span><span class="op">.</span><span class="va">text</span> <span class="op">==</span> <span class="st">"-"</span> <span class="cf">then</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">i</span> <span class="op">+</span> <span class="dv">2</span> <span class="op">&lt;=</span> <span class="op">#</span><span class="va">block</span><span class="op">.</span><span class="va">content</span> <span class="kw">and</span> <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="dv">2</span><span class="op">].</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Space"</span> <span class="cf">then</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>          <span class="fu">table.insert</span><span class="op">(</span><span class="va">listMarkers</span><span class="op">,</span> <span class="va">i</span><span class="op">)</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Only transform if we have at least 2 list items</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">#</span><span class="va">listMarkers</span> <span class="op">&lt;</span> <span class="dv">2</span> <span class="cf">then</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">block</span></span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">firstMarker</span> <span class="op">=</span> <span class="va">listMarkers</span><span class="op">[</span><span class="dv">1</span><span class="op">]</span></span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Split into header content and list items</span></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">headerContent</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">listItems</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">currentItem</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Extract header (everything before first list marker)</span></span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="va">i</span> <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> <span class="va">firstMarker</span> <span class="op">-</span> <span class="dv">1</span> <span class="cf">do</span></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table.insert</span><span class="op">(</span><span class="va">headerContent</span><span class="op">,</span> <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span><span class="op">])</span></span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Process list items</span></span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">i</span> <span class="op">=</span> <span class="va">firstMarker</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span> <span class="va">i</span> <span class="op">&lt;=</span> <span class="op">#</span><span class="va">block</span><span class="op">.</span><span class="va">content</span> <span class="cf">do</span></span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">inline</span> <span class="op">=</span> <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Detect list item start: preceded by break, is "- "</span></span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">isListMarker</span> <span class="op">=</span> <span class="kw">false</span></span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="va">inline</span><span class="op">.</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Str"</span> <span class="kw">and</span> <span class="va">inline</span><span class="op">.</span><span class="va">text</span> <span class="op">==</span> <span class="st">"-"</span> <span class="kw">and</span> </span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>       <span class="va">i</span> <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;=</span> <span class="op">#</span><span class="va">block</span><span class="op">.</span><span class="va">content</span> <span class="kw">and</span> <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="dv">1</span><span class="op">].</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Space"</span> <span class="cf">then</span></span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="va">i</span> <span class="op">&gt;</span> <span class="dv">1</span> <span class="cf">then</span></span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>        <span class="kw">local</span> <span class="va">prev</span> <span class="op">=</span> <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span></span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="va">prev</span><span class="op">.</span><span class="va">t</span> <span class="op">==</span> <span class="st">"SoftBreak"</span> <span class="cf">then</span></span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a>          <span class="va">isListMarker</span> <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end</span></span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elseif</span> <span class="va">i</span> <span class="op">==</span> <span class="va">firstMarker</span> <span class="op">+</span> <span class="dv">1</span> <span class="cf">then</span></span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>        <span class="va">isListMarker</span> <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end</span></span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="va">isListMarker</span> <span class="cf">then</span></span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a>      <span class="co">-- Save previous item</span></span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="op">#</span><span class="va">currentItem</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">then</span></span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a>        <span class="fu">table.insert</span><span class="op">(</span><span class="va">listItems</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>Plain<span class="op">(</span><span class="va">currentItem</span><span class="op">))</span></span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a>        <span class="va">currentItem</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end</span></span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a>      <span class="co">-- Skip "- " and continue</span></span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true" tabindex="-1"></a>      <span class="va">i</span> <span class="op">=</span> <span class="va">i</span> <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elseif</span> <span class="va">inline</span><span class="op">.</span><span class="va">t</span> <span class="op">==</span> <span class="st">"SoftBreak"</span> <span class="cf">then</span></span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true" tabindex="-1"></a>      <span class="co">-- Check if next is list marker</span></span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> <span class="va">i</span> <span class="op">+</span> <span class="dv">1</span> <span class="op">&lt;=</span> <span class="op">#</span><span class="va">block</span><span class="op">.</span><span class="va">content</span> <span class="kw">and</span> </span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true" tabindex="-1"></a>         <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="dv">1</span><span class="op">].</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Str"</span> <span class="kw">and</span> </span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true" tabindex="-1"></a>         <span class="va">block</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="va">i</span> <span class="op">+</span> <span class="dv">1</span><span class="op">].</span><span class="va">text</span> <span class="op">==</span> <span class="st">"-"</span> <span class="cf">then</span></span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true" tabindex="-1"></a>        <span class="co">-- Skip this break (it separates list items)</span></span>
<span id="cb49-71"><a href="#cb49-71" aria-hidden="true" tabindex="-1"></a>        <span class="va">i</span> <span class="op">=</span> <span class="va">i</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb49-72"><a href="#cb49-72" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span></span>
<span id="cb49-73"><a href="#cb49-73" aria-hidden="true" tabindex="-1"></a>        <span class="co">-- Keep break within item</span></span>
<span id="cb49-74"><a href="#cb49-74" aria-hidden="true" tabindex="-1"></a>        <span class="fu">table.insert</span><span class="op">(</span><span class="va">currentItem</span><span class="op">,</span> <span class="va">inline</span><span class="op">)</span></span>
<span id="cb49-75"><a href="#cb49-75" aria-hidden="true" tabindex="-1"></a>        <span class="va">i</span> <span class="op">=</span> <span class="va">i</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb49-76"><a href="#cb49-76" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end</span></span>
<span id="cb49-77"><a href="#cb49-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb49-78"><a href="#cb49-78" aria-hidden="true" tabindex="-1"></a>      <span class="co">-- Regular content</span></span>
<span id="cb49-79"><a href="#cb49-79" aria-hidden="true" tabindex="-1"></a>      <span class="fu">table.insert</span><span class="op">(</span><span class="va">currentItem</span><span class="op">,</span> <span class="va">inline</span><span class="op">)</span></span>
<span id="cb49-80"><a href="#cb49-80" aria-hidden="true" tabindex="-1"></a>      <span class="va">i</span> <span class="op">=</span> <span class="va">i</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb49-81"><a href="#cb49-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb49-82"><a href="#cb49-82" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-83"><a href="#cb49-83" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-84"><a href="#cb49-84" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Add final item</span></span>
<span id="cb49-85"><a href="#cb49-85" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">#</span><span class="va">currentItem</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">then</span></span>
<span id="cb49-86"><a href="#cb49-86" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table.insert</span><span class="op">(</span><span class="va">listItems</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>Plain<span class="op">(</span><span class="va">currentItem</span><span class="op">))</span></span>
<span id="cb49-87"><a href="#cb49-87" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-88"><a href="#cb49-88" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-89"><a href="#cb49-89" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Build result</span></span>
<span id="cb49-90"><a href="#cb49-90" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">result</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb49-91"><a href="#cb49-91" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-92"><a href="#cb49-92" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">#</span><span class="va">headerContent</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">then</span></span>
<span id="cb49-93"><a href="#cb49-93" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table.insert</span><span class="op">(</span><span class="va">result</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>Para<span class="op">(</span><span class="va">headerContent</span><span class="op">))</span></span>
<span id="cb49-94"><a href="#cb49-94" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-95"><a href="#cb49-95" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-96"><a href="#cb49-96" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">#</span><span class="va">listItems</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">then</span></span>
<span id="cb49-97"><a href="#cb49-97" aria-hidden="true" tabindex="-1"></a>    <span class="fu">table.insert</span><span class="op">(</span><span class="va">result</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>BulletList<span class="op">(</span><span class="va">listItems</span><span class="op">))</span></span>
<span id="cb49-98"><a href="#cb49-98" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-99"><a href="#cb49-99" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-100"><a href="#cb49-100" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Safety check: if result is empty, return original</span></span>
<span id="cb49-101"><a href="#cb49-101" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">#</span><span class="va">result</span> <span class="op">==</span> <span class="dv">0</span> <span class="cf">then</span></span>
<span id="cb49-102"><a href="#cb49-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">block</span></span>
<span id="cb49-103"><a href="#cb49-103" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb49-104"><a href="#cb49-104" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb49-105"><a href="#cb49-105" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">result</span></span>
<span id="cb49-106"><a href="#cb49-106" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Registration:</strong></p>
<p>Create extension structure:</p>
<pre><code>_extensions/
  detect-inline-lists/
    _extension.yml
    detect-inline-lists.lua</code></pre>
<p>**_extension.yml:**</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Detect Inline Lists</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Diginsight Team</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.0</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">contributes</span><span class="kw">:</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> detect-inline-lists.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>**_quarto.yml:**</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> _extensions/detect-inline-lists/detect-inline-lists.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong></p>
<ul>
<li>Automatically fixes the issue without changing source</li>
<li>Works for all documents in the project</li>
<li>Transparent to content authors</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Adds complexity to build process</li>
<li>Requires careful testing to avoid false positives</li>
<li>May have edge cases that break normal paragraphs</li>
</ul>
</section>
</section>
<section id="implementation-considerations" class="level3">
<h3 class="anchored" data-anchor-id="implementation-considerations">Implementation Considerations</h3>
<p><strong>Testing strategy:</strong></p>
<ol type="1">
<li>Create test documents with various patterns:
<ul>
<li>Normal paragraphs with ‚Äú-‚Äù in text</li>
<li>Lists after headings</li>
<li>Lists after code blocks</li>
<li>Lists within blockquotes</li>
<li>Mixed bold/italic text before lists</li>
</ul></li>
<li>Verify filter doesn‚Äôt break:
<ul>
<li>Tables containing ‚Äú-‚Äù</li>
<li>Inline math expressions</li>
<li>Code examples showing list syntax</li>
</ul></li>
</ol>
<p><strong>Debugging:</strong></p>
<p>Add logging to understand AST structure:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Para<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="st">"</span><span class="sc">\n</span><span class="st">=== Paragraph ===</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> <span class="va">i</span><span class="op">,</span> <span class="va">inline</span> <span class="kw">in</span> <span class="fu">ipairs</span><span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">text</span> <span class="op">=</span> <span class="va">inline</span><span class="op">.</span><span class="va">text</span> <span class="kw">or</span> <span class="st">""</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">io.stderr</span><span class="op">:</span><span class="fu">write</span><span class="op">(</span><span class="fu">string.format</span><span class="op">(</span><span class="st">"[%d] %s: %s</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> <span class="va">i</span><span class="op">,</span> <span class="va">inline</span><span class="op">.</span><span class="va">t</span><span class="op">,</span> <span class="va">text</span><span class="op">))</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- ... rest of filter logic</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Run Quarto with stderr visible:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="ex">quarto</span> render document.md <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">"Paragraph"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="recommendation" class="level3">
<h3 class="anchored" data-anchor-id="recommendation">Recommendation</h3>
<p><strong>For most use cases:</strong> Use standard Markdown with blank lines (Approach 1). This is:</p>
<ul>
<li>Simple and reliable</li>
<li>Portable across Markdown processors</li>
<li>Easier to maintain</li>
</ul>
<p><strong>When to use Lua filters:</strong></p>
<ul>
<li>Large existing documentation that can‚Äôt be easily modified</li>
<li>Automated content generation where adding blank lines is difficult</li>
<li>Custom rendering requirements beyond standard Markdown</li>
</ul>
<hr>
</section>
</section>
<section id="quarto-filter-extensions" class="level2">
<h2 class="anchored" data-anchor-id="quarto-filter-extensions">üì¶ Quarto Filter Extensions</h2>
<p>Quarto provides a modern extension system for packaging and distributing Lua filters. Extensions make filters reusable across projects and shareable with the community.</p>
<section id="extension-structure" class="level3">
<h3 class="anchored" data-anchor-id="extension-structure">Extension Structure</h3>
<p>A Quarto extension bundles filters with metadata:</p>
<pre><code>my-extension/
  _extension.yml          # Extension metadata
  my-filter.lua           # Filter implementation
  additional-filter.lua   # Optional additional filters
  README.md               # Documentation</code></pre>
<p>**_extension.yml structure:**</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> My Custom Filter</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Your Name</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.0</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="fu">quarto-required</span><span class="kw">:</span><span class="at"> </span><span class="st">"&gt;=1.2.0"</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">contributes</span><span class="kw">:</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> my-filter.lua</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> additional-filter.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="creating-an-extension" class="level3">
<h3 class="anchored" data-anchor-id="creating-an-extension">Creating an Extension</h3>
<p><strong>1. Initialize extension directory:</strong></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="ex">quarto</span> create extension filter my-extension</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> my-extension</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This generates the basic structure with <code>_extension.yml</code> and a starter filter.</p>
<p><strong>2. Implement filter logic:</strong></p>
<div class="sourceCode" id="cb58"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- my-extension/custom-callouts.lua</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Div<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span>includes<span class="op">(</span><span class="st">"note"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Transform .note divs to custom callouts</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"custom-callout"</span><span class="op">)</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="va">elem</span><span class="op">.</span><span class="va">classes</span><span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="st">"callout-note"</span><span class="op">)</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- Add icon</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">local</span> <span class="va">icon</span> <span class="op">=</span> <span class="va">pandoc</span><span class="op">.</span>RawInline<span class="op">(</span><span class="st">"html"</span><span class="op">,</span> <span class="st">'&lt;i class="bi bi-info-circle"&gt;&lt;/i&gt;'</span><span class="op">)</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">#</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span> <span class="op">&gt;</span> <span class="dv">0</span> <span class="kw">and</span> <span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="va">t</span> <span class="op">==</span> <span class="st">"Para"</span> <span class="cf">then</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">table.insert</span><span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="va">content</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="va">icon</span><span class="op">)</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">table.insert</span><span class="op">(</span><span class="va">elem</span><span class="op">.</span><span class="va">content</span><span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="va">content</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="va">pandoc</span><span class="op">.</span>Space<span class="op">())</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>3. Configure extension metadata:</strong></p>
<div class="sourceCode" id="cb59"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _extension.yml</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Custom Callouts</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Your Name</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.0</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">quarto-required</span><span class="kw">:</span><span class="at"> </span><span class="st">"&gt;=1.3.0"</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="fu">contributes</span><span class="kw">:</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> custom-callouts.lua</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">format-resources</span><span class="kw">:</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> custom-callouts.css</span><span class="co">  # Optional CSS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-extensions" class="level3">
<h3 class="anchored" data-anchor-id="using-extensions">Using Extensions</h3>
<p><strong>Install from directory:</strong></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="ex">quarto</span> add path/to/my-extension</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Install from GitHub:</strong></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="ex">quarto</span> add username/my-extension</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Enable in document:</strong></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"My Document"</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> my-extension</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or in <code>_quarto.yml</code> for project-wide use:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">project</span><span class="kw">:</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> website</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> my-extension</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="extension-best-practices" class="level3">
<h3 class="anchored" data-anchor-id="extension-best-practices">Extension Best Practices</h3>
<p><strong>1. Version your extensions:</strong> Use semantic versioning</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.2.3</span><span class="co">  # major.minor.patch</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">quarto-required</span><span class="kw">:</span><span class="at"> </span><span class="st">"&gt;=1.3.0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>2. Document requirements:</strong> Specify Quarto version and dependencies</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quarto-required</span><span class="kw">:</span><span class="at"> </span><span class="st">"&gt;=1.4.0"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>3. Provide examples:</strong> Include sample documents</p>
<pre><code>my-extension/
  _extension.yml
  filter.lua
  example.qmd           # Example document
  README.md             # Usage instructions</code></pre>
<p><strong>4. Test across formats:</strong> Ensure filter works with HTML, PDF, docx</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test-document.qmd</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Test"</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pdf</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">docx</span><span class="kw">:</span><span class="at"> default</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> my-extension</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>5. Handle format-specific logic:</strong></p>
<div class="sourceCode" id="cb68"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Div<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="cn">FORMAT</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"html"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- HTML-specific rendering</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> html_callout<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">elseif</span> <span class="cn">FORMAT</span><span class="op">:</span><span class="fu">match</span><span class="op">(</span><span class="st">"latex"</span><span class="op">)</span> <span class="cf">then</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- LaTeX-specific rendering</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> latex_callout<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span>  <span class="co">-- Default for other formats</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="publishing-extensions" class="level3">
<h3 class="anchored" data-anchor-id="publishing-extensions">Publishing Extensions</h3>
<p><strong>1. Create GitHub repository:</strong></p>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> init</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> add .</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-m</span> <span class="st">"Initial extension"</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> remote add origin https://github.com/username/my-extension.git</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push <span class="at">-u</span> origin main</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>2. Tag releases:</strong></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> tag <span class="at">-a</span> v1.0.0 <span class="at">-m</span> <span class="st">"First release"</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push origin v1.0.0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>3. Add to Quarto extensions listing:</strong></p>
<p>Submit to <a href="https://quarto.org/docs/extensions/listing.html">quarto.org/docs/extensions/listing.html</a> via pull request.</p>
</section>
<section id="example-complete-extension-package" class="level3">
<h3 class="anchored" data-anchor-id="example-complete-extension-package">Example: Complete Extension Package</h3>
<p><strong>Scenario:</strong> Create extension for automatic acronym expansion</p>
<p><strong>File: acronym-expander.lua</strong></p>
<div class="sourceCode" id="cb71"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Load acronyms from metadata</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">acronyms</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Meta<span class="op">(</span><span class="va">meta</span><span class="op">)</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">meta</span><span class="op">.</span><span class="va">acronyms</span> <span class="cf">then</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="va">key</span><span class="op">,</span> <span class="va">value</span> <span class="kw">in</span> <span class="fu">pairs</span><span class="op">(</span><span class="va">meta</span><span class="op">.</span><span class="va">acronyms</span><span class="op">)</span> <span class="cf">do</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>      <span class="va">acronyms</span><span class="op">[</span><span class="va">key</span><span class="op">]</span> <span class="op">=</span> <span class="va">pandoc</span><span class="op">.</span><span class="va">utils</span><span class="op">.</span>stringify<span class="op">(</span><span class="va">value</span><span class="op">)</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">meta</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Expand acronyms on first occurrence</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> <span class="va">seen</span> <span class="op">=</span> <span class="op">{}</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> Str<span class="op">(</span><span class="va">elem</span><span class="op">)</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>  <span class="kw">local</span> <span class="va">text</span> <span class="op">=</span> <span class="va">elem</span><span class="op">.</span><span class="va">text</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="va">acronyms</span><span class="op">[</span><span class="va">text</span><span class="op">]</span> <span class="kw">and</span> <span class="kw">not</span> <span class="va">seen</span><span class="op">[</span><span class="va">text</span><span class="op">]</span> <span class="cf">then</span></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>    <span class="va">seen</span><span class="op">[</span><span class="va">text</span><span class="op">]</span> <span class="op">=</span> <span class="kw">true</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Span<span class="op">({</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>      <span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="va">acronyms</span><span class="op">[</span><span class="va">text</span><span class="op">]),</span></span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>      <span class="va">pandoc</span><span class="op">.</span>Space<span class="op">(),</span></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>      <span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">"("</span><span class="op">),</span></span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>      <span class="va">pandoc</span><span class="op">.</span>Strong<span class="op">({</span><span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="va">text</span><span class="op">)}),</span></span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a>      <span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">")"</span><span class="op">)</span></span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">})</span></span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="va">elem</span></span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>**File: _extension.yml**</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> Acronym Expander</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> Documentation Team</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">1.0.0</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="fu">quarto-required</span><span class="kw">:</span><span class="at"> </span><span class="st">"&gt;=1.3.0"</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">contributes</span><span class="kw">:</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> acronym-expander.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>File: example.qmd</strong></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Acronym Example"</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> acronym-expander</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">acronyms</span><span class="kw">:</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">API</span><span class="kw">:</span><span class="at"> </span><span class="st">"Application Programming Interface"</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">REST</span><span class="kw">:</span><span class="at"> </span><span class="st">"Representational State Transfer"</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">HTTP</span><span class="kw">:</span><span class="at"> </span><span class="st">"Hypertext Transfer Protocol"</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="co">## Using APIs</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="at">The API provides REST endpoints over HTTP.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Output:</strong> First occurrences expanded, subsequent uses show acronym only: &gt; The Application Programming Interface (API) provides Representational State Transfer (REST) endpoints over Hypertext Transfer Protocol (HTTP). The API endpoints‚Ä¶</p>
<hr>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">üéì Conclusion</h2>
<p>Lua filters provide powerful capabilities for customizing Quarto‚Äôs rendering process. By understanding how Pandoc‚Äôs AST works and where filters fit in the pipeline, you can solve complex rendering issues that standard Markdown can‚Äôt address.</p>
<p>The bullet list problem demonstrates both the power and complexity of filter-based solutions. While filters can automatically fix rendering issues, they require careful implementation and testing. In many cases, adjusting source Markdown is simpler and more maintainable.</p>
<p><strong>Key takeaways:</strong></p>
<ol type="1">
<li><strong>Understand the AST:</strong> Use debugging to see how Pandoc parses your content</li>
<li><strong>Start simple:</strong> Try standard Markdown solutions before writing filters</li>
<li><strong>Test thoroughly:</strong> Filters can have unexpected side effects on other content</li>
<li><strong>Document your filters:</strong> Future maintainers need to understand custom rendering logic</li>
</ol>
<hr>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">üìö Resources</h2>
<p><strong><a href="https://pandoc.org/lua-filters.html">Pandoc Lua Filters Documentation</a></strong> [üìò Official]<br>
Comprehensive reference for Pandoc‚Äôs Lua filter API, including all available functions, element types, and AST manipulation methods. Essential resource for filter development.</p>
<p><strong><a href="https://quarto.org/docs/extensions/">Quarto Extensions Guide</a></strong> [üìò Official]<br>
Official guide to creating and using Quarto extensions, including filter extensions, shortcodes, and custom formats. Shows how to package filters for reuse and distribution.</p>
<p><strong><a href="https://pandoc.org/lua-filters.html#type-ref">Pandoc AST Reference</a></strong> [üìò Official]<br>
Detailed type reference for all Pandoc AST elements. Use this to understand element structure and available properties when writing filters.</p>
<p><strong><a href="https://www.lua.org/manual/5.3/">Lua 5.3 Reference Manual</a></strong> [üìò Official]<br>
Complete language reference for Lua 5.3 (used by Pandoc). Covers language syntax, standard libraries, and programming patterns.</p>
<p><strong><a href="https://github.com/pandoc/lua-filters">Pandoc Lua Filters Repository</a></strong> [üìó Verified Community]<br>
Collection of community-contributed Lua filters with real-world examples. Excellent source for learning filter patterns and finding reusable solutions.</p>
<p><strong><a href="https://quarto.org/docs/extensions/filters.html">Quarto Filter Development Best Practices</a></strong> [üìò Official]<br>
Quarto-specific guidance for writing filters that work well with Quarto‚Äôs processing pipeline, including performance tips and testing strategies.</p>
<p><strong><a href="https://pandoc.org/MANUAL.html#filters">Pandoc User‚Äôs Guide - Filters Section</a></strong> [üìò Official]<br>
Comprehensive overview of how Pandoc filters work, including JSON filters and Lua filters, with execution order and pipeline details.</p>
<p><strong><a href="https://github.com/pandoc/lua-filters/blob/master/CONTRIBUTING.md">Lua Filter Tutorial by Albert Krewinkel</a></strong> [üìó Verified Community]<br>
Practical tutorial by Pandoc‚Äôs lead Lua filter developer. Covers common patterns, debugging techniques, and advanced use cases.</p>
<p><strong><a href="https://quarto.org/docs/reference/">Quarto CLI Reference</a></strong> [üìò Official]<br>
Command-line reference for Quarto, including options for filter debugging, format-specific rendering, and project configuration.</p>
<p><strong><a href="https://github.com/jgm/pandoc/discussions/categories/lua-filters">Pandoc Discussions - Lua Filters</a></strong> [üìó Verified Community]<br>
Active community forum for Lua filter questions, troubleshooting, and sharing techniques. Great resource for finding solutions to specific problems.</p>
<p><strong><a href="https://www.lua.org/manual/5.4/manual.html">Lua 5.4 Updates</a></strong> [üìò Official]<br>
Language updates in Lua 5.4 (used by newer Pandoc versions). Important for understanding new features and compatibility considerations.</p>
<p><strong><a href="https://github.com/quarto-journals/">Quarto Journal Articles Extension</a></strong> [üìó Verified Community]<br>
Real-world examples of complex filter extensions for academic journal formatting. Shows advanced techniques for multi-format output customization.</p>
<hr>
</section>
<section id="appendix-b-alternatives-to-lua-filters" class="level2">
<h2 class="anchored" data-anchor-id="appendix-b-alternatives-to-lua-filters">üîÄ Appendix B: Alternatives to Lua Filters</h2>
<p>While Lua filters are powerful, other approaches may be simpler for certain use cases:</p>
<section id="quarto-shortcodes" class="level3">
<h3 class="anchored" data-anchor-id="quarto-shortcodes">1. Quarto Shortcodes</h3>
<p><strong>When to use:</strong> Reusable content snippets without complex AST manipulation</p>
<p><strong>Example:</strong></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _quarto.yml</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">shortcodes</span><span class="kw">:</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> my-shortcodes.lua</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb75"><pre class="sourceCode lua code-with-copy"><code class="sourceCode lua"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- my-shortcodes.lua</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="op">{</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">[</span><span class="st">"warning"</span><span class="op">]</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">args</span><span class="op">,</span> <span class="va">kwargs</span><span class="op">,</span> <span class="va">meta</span><span class="op">)</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">pandoc</span><span class="op">.</span>Div<span class="op">({</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>      <span class="va">pandoc</span><span class="op">.</span>Para<span class="op">({</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>        <span class="va">pandoc</span><span class="op">.</span>Strong<span class="op">({</span><span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="st">"‚ö†Ô∏è Warning: "</span><span class="op">)}),</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>        <span class="va">pandoc</span><span class="op">.</span>Str<span class="op">(</span><span class="va">args</span><span class="op">[</span><span class="dv">1</span><span class="op">])</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>      <span class="op">})</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">},</span> <span class="op">{</span><span class="va">class</span> <span class="op">=</span> <span class="st">"warning"</span><span class="op">})</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Usage in markdown:</strong></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>{{&lt; warning "Check your configuration before deploying" &gt;}}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong> Simple syntax, easy to learn, good for non-developers<br>
<strong>Cons:</strong> Limited to content insertion, can‚Äôt modify existing elements</p>
</section>
<section id="pandoc-templates" class="level3">
<h3 class="anchored" data-anchor-id="pandoc-templates">2. Pandoc Templates</h3>
<p><strong>When to use:</strong> Customizing document structure and layout</p>
<p><strong>Example:</strong> Modify HTML template to add custom header</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract default template</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="ex">pandoc</span> <span class="at">-D</span> html <span class="op">&gt;</span> custom-template.html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Edit <code>custom-template.html</code>:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>$if(custom-banner)$</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">"custom-banner"</span><span class="dt">&gt;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  $custom-banner$</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>$endif$</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Usage:</strong></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">template</span><span class="kw">:</span><span class="at"> custom-template.html</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="fu">custom-banner</span><span class="kw">:</span><span class="at"> </span><span class="st">"This is a draft document"</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong> Full control over output structure, format-specific<br>
<strong>Cons:</strong> Requires template syntax knowledge, separate template per format</p>
</section>
<section id="preprocessing-scripts" class="level3">
<h3 class="anchored" data-anchor-id="preprocessing-scripts">3. Preprocessing Scripts</h3>
<p><strong>When to use:</strong> Complex transformations before Pandoc processes content</p>
<p><strong>Example:</strong> Python script to inject table of contents</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># preprocess.py</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_toc(content):</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    headers <span class="op">=</span> re.findall(<span class="vs">r'^##\s+(.+)$'</span>, content, re.MULTILINE)</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>    toc <span class="op">=</span> <span class="st">'</span><span class="ch">\n</span><span class="st">## Table of Contents</span><span class="ch">\n\n</span><span class="st">'</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> header <span class="kw">in</span> headers:</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>        anchor <span class="op">=</span> header.lower().replace(<span class="st">' '</span>, <span class="st">'-'</span>)</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>        toc <span class="op">+=</span> <span class="ss">f'- [</span><span class="sc">{</span>header<span class="sc">}</span><span class="ss">](#</span><span class="sc">{</span>anchor<span class="sc">}</span><span class="ss">)</span><span class="ch">\n</span><span class="ss">'</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Insert after first header</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> re.sub(<span class="vs">r'(^#\s+.+$)'</span>, <span class="vs">r'\1\n'</span> <span class="op">+</span> toc, content, count<span class="op">=</span><span class="dv">1</span>, flags<span class="op">=</span>re.MULTILINE)</span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">'__main__'</span>:</span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>    content <span class="op">=</span> sys.stdin.read()</span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(add_toc(content))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Quarto integration:</strong></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span><span class="at"> html</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filters</span><span class="kw">:</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">type</span><span class="kw">:</span><span class="at"> json</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> preprocess.py</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or use <code>quarto render</code> with pipes:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> preprocess.py <span class="op">&lt;</span> input.md <span class="kw">|</span> <span class="ex">quarto</span> render <span class="at">-</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong> Use any programming language, full text manipulation<br>
<strong>Cons:</strong> Operates on markdown text (not AST), harder to get right, fragile</p>
</section>
<section id="quarto-extensions-non-filter" class="level3">
<h3 class="anchored" data-anchor-id="quarto-extensions-non-filter">4. Quarto Extensions (Non-Filter)</h3>
<p><strong>When to use:</strong> Adding functionality without modifying AST</p>
<p><strong>Types:</strong></p>
<ul>
<li><strong>Format extensions:</strong> Custom output formats</li>
<li><strong>Shortcode extensions:</strong> Reusable content macros</li>
<li><strong>Project extensions:</strong> Project-wide configurations</li>
</ul>
<p><strong>Example: Format extension for custom HTML output</strong></p>
<div class="sourceCode" id="cb83"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># _extensions/my-format/_extension.yml</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> My Format</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">contributes</span><span class="kw">:</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">formats</span><span class="kw">:</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">my-format</span><span class="kw">:</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">theme</span><span class="kw">:</span><span class="at"> custom</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">css</span><span class="kw">:</span><span class="at"> styles.css</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a><span class="at">        </span><span class="fu">include-in-header</span><span class="kw">:</span><span class="at"> header.html</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong> Packages related customizations together<br>
<strong>Cons:</strong> Doesn‚Äôt modify content, only presentation</p>
</section>
<section id="post-processing-htmllatex" class="level3">
<h3 class="anchored" data-anchor-id="post-processing-htmllatex">5. Post-processing HTML/LaTeX</h3>
<p><strong>When to use:</strong> Output-specific modifications after rendering</p>
<p><strong>Example:</strong> Modify HTML after Quarto rendering</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># postprocess.py</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> sys</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> sys.stdin.read()</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> BeautifulSoup(html, <span class="st">'html.parser'</span>)</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Add target="_blank" to external links</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> link <span class="kw">in</span> soup.find_all(<span class="st">'a'</span>, href<span class="op">=</span><span class="va">True</span>):</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> link[<span class="st">'href'</span>].startswith(<span class="st">'http'</span>) <span class="kw">and</span> <span class="st">'mysite.com'</span> <span class="kw">not</span> <span class="kw">in</span> link[<span class="st">'href'</span>]:</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>        link[<span class="st">'target'</span>] <span class="op">=</span> <span class="st">'_blank'</span></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>        link[<span class="st">'rel'</span>] <span class="op">=</span> <span class="st">'noopener noreferrer'</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(soup.prettify())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Usage:</strong></p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="ex">quarto</span> render document.qmd</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> postprocess.py <span class="op">&lt;</span> document.html <span class="op">&gt;</span> document-final.html</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong> Operates on final output, can use powerful libraries (BeautifulSoup, etc.)<br>
<strong>Cons:</strong> Format-specific, separate script per format, runs outside Quarto</p>
</section>
<section id="css-and-javascript-html-only" class="level3">
<h3 class="anchored" data-anchor-id="css-and-javascript-html-only">6. CSS and JavaScript (HTML only)</h3>
<p><strong>When to use:</strong> Visual modifications without changing content structure</p>
<p><strong>Example: Automatic anchor links</strong></p>
<div class="sourceCode" id="cb86"><pre class="sourceCode javascript code-with-copy"><code class="sourceCode javascript"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co">// add-anchors.js</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">'DOMContentLoaded'</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">'h2, h3, h4'</span>)<span class="op">.</span><span class="fu">forEach</span>(<span class="kw">function</span>(heading) {</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> anchor <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">'a'</span>)<span class="op">;</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    anchor<span class="op">.</span><span class="at">className</span> <span class="op">=</span> <span class="st">'anchor-link'</span><span class="op">;</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    anchor<span class="op">.</span><span class="at">href</span> <span class="op">=</span> <span class="st">'#'</span> <span class="op">+</span> heading<span class="op">.</span><span class="at">id</span><span class="op">;</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>    anchor<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">'#'</span><span class="op">;</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    heading<span class="op">.</span><span class="fu">appendChild</span>(anchor)<span class="op">;</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb87"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">format</span><span class="kw">:</span></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">html</span><span class="kw">:</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">include-after-body</span><span class="kw">:</span><span class="at"> add-anchors.js</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="pp">---</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Pros:</strong> No build-time processing, works in browser, easier to debug<br>
<strong>Cons:</strong> HTML-only, client-side only, doesn‚Äôt affect PDF/docx</p>
</section>
<section id="decision-matrix" class="level3">
<h3 class="anchored" data-anchor-id="decision-matrix">Decision Matrix</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 25%">
<col style="width: 33%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Approach</th>
<th>Complexity</th>
<th>Format Support</th>
<th>Use Case</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Lua Filters</strong></td>
<td>High</td>
<td>All formats</td>
<td>AST manipulation, cross-format transformations</td>
</tr>
<tr class="even">
<td><strong>Shortcodes</strong></td>
<td>Low</td>
<td>All formats</td>
<td>Simple content injection</td>
</tr>
<tr class="odd">
<td><strong>Templates</strong></td>
<td>Medium</td>
<td>Format-specific</td>
<td>Document structure customization</td>
</tr>
<tr class="even">
<td><strong>Preprocessing</strong></td>
<td>Medium</td>
<td>All formats</td>
<td>Text-based transformations</td>
</tr>
<tr class="odd">
<td><strong>Extensions</strong></td>
<td>Low-Medium</td>
<td>All formats</td>
<td>Packaging related customizations</td>
</tr>
<tr class="even">
<td><strong>Post-processing</strong></td>
<td>Medium</td>
<td>Format-specific</td>
<td>Output-specific modifications</td>
</tr>
<tr class="odd">
<td><strong>CSS/JS</strong></td>
<td>Low</td>
<td>HTML only</td>
<td>Visual enhancements</td>
</tr>
</tbody>
</table>
</section>
<section id="recommendation-1" class="level3">
<h3 class="anchored" data-anchor-id="recommendation-1">Recommendation</h3>
<p><strong>Start with the simplest approach that solves your problem:</strong></p>
<ol type="1">
<li><strong>For simple content:</strong> Use shortcodes</li>
<li><strong>For layout:</strong> Use templates or CSS</li>
<li><strong>For cross-format transformations:</strong> Use Lua filters</li>
<li><strong>For format-specific output:</strong> Post-process with scripts</li>
<li><strong>For packaging:</strong> Create Quarto extensions</li>
</ol>
<p><strong>Only use Lua filters when:</strong></p>
<ul>
<li>You need to transform document structure (AST)</li>
<li>Changes must work across multiple output formats</li>
<li>Other approaches are too limited or fragile</li>
</ul>
<hr>
</section>
</section>
<section id="version-history" class="level2">
<h2 class="anchored" data-anchor-id="version-history">üìú Version History</h2>
<ul>
<li><strong>1.0.0</strong> (January 8, 2026): Initial article creation</li>
<li><strong>1.1.0</strong> (January 8, 2026): Major content expansion - Added Pandoc extensions, performance considerations, common patterns, debugging techniques, error handling, filter coordination, Quarto extensions section, and alternatives appendix. Expanded references with 8 new authoritative sources.</li>
</ul>
<!--
article_metadata:
  filename: "10.01-customizing-markdown-rendering-with-lua-filters.md"
  validation:
    last_run: "2026-01-08T00:00:00Z"
    model: "Claude Sonnet 4.5"
    status: "comprehensive_review_completed"
    review_type: "consistency_gaps_extensions"
    
  references:
    checked: 4
    valid: 4
    broken: 0
    added: 8
    total: 12
    
  gap_analysis:
    gaps_identified: 18
    gaps_addressed: 18
    critical_items: 4
    high_priority: 8
    medium_priority: 6
    
  changes_summary:
    sections_added: 7
    sections_expanded: 4
    new_content_areas:
      - "Pandoc Markdown Extensions subsection"
      - "Performance Considerations subsection"
      - "Common Filter Patterns subsection"
      - "Debugging and Testing Filters subsection"
      - "Error Handling Strategies subsection"
      - "Filter Coordination and Ordering subsection"
      - "Quarto Filter Extensions major section"
      - "Appendix B: Alternatives to Lua Filters"
    toc_updated: true
    references_expanded: true
    
  quality_scores:
    technical_accuracy: "verified_with_official_docs"
    completeness: "comprehensive_coverage"
    practical_value: "high_with_examples"
    reference_quality: "authoritative_sources"
-->


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/darioairoldi\.github\.io\/Learn");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../../03.00-tech/20.01-markdown/01-quarto/09.02-azure-storage-deployment.html" class="pagination-link" aria-label="Deploying a Quarto Site to Azure Storage Accounts">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Deploying a Quarto Site to Azure Storage Accounts</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../../03.00-tech/20.01-markdown/01-quarto/readme.html" class="pagination-link" aria-label="Quarto Documentation Series">
        <span class="nav-page-text">Quarto Documentation Series</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/darioairoldi/Learn/edit/main/03.00-tech/20.01-markdown/01-quarto/10.01-customizing-markdown-rendering-with-lua-filters.md" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/darioairoldi/Learn/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>